(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9cbad7b0"],{"1dd5":function(t,e,i){"use strict";var a=i("dade"),s=i.n(a);s.a},2138:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{label:"规则标题",required:!0,"label-col":{md:3,xs:24},"wrapper-col":{md:6,xs:24}}},[i("a-input",{attrs:{placeholder:"规则标题"},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),i("a-form-item",{attrs:{label:"内容",required:!0,"label-col":{md:3,xs:24},"wrapper-col":{md:10,xs:24}}},[i("a-textarea",{attrs:{placeholder:"内容",rows:4},model:{value:t.formItem.content,callback:function(e){t.$set(t.formItem,"content",e)},expression:"formItem.content"}})],1),i("a-form-item",{attrs:{label:"分类排序","label-col":{md:3,xs:24},"wrapper-col":{md:6,xs:24}}},[i("a-input",{attrs:{placeholder:"分类排序"},model:{value:t.formItem.listorder,callback:function(e){t.$set(t.formItem,"listorder",e)},expression:"formItem.listorder"}})],1),i("a-form-item",{attrs:{label:"是否开启",required:!0,"label-col":{md:3,xs:24},"wrapper-col":{md:6,xs:24}}},[i("a-radio-group",{attrs:{name:"isShow"},model:{value:t.formItem.is_show,callback:function(e){t.$set(t.formItem,"is_show",e)},expression:"formItem.is_show"}},[i("a-radio",{attrs:{value:0}},[t._v("关闭")]),i("a-radio",{attrs:{value:1}},[t._v("开启")])],1)],1),i("a-form-item",{attrs:{label:"规则类型",required:!0,"label-col":{md:3,xs:24},"wrapper-col":{md:6,xs:24}}},[i("a-select",{staticStyle:{width:"250px"},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},t._l(t.ruleTypeList,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.rule))])})),1)],1),i("a-form-item",{attrs:{"wrapper-col":{offset:4,md:12,xs:24}}},[i("a-button",{attrs:{type:"primary"},on:{click:t.submitData}},[t._v("提交")]),i("a-button",{staticClass:"ml10",attrs:{type:"danger"},on:{click:function(e){return t.$router.back(-1)}}},[t._v("返回")])],1)],1)],1)},s=[],r=(i("5ab2"),i("6d57"),i("e10e"),i("ce3c")),o=i("9f3a"),l=i("4428"),n=i("44de");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={name:"addArticle",components:{UploadImage:l["a"],Ueditor:n["a"]},data:function(){return{imageLists:[],formItem:{title:"",content:"",is_show:1,type:"",listorder:""},itemId:"",form:this.$form.createForm(this)}},computed:m({},Object(o["c"])({dataItem:function(t){return t.rule.dataItem},ruleTypeList:function(t){return t.rule.ruleTypeList}})),created:function(){this.$route.query.itemId&&(this.itemId=this.$route.query.itemId,this.getDateItem(this.itemId)),this.getRuleType()},mounted:function(){},methods:m(m({},Object(o["b"])({addDateItem:"rule/addDateItem",getDateItem:"rule/getDataItem",editDataItem:"rule/editDataItem",getRuleType:"rule/getRuleType"})),{},{initData:function(){this.formItem.title=this.dataItem.title,this.formItem.listorder=this.dataItem.listorder,this.formItem.content=this.dataItem.content,this.formItem.is_show=this.dataItem.is_show,this.formItem.type=this.dataItem.type},submitData:function(){var t={title:this.formItem.title,listorder:this.formItem.listorder,content:this.formItem.content,is_show:this.formItem.is_show,type:this.formItem.type};this.itemId?(t.id=this.itemId,this.editDataItem(t)):this.addDateItem(t)}}),watch:{dataItem:function(){this.initData()}}},d=u,p=(i("1dd5"),i("9ca4")),f=Object(p["a"])(d,a,s,!1,null,"4c8657ca",null);e["default"]=f.exports},4428:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"UploadBox"},[t._l(t.uploadImageList,(function(e,a){return i("div",{key:a,staticClass:"upload-image-list"},["finished"===e.status?[i("img",{attrs:{src:e.url}}),i("div",{staticClass:"upload-image-list-cover"},[i("a-icon",{attrs:{type:"eye"},nativeOn:{click:function(i){return t.handleView(e.url)}}}),i("a-icon",{attrs:{type:"delete"},nativeOn:{click:function(i){return t.handleRemove(e)}}})],1)]:[e.showProgress?i("a-progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)})),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"60px"},attrs:{name:"image",headers:t.headers,"show-upload-list":!1,"default-file-list":t.defaultImageList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:t.isMultiple,type:"drag",action:t.uploadImageUrl}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("a-icon",{attrs:{type:"upload",size:"20"}})],1)]),i("AlbumPics",{attrs:{isMultiple:!0,maximum:t.surplusNum},on:{selectOk:t.selectPics}},[i("div",{staticClass:"ant-upload ant-upload-drag"},[i("a-icon",{attrs:{type:"camera",size:"20"}})],1)])],2),i("a-modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:t.imageUrl}}):t._e(),i("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},s=[],r=(i("6d57"),i("163d"),i("3830")),o=i("804d"),l=i("564b"),n=i("ca00"),c={name:"UploadImage",components:{AlbumPics:l["a"],Upload:r["a"]},props:{defaultImageList:Array,maximum:Number,shopId:Number},data:function(){return{headers:{Accept:"application/json",Authorization:"Bearer ".concat(Object(n["a"])())},uploadImageUrl:o["a"].baseURL+o["a"].action.upload_image,imageUrl:"",visible:!1,isMultiple:1!==this.maximum,uploadImageList:[],surplusNum:this.maximum-this.defaultImageList.length}},methods:{handleView:function(t){this.imageUrl=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1),this.uploadImageList=this.$refs.upload.fileList,this.surplusNum++},handleSuccess:function(t,e){console.log(JSON.stringify(t)),0===t.code?(e.url=t.result.pic_url,this.surplusNum--):this.$notification.warning({message:"Warning Notice",description:t.message})},handleFormatError:function(){this.$Notice.warning({message:"The file format is incorrect",description:"上传文件格式不正确"})},handleMaxSize:function(){this.$Notice.warning({message:"Exceeding file size limit",description:"上传文件过大."})},handleBeforeUpload:function(){var t=this.uploadImageList.length<this.maximum;return t||this.$notification.warning({message:"Notice",description:"最多只能上传".concat(this.maximum,"张图片, 请删除后再上传")}),t},selectPics:function(t){var e=this;t.forEach((function(t){var i={status:"finished",url:t.pic_url};e.uploadImageList.push(i),e.surplusNum--}))}},mounted:function(){this.uploadImageList=this.$refs.upload.fileList},watch:{defaultImageList:function(){this.uploadImageList=this.defaultImageList,this.surplusNum=this.surplusNum-this.uploadImageList.length}}},m=c,u=(i("4876"),i("9ca4")),d=Object(u["a"])(m,a,s,!1,null,"7fd14ca1",null);e["a"]=d.exports},4876:function(t,e,i){"use strict";var a=i("b907"),s=i.n(a);s.a},b907:function(t,e,i){},dade:function(t,e,i){}}]);