(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70cb84e2"],{1085:function(t,e,a){"use strict";var r=a("1bda"),s=a.n(r);s.a},"1bda":function(t,e,a){},"35b9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("a-form",{attrs:{model:t.formItem}},[a("a-form-item",{attrs:{label:"商品类型名称","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[a("a-input",{model:{value:t.formItem.type_name,callback:function(e){t.$set(t.formItem,"type_name",e)},expression:"formItem.type_name"}})],1),a("a-form-item",{attrs:{label:"商品品牌","label-col":{md:4,xs:24},"wrapper-col":{md:10,xs:24}}},[a("a-checkbox-group",{attrs:{options:t.brandOptions},model:{value:t.formItem.brand_id,callback:function(e){t.$set(t.formItem,"brand_id",e)},expression:"formItem.brand_id"}})],1),a("a-form-item",{attrs:{label:"商品属性","label-col":{md:4,xs:24},"wrapper-col":{md:18,xs:24}}},[a("ul",t._l(t.formItem.attribute_value,(function(e,r){return a("li",{key:r,staticClass:"mb10"},[a("a-row",[a("a-col",{staticClass:"goodsType-col",attrs:{xs:24,md:2}},[e.id?a("a-input",{staticStyle:{width:"60px",flex:"none"},attrs:{disabled:"",min:"0",type:"number"},model:{value:e.attr_sort,callback:function(a){t.$set(e,"attr_sort",a)},expression:"item.attr_sort"}}):a("a-input",{staticStyle:{width:"60px",flex:"none"},attrs:{min:"0",type:"number"},model:{value:e.attr_sort,callback:function(a){t.$set(e,"attr_sort",a)},expression:"item.attr_sort"}})],1),a("a-col",{staticClass:"goodsType-col",attrs:{xs:24,md:6}},[e.id?a("a-input",{attrs:{disabled:"",placeholder:"输入属性名称"},model:{value:e.attr_name,callback:function(a){t.$set(e,"attr_name",a)},expression:"item.attr_name"}}):a("a-input",{attrs:{placeholder:"输入属性名称"},model:{value:e.attr_name,callback:function(a){t.$set(e,"attr_name",a)},expression:"item.attr_name"}})],1),a("a-col",{staticClass:"goodsType-col",attrs:{xs:24,md:6}},[e.id?a("a-input",{attrs:{disabled:"",placeholder:"输入属性值"},model:{value:e.attr_value,callback:function(a){t.$set(e,"attr_value",a)},expression:"item.attr_value"}}):a("a-input",{attrs:{placeholder:"输入属性值"},model:{value:e.attr_value,callback:function(a){t.$set(e,"attr_value",a)},expression:"item.attr_value"}})],1),a("a-col",{staticClass:"goodsType-col",attrs:{xs:24,md:2}},[a("a-checkbox",{model:{value:e.attr_show,callback:function(a){t.$set(e,"attr_show",a)},expression:"item.attr_show"}},[t._v("显示")])],1),0===r||e.id?t._e():a("a-col",{staticClass:"goodsType-col",attrs:{xs:24,md:2}},[a("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.del(r)}}},[t._v("移除")])],1),e.id?a("a-col",{staticClass:"goodsType-col",attrs:{xs:24,md:2}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.editAttr(r,e)}}},[t._v("编辑")])],1):t._e()],1)],1)})),0),a("a-button",{attrs:{icon:"plus",type:"dashed"},on:{click:t.addGoodsAttr}},[t._v("新增属性")])],1),a("a-form-item",{attrs:{label:"商品类型排序","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[a("a-input",{staticStyle:{width:"100px"},attrs:{type:"number"},model:{value:t.formItem.type_sort,callback:function(e){t.$set(t.formItem,"type_sort",e)},expression:"formItem.type_sort"}})],1),a("a-form-item",{attrs:{"wrapper-col":{offset:4,md:12,xs:24}}},[a("a-button",{attrs:{type:"primary"},on:{click:t.submitGoodsType}},[t._v("提交")]),a("a-button",{staticClass:"ml10",attrs:{type:"danger"},on:{click:function(e){return t.$router.back(-1)}}},[t._v("返回")])],1)],1),a("a-modal",{attrs:{title:"属性编辑",width:"700px"},on:{ok:t.addrEditOk},model:{value:t.attrShow,callback:function(e){t.attrShow=e},expression:"attrShow"}},[a("a-form",{staticClass:"modelForm",attrs:{model:t.attrItem}},[a("a-form-item",{attrs:{label:"属性名称","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{staticStyle:{width:"50%"},model:{value:t.attrItem.attr_name,callback:function(e){t.$set(t.attrItem,"attr_name",e)},expression:"attrItem.attr_name"}}),a("p",{staticClass:"col-666 fs12"},[t._v("\n          请填写常用的商品属性的名称；例如：材质；价格区间等\n        ")])],1),a("a-form-item",{attrs:{label:"属性排序","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{staticStyle:{width:"50%"},attrs:{type:"number"},model:{value:t.attrItem.attr_sort,callback:function(e){t.$set(t.attrItem,"attr_sort",e)},expression:"attrItem.attr_sort"}})],1),a("a-form-item",{attrs:{label:"是否显示","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-switch",{on:{change:t.switchChange},model:{value:t.attr_is_show,callback:function(e){t.attr_is_show=e},expression:"attr_is_show"}})],1),a("a-form-item",{staticClass:"item-boder",attrs:{"wrapper-col":{md:24,xs:24}}},[a("p",[t._v("编辑属性可选值")]),a("div",t._l(t.attrItem.attr_value,(function(e,r){return a("a-row",{key:r,staticClass:"mb10"},[e.id?a("a-col",{attrs:{md:3,xs:12}},[a("a-checkbox",{on:{change:t.CheckChange},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}},[t._v("删除")])],1):a("a-col",{attrs:{md:3,xs:6}},[a("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.delAttrVal(r)}}},[t._v("移除")])],1),a("a-col",{staticClass:"model-item",attrs:{md:5,xs:12}},[a("label",[t._v("排序：")]),a("a-input",{attrs:{min:"0",type:"number"},model:{value:e.attr_value_sort,callback:function(a){t.$set(e,"attr_value_sort",a)},expression:"item.attr_value_sort"}})],1),a("a-col",{staticClass:"model-item",attrs:{md:8,xs:12}},[a("label",[t._v("可选值：")]),a("a-input",{model:{value:e.attr_value_name,callback:function(a){t.$set(e,"attr_value_name",a)},expression:"item.attr_value_name"}})],1),a("a-col",{staticClass:"model-item",attrs:{md:6,xs:12}},[a("label",[t._v("是否加入搜索：")]),a("a-switch",{model:{value:e.set_search,callback:function(a){t.$set(e,"set_search",a)},expression:"item.set_search"}})],1)],1)})),1),a("div",[a("a-button",{staticClass:"mt10",attrs:{icon:"plus"},on:{click:t.addAttrVal}},[t._v("添加一个属性值")])],1)])],1)],1)],1)},s=[],o=(a("5ab2"),a("e10e"),a("163d"),a("6d57"),a("ce3c")),i=a("9f3a");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={computed:n({},Object(i["c"])({detail:function(t){return t.goods.goodsTypeDet},goodsAttrDet:function(t){return t.goods.goodsAttrDet},allBrand:function(t){return t.goods.allBrand}})),data:function(){return{id:0,brandOptions:[],specOptions:[],check:!0,attrIndex:0,attrShow:!1,formItem:{type_name:"",type_sort:0,spec_id:[],brand_id:[],attribute_value:[{attr_sort:0,attr_name:"",attr_value:"",attr_show:!0}]},attr_is_show:!0,attrItem:{attr_id:"",type_id:"",attr_name:"",attr_sort:"",attr_value:[],attr_show:0,attr_value_del:[]}}},methods:n(n({},Object(i["b"])({addGoodsType:"goods/addGoodsType",editGoodsType:"goods/editGoodsType",getAllGoodsTypeDetail:"goods/getAllGoodsTypeDetail",getGoodsTypeDetail:"goods/getGoodsTypeDetail",getGoodsAttrDetail:"goods/getGoodsAttrDetail",editGoodsAttr:"goods/editAttr"})),{},{editAttr:function(t,e){this.attrShow=!0,this.attrIndex=t,this.getGoodsAttrDetail({id:e.id})},addrEditOk:function(){for(var t=0;t<this.attrItem.attr_value.length;t++)delete this.attrItem.attr_value[t].checked;this.editGoodsAttr({formItem:this.attrItem})},addGoodsAttr:function(){this.formItem.attribute_value.push({attr_sort:0,attr_name:"",attr_value:"",attr_show:!0})},initOptions:function(){var t=this;this.allBrand.forEach((function(e){t.brandOptions.push({label:e.brand_name,value:e.id})}))},submitGoodsType:function(){console.log(JSON.stringify(this.formItem));for(var t=0;t<this.formItem.attribute_value.length;t++)this.formItem.attribute_value[t].attr_show=Number(this.formItem.attribute_value[t].attr_show);if(0===this.id)this.addGoodsType({formItem:this.formItem});else{var e=Object.assign(this.formItem,{id:Number(this.id)});console.log(e),this.editGoodsType({formItem:e})}},del:function(t){this.formItem.attribute_value.splice(t,1)},initDetail:function(){this.formItem.type_name=this.detail.GoodsType.type_name,this.formItem.type_sort=this.detail.GoodsType.type_sort;for(var t=this.detail.attr_list,e=this.detail.brand_related,a=0;a<t.length;a++)t[a].attr_show=t[a].attr_is_show;for(var r=0;r<e.length;r++)this.formItem.brand_id.push(e[r].brand_id);this.formItem.attribute_value=this.detail.attr_list},initAttr:function(){this.attrItem.attr_name=this.goodsAttrDet.attr_info.attr_name,this.attrItem.attr_sort=this.goodsAttrDet.attr_info.attr_sort,this.attrItem.attr_id=this.goodsAttrDet.attr_info.id,this.attrItem.type_id=this.goodsAttrDet.attr_info.type_id,this.attr_is_show=this.goodsAttrDet.attr_info.attr_is_show;for(var t=0;t<this.goodsAttrDet.attr_list.length;t++)this.$set(this.goodsAttrDet.attr_list[t],"checked",!1),1===this.goodsAttrDet.attr_list[t].set_search?this.goodsAttrDet.attr_list[t].set_search=!0:this.goodsAttrDet.attr_list[t].set_search=!1;this.attrItem.attr_value=this.goodsAttrDet.attr_list},CheckChange:function(t){this.attrItem.attr_value_del=[];for(var e=0;e<this.attrItem.attr_value.length;e++)this.attrItem.attr_value[e].checked&&this.attrItem.attr_value_del.push(this.attrItem.attr_value[e].id)},switchChange:function(t){this.attrItem.attr_show=t?1:0},addAttrVal:function(){this.attrItem.attr_value.push({attr_value_name:"",attr_value_sort:0,set_search:!0})},delAttrVal:function(t){this.attrItem.attr_value.splice(t,1)}}),mounted:function(){void 0!==this.$route.params.id?(this.id=this.$route.params.id,this.getGoodsTypeDetail({id:this.id})):this.getAllGoodsTypeDetail()},watch:{detail:function(){this.initDetail()},allBrand:function(){this.initOptions()},goodsAttrDet:function(){this.initAttr()}}},d=c,m=(a("1085"),a("9ca4")),u=Object(m["a"])(d,r,s,!1,null,"13e253ec",null);e["default"]=u.exports}}]);