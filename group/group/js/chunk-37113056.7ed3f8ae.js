(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37113056"],{"117a":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{staticClass:"list-nav"},[o("div",{staticClass:"mb20"},[o("search",{on:{search:t.getSearch,export:t.exportTable}})],1)]),o("div",{staticClass:"mb10"},[o("Button",{staticClass:"mr10",attrs:{type:"success",icon:"md-arrow-round-up"},on:{click:function(e){return t.handleGoodsState(1)}}},[t._v("上架商品")]),o("Button",{staticClass:"mr10",attrs:{type:"warning",icon:"md-arrow-round-down"},on:{click:function(e){return t.handleGoodsState(0)}}},[t._v("下架商品")])],1),t.listField&&t.listField.length>0?[o("a-tabs",{attrs:{defaultActiveKey:0},on:{tabClick:t.onGetData}},t._l(t.tabLists,(function(e){return o("a-tab-pane",{key:e.key,attrs:{tab:e.tab}},[o("a-table",{attrs:{scroll:{x:1100,y:700},rowKey:"id",rowSelection:{selectedRowKeys:t.selectList,onChange:t.onChange},columns:t.listField,dataSource:t.listData,pagination:!1},scopedSlots:t._u([{key:"goods_image",fn:function(t){return o("a",{attrs:{target:"_blank",href:t}},[o("img",{staticStyle:{height:"50px"},attrs:{src:t,alt:""}})])}},{key:"goods_state",fn:function(e){return o("div",{},[0==e?o("a-tag",{attrs:{color:"#f90"}},[t._v("下架")]):1==e?o("a-tag",{attrs:{color:"#87d068"}},[t._v("上架")]):10==e?o("a-tag",{attrs:{color:"#f50"}},[t._v("禁售")]):20==e?o("a-tag",{attrs:{color:"#929292"}},[t._v("删除")]):t._e()],1)}}],null,!0)}),o("div",{staticClass:"pageBox"},[o("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:t.pages.per_page,defaultCurrent:1},on:{change:t.pageChange}})],1)],1)})),1)]:t._e()],2)},s=[],a=(o("5ab2"),o("6d57"),o("e10e"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(t.tagName,t._b({tag:"component",class:t.classes,attrs:{disabled:t.disabled},on:{click:t.handleClickLink}},"component",t.tagProps,!1),[t.loading?o("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):t._e(),!t.icon&&!t.customIcon||t.loading?t._e():o("Icon",{attrs:{type:t.icon,custom:t.customIcon}}),t.showSlot?o("span",{ref:"slot"},[t._t("default")],2):t._e()],1)}),r=[],n=o("ce3c"),c=o("c3a8"),l=o("93a0"),d={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(t){return Object(l["a"])(t,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){const t=typeof this.to;if("string"!==t)return null;if(this.to.includes("//"))return this.to;const e=this.$router;if(e){const t=this.$route,o=e.resolve(this.to,t,this.append);return o?o.href:this.to}return this.to}},methods:{handleClick(t=!1){const e=this.$router;if(t){let t=this.to;if(e){const o=this.$route,i=e.resolve(this.to,o,this.append);t=i?i.href:this.to}window.open(t)}else e?this.replace?this.$router.replace(this.to):this.$router.push(this.to):window.location.href=this.to},handleCheckClick(t,e=!1){if(this.to){if("_blank"===this.target)return!1;t.preventDefault(),this.handleClick(e)}}}},u="ivu-btn",h={name:"Button",mixins:[d],components:{Icon:c["a"]},props:{type:{validator:function(t){return Object(l["a"])(t,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator:function(t){return Object(l["a"])(t,["circle","circle-outline"])}},size:{validator:function(t){return Object(l["a"])(t,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator:function(t){return Object(l["a"])(t,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},data:function(){return{showSlot:!0}},computed:{classes:function(){var t;return["".concat(u),"".concat(u,"-").concat(this.type),(t={},Object(n["a"])(t,"".concat(u,"-long"),this.long),Object(n["a"])(t,"".concat(u,"-").concat(this.shape),!!this.shape),Object(n["a"])(t,"".concat(u,"-").concat(this.size),"default"!==this.size),Object(n["a"])(t,"".concat(u,"-loading"),null!=this.loading&&this.loading),Object(n["a"])(t,"".concat(u,"-icon-only"),!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading)),Object(n["a"])(t,"".concat(u,"-ghost"),this.ghost),t)]},isHrefPattern:function(){var t=this.to;return!!t},tagName:function(){var t=this.isHrefPattern;return t?"a":"button"},tagProps:function(){var t=this.isHrefPattern;if(t){var e=this.linkUrl,o=this.target;return{href:e,target:o}}var i=this.htmlType;return{type:i}}},methods:{handleClickLink:function(t){this.$emit("click",t);var e=t.ctrlKey||t.metaKey;this.handleCheckClick(t,e)}},mounted:function(){this.showSlot=void 0!==this.$slots.default}},f=h,_=o("9ca4"),m=Object(_["a"])(f,a,r,!1,null,null,null),p=m.exports,g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.classes},[t._t("default")],2)},b=[],v="ivu-btn-group",y={name:"ButtonGroup",props:{size:{validator:function(t){return Object(l["a"])(t,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},shape:{validator:function(t){return Object(l["a"])(t,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes:function(){var t;return["".concat(v),(t={},Object(n["a"])(t,"".concat(v,"-").concat(this.size),!!this.size),Object(n["a"])(t,"".concat(v,"-").concat(this.shape),!!this.shape),Object(n["a"])(t,"".concat(v,"-vertical"),this.vertical),t)]}}},w=y,I=Object(_["a"])(w,g,b,!1,null,null,null),k=I.exports;p.Group=k;var O=p,x=o("9f3a"),C=o("c968"),j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mb20"},[o("a-form",{attrs:{layout:"inline"}},[o("a-row",[o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{label:"项目选择","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-select",{attrs:{placeholder:"请选择项目",allowClear:""},model:{value:t.formItem.gm_id,callback:function(e){t.$set(t.formItem,"gm_id",e)},expression:"formItem.gm_id"}},t._l(t.gmlistData,(function(e,i){return o("a-select-option",{attrs:{value:e.gm_id}},[t._v(t._s(e.platform_name))])})),1)],1)],1),o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{label:"店铺选择","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-select",{attrs:{placeholder:"请选择店铺",allowClear:""},model:{value:t.formItem.shop_id,callback:function(e){t.$set(t.formItem,"shop_id",e)},expression:"formItem.shop_id"}},t._l(t.listData,(function(e,i){return o("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.shop_name))])})),1)],1)],1),o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{label:"分类选择","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-cascader",{attrs:{options:t.classTree,placeholder:"请选择分类",changeOnSelect:""},on:{change:t.changeClass},model:{value:t.gc_id,callback:function(e){t.gc_id=e},expression:"gc_id"}})],1)],1),o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{label:"关键词搜索","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-input",{attrs:{placeholder:"输入商品关键字",allowClear:""},model:{value:t.formItem.keyword,callback:function(e){t.$set(t.formItem,"keyword",e)},expression:"formItem.keyword"}})],1)],1),o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{label:"商品ID","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-input",{attrs:{placeholder:"输入商品ID",allowClear:""},model:{value:t.formItem.good_id,callback:function(e){t.$set(t.formItem,"good_id",e)},expression:"formItem.good_id"}})],1)],1),o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{label:"店铺ID","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-input",{attrs:{placeholder:"输入店铺ID",allowClear:""},model:{value:t.formItem.store_id,callback:function(e){t.$set(t.formItem,"store_id",e)},expression:"formItem.store_id"}})],1)],1),o("a-col",{attrs:{md:8,xs:24}},[o("a-form-item",{attrs:{"label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[o("a-button",{attrs:{type:"primary"},on:{click:t.sutmit}},[t._v("搜索")]),o("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.exportTable}},[t._v("导出")]),o("a-button",{staticClass:"ml10",on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1)],1)},S=[];o("9a33");function L(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function D(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?L(Object(o),!0).forEach((function(e){Object(n["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var $={labelCol:{xs:{span:24},md:{span:6}},wrapperCol:{xs:{span:24},md:{span:16}}},P={computed:D({},Object(x["c"])({listData:function(t){return t.shop.lists},gmlistData:function(t){return t.project.lists},classTree:function(t){return t.goods.classTree}})),props:{type:{type:String,default:"day"}},data:function(){return{formItemLayout:$,shopParams:{per_page:1e6,is_open:1},value:[],mode:["month","month"],formItem:{shop_id:void 0,gm_id:void 0,gc_id_1:"",gc_id_2:"",gc_id_3:"",keyword:"",store_id:"",good_id:""},gc_id:[]}},methods:D(D({},Object(x["b"])({fetchLists:"shop/fetchLists",gmfetchLists:"project/fetchLists",getClassTree:"goods/getClassTree"})),{},{resetSearch:function(){this.formItem.shop_id="",this.formItem.gc_id_1="",this.formItem.gc_id_2="",this.formItem.gc_id_3="",this.formItem.keyword="",this.formItem.store_id="",this.formItem.good_id="",this.formItem.gm_id="",this.gc_id=[]},changeClass:function(t){t.length>0?(this.formItem.gc_id_1=t[0],this.formItem.gc_id_2=t[1]||"",this.formItem.gc_id_3=t[2]||""):(this.formItem.gc_id=[],this.formItem.gc_id_1="",this.formItem.gc_id_2="",this.formItem.gc_id_3="")},mGetDate:function(t,e){var o=new Date(t,e,0);return o.getDate()},handleChange:function(t){this.value=t,this.formItem.settle_time_start="",this.formItem.settle_time_end=""},handlePanelChange2:function(t,e){this.value=t;var o=this.value[0].format("YYYY-MM"),i=this.value[1].format("YYYY-MM"),s=i.split("-"),a=this.mGetDate(s[0],s[1]);this.formItem.settle_time_start=o+"-01 00:00:00",this.formItem.settle_time_end=i+"-"+a+" 23:59:59",this.mode=["date"===e[0]?"month":e[0],"date"===e[1]?"month":e[1]]},timeChange:function(t,e){""!==e[0]?(this.formItem.settle_time_start=e[0]+" 00:00:00",this.formItem.settle_time_end=e[1]+" 23:59:59"):(this.formItem.settle_time_start="",this.formItem.settle_time_end="")},sutmit:function(){this.$emit("search",this.formItem)},exportTable:function(){this.$emit("export",this.formItem)}}),mounted:function(){this.fetchLists(this.shopParams),this.gmfetchLists(this.shopParams),this.getClassTree()}},E=P,z=(o("2cd7"),Object(_["a"])(E,j,S,!1,null,"66ce8db1",null)),G=z.exports;function B(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function T(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?B(Object(o),!0).forEach((function(e){Object(n["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var M=[{tab:"全部",key:0,goods_state:""},{tab:"已上架",key:1,goods_state:1},{tab:"已下架",key:2,goods_state:0},{tab:"已禁售",key:3,goods_state:10},{tab:"已删除",key:4,goods_state:20}],K={computed:T({},Object(x["c"])({listData:function(t){return t.goods.lists},listField:function(t){return t.goods.fields},pages:function(t){return t.goods.pages},exportData:function(t){return t.trade.exportData}})),components:{Button:O,search:G},data:function(){return{tabLists:M,keyword:"",goodsState:"",shop_id:"",gm_id:"",gc_id:"",gc_id_1:"",gc_id_2:"",store_id:"",good_id:"",current:1,state:0,selectList:[],selectedRowKeys:[]}},methods:T(T({},Object(x["b"])({fetchLists:"goods/fetchLists",updateGoodsState:"goods/updateGoodsState",delGoods:"goods/delGoods",exportFilter:"trade/exportGood"})),{},{getSearch:function(t){this.shop_id=t.shop_id,this.gm_id=t.gm_id,this.keyword=t.keyword,this.gc_id_3=t.gc_id_3,this.gc_id_1=t.gc_id_1,this.gc_id_2=t.gc_id_2,this.good_id=t.good_id,this.store_id=t.store_id,this.current=1,this.fetchLists({goods_state:this.goodsState,keyword:t.keyword,page:1,gm_id:t.gm_id,shop_id:t.shop_id,gc_id_1:t.gc_id_1,gc_id_2:t.gc_id_2,gc_id_3:t.gc_id_3,good_id:t.good_id,store_id:t.store_id})},exportTable:function(t){this.shop_id=t.shop_id,this.gm_id=t.gm_id,this.keyword=t.keyword,this.gc_id_3=t.gc_id_3,this.gc_id_1=t.gc_id_1,this.gc_id_2=t.gc_id_2,this.good_id=t.good_id,this.store_id=t.store_id,this.current=1;var e={goods_state:this.goodsState,keyword:t.keyword,gm_id:t.gm_id,shop_id:t.shop_id,gc_id_1:t.gc_id_1,gc_id_2:t.gc_id_2,gc_id_3:t.gc_id_3,good_id:t.good_id,store_id:t.store_id};this.exportFilter({exportForm:e,callback:this.excelBack})},excelBack:function(){var t=this;setTimeout((function(){var e="/statistics/downLoadList",o=t.$router.resolve({path:e});window.open(o.href,"_blank")}),1e3)},orderCallback:function(){this.exportPathMethodExcel(this.exportData)},exportPathMethodExcel:function(t){this.$success({title:"温馨提示！",content:"数据正在导出,请稍后查看下载目录！"}),console.log("11",t);var e=t.goods.tHeader,i=t.goods.filterVal,s=t.goods.list,a=this.formatJson(i,s);Promise.all([o.e("chunk-87d7ce5a"),o.e("chunk-d33b169a"),o.e("chunk-2d0c8d9c")]).then(o.bind(null,"4bf8")).then((function(t){t.export_json_to_excel({header:e,data:a,filename:"平台端商品列表",autoWidth:!0,bookType:"xlsx"})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},handleGoodsState:function(t){var e=this;if(0===this.selectList.length)return C["a"].showError("请选择商品"),null;this.$confirm({title:"提示",content:"您确定要这样做吗？",onOk:function(){e.updateGoodsState({params:{goods_ids:e.selectList,state:t}})},onCancel:function(){},class:"test"})},del:function(){if(0===this.selectList.length)return C["a"].showError("请选择商品"),null;this.delGoods({id:this.selectList})},onGetData:function(t){this.goodsState=this.tabLists[t].goods_state,t<5?this.fetchLists({goods_state:this.goodsState,page:1,gm_id:this.gm_id,shop_id:this.shop_id,gc_id_1:this.gc_id_1,gc_id_2:this.gc_id_2,gc_id_3:this.gc_id_3,good_id:this.good_id,store_id:this.store_id}):C["a"].showError("自营商品该功能完善中，请勿使用！")},pageChange:function(t){this.current=t,""==!this.keyword?this.fetchLists({goods_state:this.goodsState,page:t,keyword:this.keyword,gm_id:this.gm_id,shop_id:this.shop_id,gc_id_1:this.gc_id_1,gc_id_2:this.gc_id_2,gc_id_3:this.gc_id_3,good_id:this.good_id,store_id:this.store_id}):this.fetchLists({goods_state:this.goodsState,page:t,gm_id:this.gm_id,shop_id:this.shop_id,gc_id_1:this.gc_id_1,gc_id_2:this.gc_id_2,gc_id_3:this.gc_id_3,good_id:this.good_id,store_id:this.store_id})},onChange:function(t){this.selectList=t},initSelect:function(){this.selectedRowKeys=[];for(var t=this.listData,e=this.selectList,o=0;o<t.length;o++)-1!==e.indexOf(t[o].id)&&this.selectedRowKeys.push(o)}}),watch:{listData:function(){this.initSelect()},exportData:function(){this.orderCallback()}},mounted:function(){this.fetchLists({page:1})}},W=K,Y=(o("5a49"),Object(_["a"])(W,i,s,!1,null,"79e90807",null));e["default"]=Y.exports},"2cd7":function(t,e,o){"use strict";var i=o("5c68"),s=o.n(i);s.a},"5a49":function(t,e,o){"use strict";var i=o("629b"),s=o.n(i);s.a},"5c68":function(t,e,o){},"629b":function(t,e,o){},8225:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("i",{class:t.classes,style:t.styles,on:{click:t.handleClick}})},s=[],a=o("ce3c"),r=(o("163d"),"ivu-icon"),n={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes:function(){var t;return["".concat(r),(t={},Object(a["a"])(t,"".concat(r,"-").concat(this.type),""!==this.type),Object(a["a"])(t,"".concat(this.custom),""!==this.custom),t)]},styles:function(){var t={};return this.size&&(t["font-size"]="".concat(this.size,"px")),this.color&&(t.color=this.color),t}},methods:{handleClick:function(t){this.$emit("click",t)}}},c=n,l=o("9ca4"),d=Object(l["a"])(c,i,s,!1,null,null,null);e["a"]=d.exports},"93a0":function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var i=o("a593");const s=i["a"].prototype.$isServer;function a(t,e){for(let o=0;o<e.length;o++)if(t===e[o])return!0;return!1}!s&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)},"9a33":function(t,e,o){"use strict";var i=o("2fd4"),s=o("69b3"),a=o("f63e"),r=o("e754"),n=o("eafa"),c=o("7108"),l=o("8714"),d=o("238a"),u=Math.min,h=[].push,f="split",_="length",m="lastIndex",p=4294967295,g=!d((function(){RegExp(p,"y")}));o("0aed")("split",2,(function(t,e,o,d){var b;return b="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[_]||2!="ab"[f](/(?:ab)*/)[_]||4!="."[f](/(.?)(.?)/)[_]||"."[f](/()()/)[_]>1||""[f](/.?/)[_]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(s,t,e);var a,r,n,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=void 0===e?p:e>>>0,g=new RegExp(t.source,d+"g");while(a=l.call(g,s)){if(r=g[m],r>u&&(c.push(s.slice(u,a.index)),a[_]>1&&a.index<s[_]&&h.apply(c,a.slice(1)),n=a[0][_],u=r,c[_]>=f))break;g[m]===a.index&&g[m]++}return u===s[_]?!n&&g.test("")||c.push(""):c.push(s.slice(u)),c[_]>f?c.slice(0,f):c}:"0"[f](void 0,0)[_]?function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)}:o,[function(o,i){var s=t(this),a=void 0==o?void 0:o[e];return void 0!==a?a.call(o,s,i):b.call(String(s),o,i)},function(t,e){var i=d(b,t,this,e,b!==o);if(i.done)return i.value;var l=s(t),h=String(this),f=a(l,RegExp),_=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),v=new f(g?l:"^(?:"+l.source+")",m),y=void 0===e?p:e>>>0;if(0===y)return[];if(0===h.length)return null===c(v,h)?[h]:[];var w=0,I=0,k=[];while(I<h.length){v.lastIndex=g?I:0;var O,x=c(v,g?h:h.slice(I));if(null===x||(O=u(n(v.lastIndex+(g?0:I)),h.length))===w)I=r(h,I,_);else{if(k.push(h.slice(w,I)),k.length===y)return k;for(var C=1;C<=x.length-1;C++)if(k.push(x[C]),k.length===y)return k;I=w=O}}return k.push(h.slice(w)),k}]}))},c3a8:function(t,e,o){"use strict";var i=o("8225");e["a"]=i["a"]}}]);