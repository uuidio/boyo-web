(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53bcd765"],{1989:function(t,e,s){"use strict";var a=s("25ee"),i=s.n(a);i.a},"25ee":function(t,e,s){},4428:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"UploadBox"},[t._l(t.uploadImageList,(function(e,a){return s("div",{key:a,staticClass:"upload-image-list"},["finished"===e.status?[s("img",{attrs:{src:e.url}}),s("div",{staticClass:"upload-image-list-cover"},[s("a-icon",{attrs:{type:"eye"},nativeOn:{click:function(s){return t.handleView(e.url)}}}),s("a-icon",{attrs:{type:"delete"},nativeOn:{click:function(s){return t.handleRemove(e)}}})],1)]:[e.showProgress?s("a-progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)})),s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"60px"},attrs:{name:"image",headers:t.headers,"show-upload-list":!1,"default-file-list":t.defaultImageList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:t.isMultiple,type:"drag",action:t.uploadImageUrl}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("a-icon",{attrs:{type:"upload",size:"20"}})],1)]),s("AlbumPics",{attrs:{isMultiple:!0,maximum:t.surplusNum},on:{selectOk:t.selectPics}},[s("div",{staticClass:"ant-upload ant-upload-drag"},[s("a-icon",{attrs:{type:"camera",size:"20"}})],1)])],2),s("a-modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:t.imageUrl}}):t._e(),s("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},i=[],o=(s("6d57"),s("163d"),s("3830")),r=s("804d"),l=s("564b"),n=s("ca00"),c={name:"UploadImage",components:{AlbumPics:l["a"],Upload:o["a"]},props:{defaultImageList:Array,maximum:Number,shopId:Number},data:function(){return{headers:{Accept:"application/json",Authorization:"Bearer ".concat(Object(n["a"])())},uploadImageUrl:r["a"].baseURL+r["a"].action.upload_image,imageUrl:"",visible:!1,isMultiple:1!==this.maximum,uploadImageList:[],surplusNum:this.maximum-this.defaultImageList.length}},methods:{handleView:function(t){this.imageUrl=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1),this.uploadImageList=this.$refs.upload.fileList,this.surplusNum++},handleSuccess:function(t,e){console.log(JSON.stringify(t)),0===t.code?(e.url=t.result.pic_url,this.surplusNum--):this.$notification.warning({message:"Warning Notice",description:t.message})},handleFormatError:function(){this.$Notice.warning({message:"The file format is incorrect",description:"上传文件格式不正确"})},handleMaxSize:function(){this.$Notice.warning({message:"Exceeding file size limit",description:"上传文件过大."})},handleBeforeUpload:function(){var t=this.uploadImageList.length<this.maximum;return t||this.$notification.warning({message:"Notice",description:"最多只能上传".concat(this.maximum,"张图片, 请删除后再上传")}),t},selectPics:function(t){var e=this;t.forEach((function(t){var s={status:"finished",url:t.pic_url};e.uploadImageList.push(s),e.surplusNum--}))}},mounted:function(){this.uploadImageList=this.$refs.upload.fileList},watch:{defaultImageList:function(){this.uploadImageList=this.defaultImageList,this.surplusNum=this.surplusNum-this.uploadImageList.length}}},d=c,m=(s("4876"),s("9ca4")),u=Object(m["a"])(d,a,i,!1,null,"7fd14ca1",null);e["a"]=u.exports},4876:function(t,e,s){"use strict";var a=s("b907"),i=s.n(a);i.a},"8c7c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("a-form",{attrs:{model:t.formItem}},[s("a-form-item",{attrs:{label:"分类名称","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[s("a-input",{model:{value:t.formItem.gc_name,callback:function(e){t.$set(t.formItem,"gc_name",e)},expression:"formItem.gc_name"}})],1),s("a-form-item",{attrs:{label:"分类父ID","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[s("a-select",{attrs:{defaultValue:"0"},model:{value:t.formItem.parent_id,callback:function(e){t.$set(t.formItem,"parent_id",e)},expression:"formItem.parent_id"}},[s("a-select-option",{staticClass:"option-first",attrs:{value:0}},[t._v("顶级分类")]),t._l(t.goodsClass,(function(e){return e.level<3?s("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.gc_name)+"\n        ")]):t._e()}))],2)],1),s("a-form-item",{attrs:{label:"分类图标","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[s("UploadImage",{ref:"uploadImage",attrs:{defaultImageList:t.imageList,shopId:0,maximum:1}}),s("p",[t._v("*请上传200*200的图片")])],1),s("a-form-item",{attrs:{label:"类型关联","label-col":{md:4,xs:24},"wrapper-col":{md:16,xs:24}}},[s("a-radio-group",{staticClass:"myGroup mt10",attrs:{name:"radioGroup",defaultValue:0},model:{value:t.formItem.type_id,callback:function(e){t.$set(t.formItem,"type_id",e)},expression:"formItem.type_id"}},[s("a-radio",{staticStyle:{display:"block"},attrs:{value:0}},[t._v("不关联")]),t._l(t.goodsType,(function(e,a){return s("a-radio",{key:a,attrs:{value:e.id}},[t._v(t._s(e.type_name))])}))],2),s("div",[t._v("\n        是否关联到子分类\n        "),s("a-switch",{model:{value:t.goodsTypeCheck,callback:function(e){t.goodsTypeCheck=e},expression:"goodsTypeCheck"}})],1)],1),s("a-form-item",{attrs:{label:"是否隐藏","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[s("a-radio-group",{attrs:{name:"radioGroup",defaultValue:0},model:{value:t.formItem.is_show,callback:function(e){t.$set(t.formItem,"is_show",e)},expression:"formItem.is_show"}},[s("a-radio",{attrs:{value:0}},[t._v("显示")]),s("a-radio",{attrs:{value:1}},[t._v("隐藏")])],1)],1),s("a-form-item",{attrs:{label:"分类排序","label-col":{md:4,xs:24},"wrapper-col":{md:6,xs:24}}},[s("a-input",{attrs:{placeholder:"分类排序"},model:{value:t.formItem.listorder,callback:function(e){t.$set(t.formItem,"listorder",e)},expression:"formItem.listorder"}})],1),s("a-form-item",{attrs:{"wrapper-col":{offset:4,md:12,xs:24}}},[s("a-button",{attrs:{type:"primary"},on:{click:t.submitClass}},[t._v("提交")]),s("a-button",{staticClass:"ml10",attrs:{type:"danger"},on:{click:function(e){return t.$router.back(-1)}}},[t._v("返回")])],1)],1)],1)},i=[],o=(s("5ab2"),s("6d57"),s("e10e"),s("163d"),s("ce3c")),r=s("9f3a"),l=s("4428");function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"add",computed:c({},Object(r["c"])({goodsClass:function(t){return t.classify.lists},detail:function(t){return t.classify.detail},goodsType:function(t){return t.classify.goodsType}})),components:{UploadImage:l["a"]},methods:c(c({},Object(r["b"])({fetchLists:"classify/fetchLists",addGoodsClass:"classify/addGoodsClass",getDetail:"classify/getDetail",editClass:"classify/editClass",getGoodsType:"classify/getGoodsType"})),{},{submitClass:function(){if(0===this.formItem.type_id)this.formItem.type_name=0,this.formItem.associated=0;else{this.formItem.associated=Number(this.goodsTypeCheck);for(var t=0;t<this.goodsType.length;t++)this.goodsType[t].id===this.formItem.type_id&&(this.formItem.type_name=this.goodsType[t].type_name)}console.log(this.formItem);var e=this.$refs.uploadImage.uploadImageList;if(1===e.length&&(this.formItem.class_icon=e[0].url),0===this.id)this.addGoodsClass({formItem:this.formItem});else{var s=Object.assign(this.formItem,{id:this.id});this.editClass({postData:s})}},initDetail:function(){null!==this.detail.class_icon&&(this.imageList=[{url:this.detail.class_icon,status:"finished"}]),this.formItem={gc_name:this.detail.gc_name,parent_id:this.detail.parent_id,class_icon:this.detail.class_icon,listorder:this.detail.listorder,is_show:this.detail.is_show,associated:this.detail.associated,type_id:this.detail.type_id,type_name:this.detail.type_name}}}),data:function(){return{id:0,goodsTypeCheck:!1,imageList:[],formItem:{gc_name:"",parent_id:0,class_icon:"",listorder:0,is_show:0,associated:0,type_name:"",type_id:0}}},mounted:function(){this.fetchLists(),void 0!==this.$route.params.id?(this.id=this.$route.params.id,this.getDetail({id:this.id})):this.getGoodsType()},watch:{detail:function(){this.initDetail()}}},m=d,u=(s("1989"),s("9ca4")),p=Object(u["a"])(m,a,i,!1,null,"e6229f90",null);e["default"]=p.exports},b907:function(t,e,s){}}]);