(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4a6e15c","chunk-2d0c8d9c","chunk-2d0c8d9c"],{"08d1":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("div",{staticClass:"setTable"},[e._l(e.alertConfig,(function(t,i){return s("div",{key:i,staticClass:"item"},[s("a-row",[s("a-col",{attrs:{span:12}},[e._v(e._s(t.name))]),s("a-col",{attrs:{span:12}},["switch"===t.type?[s("a-switch",{attrs:{checked:1==t.value},on:{change:function(t){return e.changeSw(i)}}})]:"number"===t.type?[s("a-input-number",{attrs:{size:"large",min:1,max:100,defaultValue:t.value},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})]:"url"===t.type?[s("a-button",{on:{click:e.ediImg}},[e._v("编辑")])]:e._e()],2)],1)],1)})),s("a-button",{attrs:{type:"primary",size:"large"},on:{click:e.subConfig}},[e._v("确定")])],2),s("single-item",{attrs:{visible:e.visible,defaultImage:e.defaultImg,show_type:e.selectConfig.show_type,selectList:e.selectConfig.list,selectId:e.selectConfig.id},on:{ok:e.ok,cancel:e.cancel,cgSelect:e.changeSelect}})],1)},n=[],a=(s("5ab2"),s("6d57"),s("e10e"),s("ce3c")),o=s("9f3a"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content single-item"},[s("a-modal",{attrs:{visible:e.visible},on:{ok:e.handleOk,cancel:e.handCancel}},[s("a-form-item",{attrs:{label:"图片"}},[s("UploadImage",{ref:"uploadImage",attrs:{defaultImageList:e.defaultImage,maximum:e.max}})],1),s("a-form-item",{attrs:{label:"数据类型"}},[s("a-select",{staticStyle:{width:"190px"},attrs:{value:e.show_type},on:{change:e.changeSelect}},e._l(e.selectList,(function(t,i){return s("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n          "+e._s(t.name)+"\n        ")])})),1)],1),"goods"===e.show_type||"shop"===e.show_type||"class"===e.show_type?s("a-form-item",{attrs:{label:"展示数据"}},["goods"===e.show_type?s("div",[e._v("\n        已选择商品ID："+e._s(e.selectResult.id)+"\n        "),s("TableSelect",{attrs:{selectionRef:"radio",showType:"goods",selectionUrl:e.selectionGoodsUrl},on:{"on-select-ok":e.selected}},[e._v("\n          选择商品\n        ")])],1):e._e(),"shop"===e.show_type?s("div",[e._v("\n        已选择店铺ID："+e._s(e.selectResult.id||this.selectId)+"\n        "),s("TableSelect",{attrs:{shopId:Number(e.selectResult.id),selectionRef:"radio",showType:"shop",selectionUrl:e.selectionShopUrl},on:{"on-select-ok":e.selected}},[e._v("\n          选择店铺\n        ")])],1):e._e(),"class"===e.show_type?s("div",[e._v("\n        已选择分类ID："+e._s(e.selectResult.id||this.selectId)+"\n        "),s("div",[s("a-cascader",{attrs:{options:e.classTree,placeholder:"请选择分类"},on:{change:e.classChange}})],1)]):e._e()]):e._e()],1)],1)},r=[],c=(s("163d"),s("4428")),u=s("41fd"),h=(s("5ee4"),s("804d"));function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f,g={props:{visible:{type:Boolean,default:!1},max:{type:Number,default:1},defaultImage:{type:Array},selectObj:{type:Object},show_type:{type:String},selectList:{type:Array},selectId:{type:[String,Number],default:""}},computed:p({},Object(o["c"])({classTree:function(e){return e.config.classTree}})),components:{UploadImage:c["a"],TableSelect:u["a"]},data:function(){return{selectionGoodsUrl:h["a"].action.goods_lists,selectionShopUrl:h["a"].action.shop_lists,selectResult:{image_url:"",show_type:"",id:"",shop_type:""},inId:""}},mounted:function(){this.getClassTree()},methods:p(p({},Object(o["b"])({getClassTree:"config/getClassTree"})),{},{classChange:function(e){3===e.length&&(this.selectResult.id=e[2])},handleOk:function(){this.selectResult.image_url=this.$refs.uploadImage.uploadImageList[0].url,this.selectResult.show_type=this.selectResult.show_type||this.show_type,"shop"===this.selectResult.show_type||"goods"===this.selectResult.show_type||"class"===this.selectResult.show_type?this.selectResult.id=this.selectResult.id||this.selectId:this.selectResult.id="","shop"!==this.selectResult.show_type&&(this.selectResult.shop_type=""),console.log(this.selectResult),this.$emit("ok",this.selectResult)},handCancel:function(){this.$emit("cancel")},changeSelect:function(e){this.selectResult.show_type=e,this.$emit("cgSelect",e)},selected:function(e){this.selectResult.id=e[0].id,"shop"==this.selectResult.show_type||"shop"==this.show_type?this.selectResult.shop_type=e[0].shop_type:this.selectResult.shop_type=""}})},m=g,y=s("9ca4"),b=Object(y["a"])(m,l,r,!1,null,"50d6553c",null),v=b.exports;function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var O=(f={computed:{},components:{singleItem:v},data:function(){return{visible:!1,temp:!1,nowConfig:{},defaultImg:[{uid:"-1",name:"xxx.png",status:"done"}],selectConfig:{id:"",show_type:"goods",list:[{value:"goods",name:"商品"},{value:"shop",name:"店铺"},{value:"class",name:"分类"},{value:"seckill",name:"秒杀活动页面"},{value:"integral",name:"积分商城页面"},{value:"couponList",name:"领券中心页面"},{value:"group",name:"拼团购页面"},{value:"customActivity",name:"自定义活动"}]},new:{}}}},Object(a["a"])(f,"computed",_({},Object(o["c"])({alertConfig:function(e){return e.config.alertConfig}}))),Object(a["a"])(f,"mounted",(function(){this.getAlert({params:{page:"index",group:"pop"}})})),Object(a["a"])(f,"methods",_(_({},Object(o["b"])({getAlert:"config/getConfig",setAlert:"config/setConfig"})),{},{changeSw:function(e){var t=this.alertConfig[e];t.value=t.value>0?0:1,console.log(e)},ediImg:function(){if(!this.temp){var e=this.alertConfig[this.alertConfig.length-1].value;e.image_url&&(this.defaultImg[0].url=e.image_url,this.selectConfig.id=e.id,this.selectConfig.show_type=e.show_type,this.temp=!0)}this.visible=!0},ok:function(e){this.alertConfig[2].value=e,this.visible=!1},cancel:function(e){this.visible=!1},handleCarousel:function(e){this.visible=!1},changeSelect:function(e){this.selectConfig.show_type=e,console.log(this.selectConfig.show_type)},subConfig:function(){console.log(this.alertConfig[2]),this.setAlert({page:"index",group:"pop",value:this.alertConfig})}})),Object(a["a"])(f,"watch",{}),f),I=O,S=(s("e621"),Object(y["a"])(I,i,n,!1,null,"059b2762",null));t["default"]=S.exports},"2bb8":function(e,t,s){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,s,l){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"===typeof e?a(o(e),(function(o){var l=encodeURIComponent(i(o))+s;return n(e[o])?a(e[o],(function(e){return l+encodeURIComponent(i(e))})).join(t):l+encodeURIComponent(i(e[o]))})).join(t):l?encodeURIComponent(i(l))+s+encodeURIComponent(i(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var s=[],i=0;i<e.length;i++)s.push(t(e[i],i));return s}var o=Object.keys||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t}},"41fd":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-button",{attrs:{icon:"search",size:"small"},on:{click:function(t){e.selectTableModal=!0}}},[e._v("\n      点击选择\n    ")]),s("a-modal",{attrs:{destroyOnClose:"",title:"请点击选择列表数据",width:"80%",visible:e.selectTableModal},on:{ok:e.selectOk,cancel:e.handleCancel}},[s("a-select",{staticStyle:{width:"130px"},attrs:{defaultValue:"全部"},on:{change:e.handleSelectChange}},[s("a-select-option",{attrs:{value:"全部"}},[e._v("全部")]),e._l(e.shopList,(function(t,i){return s("a-select-option",{attrs:{value:t.id}},[e._v("\n          "+e._s(t.shop_name)+"\n        ")])}))],2),s("a-input-search",{staticClass:"mb10",staticStyle:{width:"18rem"},attrs:{enterButton:"",placeholder:"请输入名称或名称关键字搜索"},on:{search:e.shopSearch}}),e.listField&&e.listField.length>0?[s("a-table",{attrs:{scroll:{x:1100,y:700},rowKey:function(e){return e.id},columns:e.listField,dataSource:e.listData,pagination:!1,rowSelection:{selectedRowKeys:e.selectedRowKeys,type:e.selectionRef,onChange:e.selectRows}},scopedSlots:e._u([{key:"image_url",fn:function(e){return s("img",{attrs:{src:e,alt:"",height:"50"}})}}],null,!1,2738063263)}),s("div",{staticClass:"pageBox"},[s("a-pagination",{attrs:{total:e.pages.total,showTotal:function(e){return"共 "+e+" 条数据"},pageSize:e.pages.per_page,defaultCurrent:e.listPage.current},on:{change:e.pageChange}})],1)]:e._e(),"selection"===e.selectionRef?s("div",[s("Button",{on:{click:function(t){return e.handleSelectAll(!0)}}},[e._v("全选")]),s("Button",{on:{click:function(t){return e.handleSelectAll(!1)}}},[e._v("取消全选")])],1):e._e()],2)],1)},n=[],a=(s("6d57"),s("5748")),o=(s("e204"),s("163d"),s("c968")),l=s("7886"),r=s("e1d2"),c={name:"TableSelect",props:{selectionRef:String,selectionUrl:String,showType:String,goodId:Array,shopId:Number,shopList:Array},data:function(){return{selectTableModal:!1,highlightRow:!1,selectedRowKeys:[],listField:[],listData:[],pages:{},ids:[],shopType:"",listPage:{total:l["a"].default_page_total,current:1,page_size:l["a"].default_page_count},selectData:[],all:{page:[],list:[],def:[]},newSelectionUrl:"",selectRowId:0,selectShopId:null}},methods:{pageChange:function(e){this.getLists(e),this.listPage.current=e},shopSearch:function(e){this.getLists(1,e)},getLists:function(e,t){var s=this,i={page:e,keyword:t,shop_state:1,goods_state:1};this.selectShopId&&(i.shop_id=this.selectShopId),r["a"].get(this.newSelectionUrl,{params:i}).then((function(i){0===i.data.code?(s.listField=i.data.result.field,s.pages=i.data.result.lists,s.listField[2].scopedSlots={customRender:"image_url"},s.listData=i.data.result.lists.data,(-1===s.all.page.indexOf(e)||t||s.selectShopId)&&(s.all.page.push(e),i.data.result.lists.data.map((function(e){var t=s.all.def.findIndex((function(t){return e.id===t.id}));-1===t&&s.all.list.push(e)})))):o["a"].showError(i.data.code)})).catch((function(e){o["a"].showError(e)}))},handleSelectAll:function(e){this.$refs.selection.selectAll(e)},selectRow:function(e){this.selectRowId=e.id,this.selectData=e},selectRows:function(e,t){if("radio"===this.selectionRef)this.selectedRowKeys=e,this.selectData=t,t!==[]&&(this.ids[0]=t[0].id),"shop"===this.showType&&(this.shopType=t[0].shop_type);else{if(e.length>20)return void o["a"].showError("最多只能选取20个商品");this.selectedRowKeys.length=0,this.selectedRowKeys=Object(a["a"])(e)}},selectOk:function(){var e=this;if("shop"===this.showType){var t={shop_type:this.shopType,data:this.selectData};this.$emit("on-select-ok",t)}else{var s=function(e){for(var t=[],s={},i=0;i<e.length;i++)s[e[i].id]||(t.push(e[i]),s[e[i].id]=!0);return t},i=s(this.all.list);this.selectedRowKeys.map((function(t){i.map((function(s){s.id===t&&e.selectData.push(s)}))})),this.$emit("on-select-ok",this.selectData),this.listPage.current=1,this.getLists(1)}this.ids=[],this.selectData=[],this.selectTableModal=!1},handleCancel:function(){this.getLists(1),this.listPage.current=1,this.ids=[],this.selectData=[],this.selectTableModal=!1},initSelect:function(){for(var e=this.listData,t=this.ids,s=0;s<e.length;s++)-1!==t.indexOf(e[s].id)&&this.selectedRowKeys.push(s)},handleSelectChange:function(e){this.selectShopId=Number(e)}},mounted:function(){var e=this;if("checkbox"===this.selectionRef){this.selectedRowKeys=[];var t=[];""!==this.goodId&&this.goodId.forEach((function(s,i){t.push(Number(s.id)),e.all.def.push(s),e.all.list.push(s)})),this.selectedRowKeys=t}else if(this.shopId){var s=[this.shopId];this.selectedRowKeys=s}this.newSelectionUrl=this.selectionUrl,this.getLists(1)},watch:{selectionUrl:function(e){this.newSelectionUrl=e,this.getLists(1)},listData:function(){this.initSelect()}}},u=c,h=s("9ca4"),d=Object(h["a"])(u,i,n,!1,null,"47934c56",null);t["a"]=d.exports},4428:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"UploadBox"},[e._l(e.uploadImageList,(function(t,i){return s("div",{key:i,staticClass:"upload-image-list"},["finished"===t.status?[s("img",{attrs:{src:t.url}}),s("div",{staticClass:"upload-image-list-cover"},[s("a-icon",{attrs:{type:"eye"},nativeOn:{click:function(s){return e.handleView(t.url)}}}),s("a-icon",{attrs:{type:"delete"},nativeOn:{click:function(s){return e.handleRemove(t)}}})],1)]:[t.showProgress?s("a-progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)})),s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"60px"},attrs:{name:"image",headers:e.headers,"show-upload-list":!1,"default-file-list":e.defaultImageList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:e.isMultiple,type:"drag",action:e.uploadImageUrl}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("a-icon",{attrs:{type:"upload",size:"20"}})],1)]),s("AlbumPics",{attrs:{isMultiple:!0,maximum:e.surplusNum},on:{selectOk:e.selectPics}},[s("div",{staticClass:"ant-upload ant-upload-drag"},[s("a-icon",{attrs:{type:"camera",size:"20"}})],1)])],2),s("a-modal",{attrs:{title:"查看图片"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:e.imageUrl}}):e._e(),s("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},n=[],a=(s("6d57"),s("163d"),s("3830")),o=s("804d"),l=s("564b"),r=s("ca00"),c={name:"UploadImage",components:{AlbumPics:l["a"],Upload:a["a"]},props:{defaultImageList:Array,maximum:Number,shopId:Number},data:function(){return{headers:{Accept:"application/json",Authorization:"Bearer ".concat(Object(r["a"])())},uploadImageUrl:o["a"].baseURL+o["a"].action.upload_image,imageUrl:"",visible:!1,isMultiple:1!==this.maximum,uploadImageList:[],surplusNum:this.maximum-this.defaultImageList.length}},methods:{handleView:function(e){this.imageUrl=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1),this.uploadImageList=this.$refs.upload.fileList,this.surplusNum++},handleSuccess:function(e,t){console.log(JSON.stringify(e)),0===e.code?(t.url=e.result.pic_url,this.surplusNum--):this.$notification.warning({message:"Warning Notice",description:e.message})},handleFormatError:function(){this.$Notice.warning({message:"The file format is incorrect",description:"上传文件格式不正确"})},handleMaxSize:function(){this.$Notice.warning({message:"Exceeding file size limit",description:"上传文件过大."})},handleBeforeUpload:function(){var e=this.uploadImageList.length<this.maximum;return e||this.$notification.warning({message:"Notice",description:"最多只能上传".concat(this.maximum,"张图片, 请删除后再上传")}),e},selectPics:function(e){var t=this;e.forEach((function(e){var s={status:"finished",url:e.pic_url};t.uploadImageList.push(s),t.surplusNum--}))}},mounted:function(){this.uploadImageList=this.$refs.upload.fileList},watch:{defaultImageList:function(){this.uploadImageList=this.defaultImageList,this.surplusNum=this.surplusNum-this.uploadImageList.length}}},u=c,h=(s("4876"),s("9ca4")),d=Object(h["a"])(u,i,n,!1,null,"7fd14ca1",null);t["a"]=d.exports},4876:function(e,t,s){"use strict";var i=s("b907"),n=s.n(i);n.a},5748:function(e,t,s){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function n(e){if(Array.isArray(e))return i(e)}function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){return n(e)||a(e)||o(e)||l()}s.d(t,"a",(function(){return r}))},"5a57":function(e,t,s){},"5ee4":function(e,t,s){"use strict";t.decode=t.parse=s("a2d3"),t.encode=t.stringify=s("2bb8")},a2d3:function(e,t,s){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,s,a){t=t||"&",s=s||"=";var o={};if("string"!==typeof e||0===e.length)return o;var l=/\+/g;e=e.split(t);var r=1e3;a&&"number"===typeof a.maxKeys&&(r=a.maxKeys);var c=e.length;r>0&&c>r&&(c=r);for(var u=0;u<c;++u){var h,d,p,f,g=e[u].replace(l,"%20"),m=g.indexOf(s);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),i(o,p)?n(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},b907:function(e,t,s){},e204:function(e,t,s){"use strict";var i=s("e46b"),n=s("013f")(6),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s("0e8b")(a)},e621:function(e,t,s){"use strict";var i=s("5a57"),n=s.n(i);n.a}}]);