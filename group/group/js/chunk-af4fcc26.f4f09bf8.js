(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af4fcc26"],{3778:function(t,e,a){},"4c98":function(t,e,a){"use strict";var o=a("3778"),s=a.n(o);s.a},dfe40:function(t,e,a){"use strict";a.r(e);var o,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"mb20"},[a("div",{staticClass:"list-nav"},[a("div",[a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:t.exportTable}},[t._v("导出")]),a("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:t.filterAlert}},[t._v("筛选")]),a("a-button",{attrs:{type:"primary",disabled:0==t.selectedRowKeys.length},on:{click:t.getAllDelete}},[t._v("\n\t\t\t批量删除\n\t\t")])],1)])]),t.listField&&t.listField.length>0?[a("a-table",{attrs:{scroll:{x:1600,y:700},columns:t.listField,dataSource:t.listsData,pagination:!1,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function(e,o){return a("div",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.goDelete(o)}}},[t._v("删除")])])}}],null,!1,878967385)}),0!==t.listsData.length?a("div",{staticClass:"pageBox"},[a("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:t.pages.per_page},on:{change:t.pageChange},model:{value:t.currentPages,callback:function(e){t.currentPages=e},expression:"currentPages"}})],1):t._e()]:t._e(),a("a-modal",{attrs:{title:t.title},on:{ok:t.filterOk,cancel:t.filterCancel},model:{value:t.exportModel,callback:function(e){t.exportModel=e},expression:"exportModel"}},[a("a-form-item",{attrs:{label:"异常原因:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择异常原因"},model:{value:t.exportForm.abnormal_reason_text,callback:function(e){t.$set(t.exportForm,"abnormal_reason_text",e)},expression:"exportForm.abnormal_reason_text"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("重复")]),a("a-select-option",{attrs:{value:"2"}},[t._v("数据为空")]),a("a-select-option",{attrs:{value:"3"}},[t._v("数据不匹配")]),a("a-select-option",{attrs:{value:"4"}},[t._v("无交易订单")]),a("a-select-option",{attrs:{value:"5"}},[t._v("金额不匹配")])],1)],1)],1)],2)},i=[],r=(a("5ab2"),a("6d57"),a("e10e"),a("cc57"),a("ce3c")),n=a("9f3a");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={computed:c({},Object(n["c"])({listsData:function(t){return t.online.abnormalData},pages:function(t){return t.online.abnormalPages},listField:function(t){return t.online.abnormalFields},exportData:function(t){return t.online.exportData},shoplist:function(t){return t.shop.lists},gmlistData:function(t){return t.project.lists}})),data:function(){return{getData:{page:1},searchObj:{select:"name",param:{},value:""},exportForm:{status:"-1",page:"1"},currentParam:{},filterParams:{},exportModel:!1,isFillter:!1,currentAct:"-1",currentPages:1,title:"",timeVisible:!0,shopParams:{per_page:1e6,is_open:1},selectedRowKeys:[]}},methods:c(c({},Object(n["b"])({fetchLists:"online/abnormalLists",abnormalDelete:"online/abnormalDelete",exportFilter:"online/exportWechatAbnormal",fetchShopLists:"shop/fetchLists",gmfetchLists:"project/fetchLists"})),{},(o={handleChange:function(t){"uploading"!==t.file.status&&console.log(t.file,t.fileList),"done"===t.file.status?this.$message.success("".concat(t.file.name," file uploaded successfully")):"error"===t.file.status&&this.$message.error("".concat(t.file.name," file upload failed."))},pageChange:function(t){var e=this.isFillter?this.filterParams:this.currentParam;e.status=e.status>=0?e.status:"",e.page=t,this.fetchLists(e)},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},onSelectChange:function(t){console.log("selectedRowKeys changed: ",t),this.selectedRowKeys=t},goDelete:function(t){var e=[];e.push(t.id);var a={id:e};confirm("确认删除此数据？")&&this.abnormalDelete(a)},getAllDelete:function(){var t={id:this.selectedRowKeys};this.abnormalDelete(t)},exportTable:function(){var t=this;this.exportModel=!0,this.type="export",this.title="导入异常订单列表导出",this.timeVisible=!1,this.$nextTick((function(){t.timeVisible=!0}))},dataHandleOk:function(){0==Object.keys(this.exportForm).length?this.$warning({title:"温馨提示！",content:"需选择导出条件才可导出数据"}):(this.exportLoading=!0,this.exportFilter({exportForm:this.exportForm}))},orderCallback:function(){this.exportLoading=!1,this.dataVisible=!1,this.exportPathMethod(this.exportData),this.exportForm={},this.timeItem={},this.timeHide=!1}},Object(r["a"])(o,"formatJson",(function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))})),Object(r["a"])(o,"exportPathMethod",(function(t){this.$success({title:"温馨提示！",content:"数据正在导出,请稍后查看下载目录！"});var e=t.goods.tHeader,o=t.goods.filterVal,s=t.goods.list,i=this.formatJson(o,s);Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-d33b169a"),a.e("chunk-2d0c8d9c")]).then(a.bind(null,"4bf8")).then((function(t){t.export_json_to_excel({header:e,data:i,filename:"平台端导入异常订单列表",autoWidth:!0,bookType:"xlsx"})}))})),Object(r["a"])(o,"tabClick",(function(t){console.log(t),this.exportForm.status=t,this.currentAct=t,this.currentParam={},this.currentParam.status=t,this.isFillter=!1,this.searchObj.value="",this.fetchLists({page:1,status:t>=0?t:""}),this.currentPages=1})),Object(r["a"])(o,"filterAlert",(function(){var t=this;this.exportModel=!0,this.type="search",this.title="导入异常列表筛选",this.exportForm={},this.timeVisible=!1,this.$nextTick((function(){t.timeVisible=!0}))})),Object(r["a"])(o,"filterOk",(function(){this.isFillter=!0,this.filterParams=Object.assign({},this.exportForm),this.exportModel=!1,"search"==this.type?this.fetchLists(this.filterParams):this.dataHandleOk(),this.searchObj.value="",this.exportForm={page:1,status:this.currentAct,shop_id:"",gm_id:""},console.log(this.filterParams)})),Object(r["a"])(o,"filterCancel",(function(){this.exportForm.created_start="",this.exportForm.created_end=""})),Object(r["a"])(o,"timeChange",(function(t,e){console.log("Selected Time: ",t),console.log("Formatted Selected Time: ",e),this.exportForm.created_start=e[0],this.exportForm.created_end=e[1]})),Object(r["a"])(o,"timeOk",(function(t){console.log("onOk: ",t)})),o)),mounted:function(){this.fetchLists({page:1})},watch:{exportData:function(){this.orderCallback()}}},h=u,p=(a("4c98"),a("9ca4")),f=Object(p["a"])(h,s,i,!1,null,"7ead393c",null);e["default"]=f.exports}}]);