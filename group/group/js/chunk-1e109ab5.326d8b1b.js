(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e109ab5"],{"023a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("a-form",{staticClass:"mb10 mt10",attrs:{layout:"inline"}},[a("a-row",[a("a-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{md:24,xs:24}},[a("a-input-search",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入手机号搜素",enterButton:""},on:{search:e.submitSearch},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}})],1)],1)],1),e.listField&&e.listField.length>0?a("div",[a("a-table",{attrs:{rowKey:function(e){return e.id},columns:e.listField,dataSource:e.listData,pagination:!1},scopedSlots:e._u([{key:"child_num",fn:function(t,i){return a("div",{},[a("a-button",{on:{click:function(t){return e.showTable(i)}}},[e._v("\n            "+e._s(i.child_num)+"\n          ")])],1)}},{key:"num2",fn:function(t,i){return a("div",{},[a("a-button",{on:{click:function(t){return e.showNum2Table(i)}}},[e._v("\n            "+e._s(i.goods_spread)+"\n          ")])],1)}},{key:"action",fn:function(t,i){return a("div",{},[a("div",[a("a-button",{on:{click:function(t){return e.showMemberDetail(i)}}},[e._v("查看收益明细")])],1),3!==i.partner_role?a("div",{staticClass:"mt10"},[1==i.is_promoter?a("div",[a("a-popconfirm",{attrs:{title:"确定冻结"+i.mobile+"的推广员？",okText:"确认",cancelText:"取消"},on:{confirm:function(t){return e.setStatusType(i,1,1)}}},[a("a-button",{attrs:{type:"danger"}},[e._v("冻结推广员")])],1)],1):4==i.is_promoter?a("div",[a("a-popconfirm",{attrs:{title:"确定解除对"+i.mobile+"的推广员冻结？",okText:"确认",cancelText:"取消"},on:{confirm:function(t){return e.setStatusType(i,1,2)}}},[a("a-button",{attrs:{type:"dashed"}},[e._v("解冻推广员")])],1)],1):e._e()]):e._e()])}}],null,!1,1588258843)}),e.pages&&e.pages.current_page?a("div",{staticClass:"pageBox"},[a("a-pagination",{attrs:{total:e.pages.total,showTotal:function(e){return"共 "+e+" 条数据"},pageSize:e.pages.per_page,defaultCurrent:1},on:{change:e.pageChange}})],1):e._e()],1):e._e(),a("a-modal",{attrs:{title:+e.showMember+"会员收益明细",visible:e.memberVisible,footer:null,width:"80%"},on:{cancel:e.cancel}},[a("div",{staticClass:"mb10"},[a("span",{staticClass:"mr10"},[e._v("实际收益：￥"+e._s(e.userData.income))]),a("span",[e._v("预估收益：￥"+e._s(e.userData.estimated_count))])]),a("a-tabs",{on:{change:e.memberDetailChange},model:{value:e.tabKey,callback:function(t){e.tabKey=t},expression:"tabKey"}},[a("a-tab-pane",{key:1,attrs:{tab:"会员收入"}}),a("a-tab-pane",{key:2,attrs:{tab:"会员预估收益"}})],1),a("a-table",{attrs:{columns:e.Logfields,dataSource:e.Loglists,pagination:!1},scopedSlots:e._u([{key:"user_img",fn:function(t,i){return 2===e.tabKey?a("div",{},[a("img",{attrs:{width:"70px",src:i.wx_info.headimgurl,alt:""}})]):e._e()}}],null,!0)}),a("div",{staticClass:"pageBox"},[a("a-pagination",{attrs:{total:e.Logpages.total,showTotal:function(e){return"共 "+e+" 条数据"},pageSize:e.Logpages.per_page},on:{change:e.LogpagesChange},model:{value:e.showDetail.page,callback:function(t){e.$set(e.showDetail,"page",t)},expression:"showDetail.page"}})],1)],1),a("a-modal",{attrs:{title:e.tabTitle,width:"70%",footer:null},model:{value:e.tabVisible,callback:function(t){e.tabVisible=t},expression:"tabVisible"}},[a("a-table",{attrs:{columns:e.DetailFields,dataSource:e.DetailDataLists,pagination:!1}}),a("div",{staticClass:"pageBox"},[a("a-pagination",{attrs:{total:e.DetailPages.total,showTotal:function(e){return"共 "+e+" 条数据"},pageSize:e.DetailPages.per_page,defaultCurrent:1},on:{change:e.detailPageChange}})],1)],1),a("a-modal",{attrs:{title:e.tabTitle,width:"70%",footer:null},model:{value:e.num2,callback:function(t){e.num2=t},expression:"num2"}},[a("a-table",{attrs:{columns:e.Num2fields,dataSource:e.Num2lists,pagination:!1},scopedSlots:e._u([{key:"headimgurl",fn:function(e,t){return a("div",{},[a("img",{attrs:{width:"70px",src:t.wx_info.headimgurl,alt:""}})])}},{key:"goods_infos",fn:function(t,i){return a("div",{},[e._v("\n          "+e._s(i.goods_infos)+"\n        ")])}}])}),a("div",{staticClass:"pageBox"},[a("a-pagination",{attrs:{total:e.Num2pages.total,showTotal:function(e){return"共 "+e+" 条数据"},pageSize:e.Num2pages.per_page},on:{change:e.Num2PageChange},model:{value:e.num2Item.page,callback:function(t){e.$set(e.num2Item,"page",t)},expression:"num2Item.page"}})],1)],1),a("a-modal",{attrs:{title:"设置"+e.setItem.mobile+"为推广员"},on:{cancel:e.cancelSetPro,ok:e.SetProOk},model:{value:e.setPro,callback:function(t){e.setPro=t},expression:"setPro"}},[e._v("\n      确认设置该会员为推广员\n    ")])],1)},s=[],n=(a("5ab2"),a("e10e"),a("6d57"),a("ce3c")),r=a("9f3a"),o=a("c968"),l=a("804d");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={labelCol:{xs:{span:24},md:{span:5}},wrapperCol:{xs:{span:24},md:{span:19}},buttonCol:{xs:{span:24},md:{offset:5,span:19}}},h={inject:["reload"],name:"lists",computed:u({},Object(r["c"])({listData:function(e){return e.generalize.promoterList},listField:function(e){return e.generalize.promoterListFields},pages:function(e){return e.generalize.promoterListPages},Loglists:function(e){return e.generalize.Loglists1},Logfields:function(e){return e.generalize.Logfields1},Logpages:function(e){return e.generalize.Logpages1},Num2lists:function(e){return e.generalize.Num2lists},Num2fields:function(e){return e.generalize.Num2fields},Num2pages:function(e){return e.generalize.Num2pages},exportData:function(e){return e.member.exportData},userData:function(e){return e.generalize.userData},DetailFields:function(e){return e.generalize.DetailFields},DetailDataLists:function(e){return e.generalize.DetailLists},DetailPages:function(e){return e.generalize.DetailPages}})),data:function(){return{formItemLayout:m,setPro:!1,selectVal:"mobile",selectedRowKeys:[],selectedRows:[],listform:{page:1,created_start:"",created_end:"",partner_role:""},tabVisible:!1,showDetail:{page:1},memberVisible:!1,showMember:"",trimStr:"",is_promoter:"",exportLoading:!1,dataVisible:!1,exportForm:{},tabKey:1,member_id:"",detailShow:{page:1,id:""},inputVal:"",num2:!1,tabTitle:"",num2Item:{page:1,pid:""},setItem:{}}},methods:u(u({},Object(r["b"])({fetchSearch:"generalize/fetchSearch",exportFilter:"member/exportFilter",becomePromoter:"member/becomePromoter",memberDetail:"generalize/memberDetail",memberPriceDetail:"generalize/memberPriceDetail",detailLists:"generalize/detailLists",goodsSpreadLists:"generalize/goodsSpreadLists",depLists:"member/depLists",updatePartner:"member/updatePartner",updatePartnerType:"generalize/updatePartnerType"})),{},{submitSearch:function(){this.listform.page=1,"mobile"==this.selectVal?(this.listform.mobile=this.inputVal,delete this.listform.partner_mobile):(this.listform.partner_mobile=this.inputVal,delete this.listform.mobile),this.fetchSearch(this.listform)},savePartner:function(e){var t="/generalize/savePartner/".concat(e.id),a=this.$router.resolve({path:t,query:{tel:e.mobile,partner_role:e.partner_role}});window.open(a.href,"_blank")},seePromoter:function(e){var t="/generalize/promoterShop/".concat(e.id),a=this.$router.resolve({path:t,query:{tel:e.mobile,partner_role:e.partner_role}});window.open(a.href,"_blank")},setStatus:function(e,t,a){var i={id:e.id,partner_status:"",partner_role:a,type:1};1==t?(i.partner_status=0,i.type=1):4==t?(i.partner_status=0,i.type=2):0==t&&(i.partner_status=1,i.type=2),this.updatePartner({formItem:i,callback:this.getLists})},setStatusType:function(e,t,a){var i={id:e.id,partner_type:t,type:a};this.updatePartnerType({formItem:i,callback:this.getLists})},cancelSetPro:function(){this.setPro=!1},setPromoter:function(e){this.setItem=e,this.setPro=!0},Num2PageChange:function(e){this.num2Item.page=e,this.goodsSpreadLists({params:this.num2Item,callback:this.showNum2})},showNum2Table:function(e){this.tabTitle="会员：".concat(e.mobile,"客户数列表"),this.num2Item.pid=e.id,this.goodsSpreadLists({params:this.num2Item,callback:this.showNum2})},showNum2:function(){this.num2=!0},SetProOk:function(){this.confirm(this.setItem,1),this.setPro=!1},showTable:function(e){this.tabTitle="会员：".concat(e.mobile,"邀请好友列表"),this.detailShow.page=1,this.detailShow.id=e.id,this.getDetail()},getDetail:function(){var e=this.detailShow;this.detailLists({params:e,callback:this.showModel})},detailPageChange:function(e){this.detailShow.page=e,this.getDetail()},showModel:function(){this.tabVisible=!0},LogpagesChange:function(e){this.showDetail.page=e,this.memberDetailChange(this.tabKey)},cancel:function(){this.memberVisible=!1,this.tabKey=1},memberDetailChange:function(e){if(1==e){this.showDetail.page=1,this.showDetail.user_id=this.member_id,delete this.showDetail.pid;var t=l["a"].action.tradeRewardsLists;this.memberDetail({url:t,params:this.showDetail,callback:this.memberCallback,key:this.tabKey})}else if(2==e){this.showDetail.page=1,this.showDetail.pid=this.member_id,delete this.showDetail.user_id;var a=l["a"].action.tradeEstimatesLists;this.memberDetail({url:a,params:this.showDetail,callback:this.memberCallback,key:this.tabKey})}},showMemberDetail:function(e){this.showMember=e.mobile,this.showDetail.user_id=e.id,this.member_id=e.id,this.showDetail.page=1;var t=l["a"].action.tradeRewardsLists;this.memberDetail({url:t,params:this.showDetail,callback:this.memberCallback,key:this.tabKey});var a={user_id:e.id};this.memberPriceDetail(a)},memberCallback:function(){this.memberVisible=!0},confirm:function(e,t){var a={id:e.id,status:t,department_id:e.department_id};this.becomePromoter({formItem:a,callback:this.getLists})},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},selectBtn:function(){if(0==this.selectedRows.length)this.$warning({title:"温馨提示！",content:"请勾选需要导出的数据"});else{var e=[],t=[];this.listField.forEach((function(a,i){e.push(a.title),t.push(a.dataIndex)})),this.export2Excel(e,t,this.selectedRows,"平台会员列表")}},dateChange:function(e,t){this.listform.created_start=t[0],this.listform.created_end=t[1]},dataHandleOk:function(){"mobile"==this.selectVal?(this.listform.mobile=this.inputVal,delete this.listform.partner_mobile):(this.listform.partner_mobile=this.inputVal,delete this.listform.mobile);var e=this.listform;delete e.page,this.exportFilter({formItem:e,callback:this.dowBack})},dowBack:function(){var e=this;setTimeout((function(){e.exportLoading=!1,e.dataVisible=!1;var t="/statistics/downLoadList",a=e.$router.resolve({path:t});window.open(a.href,"_blank")}),1e3)},dataCancel:function(){this.dataVisible=!1},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},export2Excel:function(e,t,i,s){var n=t,r=i,l=this.formatJson(n,r);Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-d33b169a"),a.e("chunk-2d0c8d9c")]).then(a.bind(null,"4bf8")).then((function(t){t.export_json_to_excel({header:e,data:l,filename:"平台会员列表",autoWidth:!0,bookType:"xlsx"})})),this.dataVisible=!1,o["a"].showSuccess("数据正在导出,请稍后查看下载目录！")},getLists:function(){this.fetchSearch(this.listform)},pageChange:function(e){this.listform.page=e,this.fetchSearch(this.listform)}}),mounted:function(){this.fetchSearch(this.listform)}},p=h,d=(a("e99d"),a("9ca4")),f=Object(d["a"])(p,i,s,!1,null,"ef856894",null);t["default"]=f.exports},"4e8b":function(e,t,a){},e99d:function(e,t,a){"use strict";var i=a("4e8b"),s=a.n(i);s.a}}]);