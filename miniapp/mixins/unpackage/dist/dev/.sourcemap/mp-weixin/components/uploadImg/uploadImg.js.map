{"version":3,"sources":["webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue?91c1","webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue?d798","webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue?dca1","webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue?1cbc","webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue","webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue?b5bd","webpack:///D:/xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue?6cab"],"names":["data","percent","step","imgLists","props","index","type","Number","default","watch","item","lists","$emit","methods","deleteImg","splice","upload","_this","uni","showToast","title","icon","_url","config","api_base_url","apiLinks","uploadImg","url","tempToken","getStorageSync","headers","Accept","Authorization","chooseImage","count","sizeType","sourceType","success","chooseImageRes","tempFilePaths","uploadTask","uploadFile","filePath","header","name","uploadFileRes","JSON","parse","push","result","pic_url","onProgressUpdate","res","progress","mounted"],"mappings":"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","file":"components/uploadImg/uploadImg.js","sourcesContent":["import { render, staticRenderFns } from \"./uploadImg.vue?vue&type=template&id=20388391&scoped=true&\"\nimport script from \"./uploadImg.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadImg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uploadImg.vue?vue&type=style&index=0&id=20388391&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20388391\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\MyDownloads\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('20388391', component.options)\n    } else {\n      api.reload('20388391', component.options)\n    }\n    module.hot.accept(\"./uploadImg.vue?vue&type=template&id=20388391&scoped=true&\", function () {\n      api.rerender('20388391', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"xm/ego小程序/ego-frontend/miniapp/components/uploadImg/uploadImg.vue\"\nexport default component.exports","export * from \"-!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uploadImg.vue?vue&type=template&id=20388391&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uploadImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uploadImg.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { config } from \"../../static/base/server2\";\nexport default {\n  data() {\n    return {\n      percent:0,\n      step:0,\n      imgLists:[],\n    };\n  },\n  props:{\n    index:{\n      type:Number,\n      default:-1\n    }\n  },\n  watch:{\n    step(){\n      if(this.index!==-1){\n        const item = {\n          index:this.index,\n          lists:this.imgLists\n        }\n        this.$emit('on-img',item)\n      }else{\n        this.$emit('on-img',this.imgLists)\n      }\n\n    }\n  },\n  methods: {\n    deleteImg(index){\n      this.imgLists.splice(index,1)\n      this.step--\n    },\n    upload(){\n      const _this = this\n      if(this.step === 5){\n        uni.showToast({\n          title: '最多上传5张图片',\n          icon: 'none',\n        })\n        return\n      }\n      const _url = config.api_base_url + config.apiLinks.uploadImg.url\n      let tempToken = uni.getStorageSync('user_token');\n      const headers = {\n        Accept: 'application/json',\n        Authorization: `Bearer ${tempToken}`,\n      }\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'],\n        success: (chooseImageRes) => {\n          const tempFilePaths = chooseImageRes.tempFilePaths;\n          const uploadTask =  uni.uploadFile({\n            url: _url, //仅为示例，非真实的接口地址\n            filePath: tempFilePaths[0],\n            header:headers,\n            name: 'image',\n            success: (uploadFileRes) => {\n              const item = JSON.parse(uploadFileRes.data)\n              _this.imgLists.push(item.result.pic_url)\n              _this.percent = 0\n              _this.step++\n            }\n          });\n          uploadTask.onProgressUpdate(function (res) {\n            _this.percent = res.progress\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n  },\n};\n","import mod from \"-!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-1!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--11-oneOf-1-2!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uploadImg.vue?vue&type=style&index=0&id=20388391&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-1!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--11-oneOf-1-2!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../MyDownloads/Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uploadImg.vue?vue&type=style&index=0&id=20388391&scoped=true&lang=stylus&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}