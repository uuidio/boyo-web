require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/brand/lists"],{"149f":function(t,e,i){"use strict";i.r(e);var n=i("86cd"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"3a44":function(t,e,i){},6562:function(t,e,i){"use strict";i.r(e);var n=i("cb2a"),o=i("149f");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("d6aa");var r,a=i("f0c5"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"13d1fa44",null,!1,n["a"],r);e["default"]=c.exports},"830a":function(t,e,i){"use strict";(function(t){i("cf0c");n(i("66fd"));var e=n(i("6562"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"86cd":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("1d66")),o=s(i("669a"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,s=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function a(t,e){if(t){if("string"===typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l=function(){i.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(i("fdd7"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/lists/TopDropdown").then(function(){return resolve(i("3f51"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/lists/SideDrawer").then(function(){return resolve(i("385c"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/lists/GoodsLists").then(function(){return resolve(i("76b8"))}.bind(null,i)).catch(i.oe)},f=function(){i.e("components/diyTitle/diyTitle").then(function(){return resolve(i("cf0e"))}.bind(null,i)).catch(i.oe)},p=function(){i.e("pagesA/brand/components/brandInfo").then(function(){return resolve(i("20dd"))}.bind(null,i)).catch(i.oe)},m={name:"lists",mixins:[n.default,o.default],components:{GoodsLists:h,TopDropdown:u,SideDrawer:d,uniLoadMore:l,diyTitle:f,brandInfo:p},data:function(){return{imgList:[],titleConfig:{width:0,height:0,title:"品牌详情",pdt:0},loadText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"持续更新中"},searchKey:"搜索关键词",width:200,height:64,inputTop:0,arrowTop:0,dropScreenH:0,attrData:[],attrIndex:-1,dropScreenShow:!1,scrollTop:0,tabIndex:0,isList:!1,openSideDrawer:!1,sideDraweH:0,selectedName:"综合",orderLists:[{name:"最新",selected:!0},{name:"价格升序",selected:!1},{name:"价格降序",selected:!1}],selectH:0,goodsLists:[],selectIndex:-1,pageIndex:1,loadding:!1,pullUpOn:!0,loadStatus:"more",searchShow:!1,headShow:!0,temp:null,navScroll:0,isFixed:!1,brandInfo:[],shopId:null,listParam:{orderby:"on_sale_time"},likeType:{},tempSide:{},lock:!0}},onLoad:function(e){var i=this;this.shopId=e.shopid;var n=t.getStorageSync("user_token");this.token=n;var o={};o=wx.getMenuButtonBoundingClientRect(),t.getSystemInfo({success:function(n){i.titleConfig.width=o.left||n.windowWidth,i.titleConfig.height=o.top?o.top+o.height+8:n.statusBarHeight+44,i.inputTop=o.top?o.top+(o.height-30)/2:n.statusBarHeight+7,i.titleConfig.pdt=o.top?o.top+(o.height-32)/2:n.statusBarHeight+6,i.height=o.top?o.top+o.height:n.statusBarHeight+44,i.searchKey=e.searchKey||"",i.dropScreenH=750*i.height/n.windowWidth+i.height,i.sideDraweH=n.windowHeight-t.upx2px(100)-i.height}})},onPageScroll:function(t){var e=this;this.lock&&(this.lock=!1,setTimeout((function(){e.lock=!0,e.navScroll-(t.scrollTop+e.titleConfig.height)<=10?e.isFixed=!0:e.isFixed=!1}),100))},mounted:function(){this.getShopInof(),this.getGoodsList(!0)},onPullDownRefresh:function(){},onReachBottom:function(){var t=this;this.pullUpOn&&(this.loadding=!0,this.loadStatus="loading",this.listParam.page===this.listParam.lastPage?(this.loadding=!1,this.pullUpOn=!1,this.loadStatus="noMore"):(this.listParam.page++,setTimeout((function(){t.getGoodsList(),t.loadding=!1,t.loadStatus="more"}),300)))},methods:{getShopInof:function(){var e=this;this.$http({aurl:"brandDetail",aPath:[this.shopId],success:function(i){var n=i.data.result,o=n.shop_banner;null!==o&&o.length>0&&(console.log(o),o.forEach((function(t,i){e.imgList.push(t.url)}))),console.log(n),e.brandInfo.push(n),setTimeout((function(){var i=t.createSelectorQuery().in(e);i.select(".em-header-screen").boundingClientRect((function(t){e.navScroll=t.top})).exec()}),100)},fail:function(t){console.log(t)}})},getGoodsList:function(t){var e=this;t&&(this.listParam.page=1,this.goodsLists=[],this.pullUpOn=!0,this.listParam.shop_id=this.shopId),this.$http({aurl:"getCateList",data:this.listParam,success:function(i){t&&(e.listParam.lastPage=i.data.result.last_page,1===e.listParam.lastPage&&(e.loadding=!1,e.pullUpOn=!1,e.loadStatus="noMore")),i.data.result.data.forEach((function(t){e.goodsLists.push(t)}))},fail:function(t){console.log(t)}})},px:function(e){return t.upx2px(e)+"px"},btnSelected:function(t){var e=t.currentTarget.dataset.index;this.selectIndex=e},btnCloseDrop:function(t){var e=this;this.scrollTop=1,this.$nextTick((function(){e.scrollTop=0})),this.dropScreenShow=!1,this.attrIndex=-1},btnSure:function(){var t,e=this.attrIndex,i=this.attrData,n=!1,o="",s=r(i);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.selected&&(n=!0,o+=o?";"+a.name:a.name)}}catch(l){s.e(l)}finally{s.f()}var c=this.attrArr[e];this.btnCloseDrop(),this.$set(c,"isActive",n),this.$set(c,"selectedName",o)},sure:function(e){e.ps?(this.openSideDrawer=!1,this.tempSide=e,this.listParam.start_price=e.ps,this.listParam.stop_price=e.pe,this.getGoodsList(!0)):t.showToast({title:"请输入最低价",icon:"none"})},showOrderLists:function(){this.selectH=246,this.tabIndex=0},hideDropdownList:function(){this.selectH=0},selectOrderItem:function(t){var e=Number(t.currentTarget.dataset.index);switch(this.selectedName=0===e?"最新":"价格",this.orderLists.map((function(t,e){t.selected=!1})),this.orderLists[e].selected=!0,this.selectH=0,this.listParam={},e){case 0:break;case 1:this.listParam.orderby="price",this.listParam.direction="asc";break;case 2:this.listParam.orderby="price",this.listParam.direction="desc";break}this.getGoodsList(!0)},screen:function(e){var i=this,n=Number(e.currentTarget.dataset.index);if(n<5&&(this.searchShow=!1),0!==n&&(this.selectH=0),0===n)0===this.selectH?this.showOrderLists():this.hideDropdownList();else if(1===n)this.tabIndex=1,this.listParam.orderby||(this.listParam={}),this.listParam.orderby="sold_quantity",this.listParam.direction="desc"===this.listParam.direction?"asc":"desc",this.getGoodsList(!0);else if(2===n)this.isList=!this.isList;else if(3===n)this.openSideDrawer=!0;else if(4===n){var o=JSON.parse(JSON.stringify(this.attrArr[1].list));this.attrData=o,this.dropScreenShow=!0,this.$set(this.attrArr[1],"isActive",!1),this.$nextTick((function(){i.scrollTop=0}))}else 5==n&&(this.searchShow=!this.searchShow);(this.dropScreenShow||0===n)&&t.pageScrollTo({scrollTop:this.navScroll,duration:0})},toSearch:function(t){this.listParam={},this.listParam.keyword=t.target.value,this.getGoodsList(!0)},closeSideDrawer:function(t){this.openSideDrawer=!1},like:function(e){var i=this;this.brandInfo[0].is_favorite?(this.likeType.tip="取消收藏成功",this.likeType.url="cancelShopFavorite"):(this.likeType.tip="收藏成功",this.likeType.url="ShopFavorite"),this.$http({aurl:this.likeType.url,data:{shop_id:this.shopId},success:function(e){i.$set(i.brandInfo[0],"is_favorite",!i.brandInfo[0].is_favorite),t.showToast({title:i.likeType.tip})},fail:function(t){}})},toBack:function(){this.openSideDrawer?this.closeSideDrawer():t.navigateBack()},toIndex:function(){t.switchTab({url:"/pages/index/indexCustomer"})},selectItem:function(t){},imgView:function(e){var i=e.currentTarget.dataset.index;t.previewImage({urls:this.imgList,indicator:"number",current:i})}}};e.default=m}).call(this,i("543d")["default"])},cb2a:function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.px(t.selectH)),n=t.px(120),o=t.px(20);t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:o}})},s=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}))},d6aa:function(t,e,i){"use strict";var n=i("3a44"),o=i.n(n);o.a}},[["830a","common/runtime","common/vendor"]]]);