require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/goods/lists"],{6218:function(t,e,i){"use strict";i.r(e);var s=i("7d03"),n=i("e206");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("a3ce");var a,r=i("f0c5"),d=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"658cabfe",null,!1,s["a"],a);e["default"]=d.exports},"7d03":function(t,e,i){"use strict";var s,n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.px(t.selectH)),s=t.px(t.dropScreenH+44);t.$mp.data=Object.assign({},{$root:{m0:i,m1:s}})},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return s}))},a13b:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i("1d66")),n=o(i("669a"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){i.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(i("fdd7"))}.bind(null,i)).catch(i.oe)},r=function(){i.e("components/lists/TopDropdown").then(function(){return resolve(i("3f51"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/lists/SideDrawer").then(function(){return resolve(i("385c"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/lists/GoodsLists").then(function(){return resolve(i("76b8"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/lists/nullData").then(function(){return resolve(i("0bb9"))}.bind(null,i)).catch(i.oe)},c={name:"lists",mixins:[s.default,n.default],components:{GoodsLists:h,TopDropdown:r,SideDrawer:d,uniLoadMore:a,nullData:l},data:function(){return{indexItems:[],sltIndexItem:"",width:200,height:64,inputTop:0,arrowTop:0,dropScreenH:0,attrData:[],attrIndex:-1,dropScreenShow:!1,scrollTop:0,tabIndex:0,isList:!1,openSideDrawer:!1,sideDraweH:0,selectedName:"综合",orderLists:[{name:"最新",selected:!0},{name:"价格升序",selected:!1},{name:"价格降序",selected:!1}],selectH:0,goodsLists:[],selectIndex:0,pageIndex:1,loadding:!1,pullUpOn:!0,loadStatus:"loading",siblingList:[],gcId:null,keyword:null,listParam:{page:1,lastPage:1,keyword:""},goods_shop_c_lv2:"",isShowTip:!1,tempSide:{},is_rebate:"",shop_not_in:"",loadText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"持续更新中"}}},onLoad:function(e){var i=this;e.keyword&&(this.listParam.keyword=decodeURIComponent(e.keyword),this.keyword=decodeURIComponent(e.keyword),this.selectIndex=-1),e.is_rebate&&(this.is_rebate=Number(e.is_rebate),this.listParam.is_rebate=Number(e.is_rebate),t.hideShareMenu()),e.shop_not_in&&(this.shop_not_in=Number(e.shop_not_in),this.listParam.shop_not_in=Number(e.shop_not_in)),e.shopclassid&&(this.listParam.goods_shop_c_lv2=e.shopclassid,this.goods_shop_c_lv2=e.shopclassid),e.gc_id&&(this.listParam.gc_id=e.gc_id,this.gcId=e.gc_id),this.getList(!0),this.getSiblingsList();var s={};s=wx.getMenuButtonBoundingClientRect(),t.getSystemInfo({success:function(n){i.width=s.left||n.windowWidth,i.height=s.top?s.top+s.height+8:n.statusBarHeight+44,i.inputTop=s.top?s.top+(s.height-30)/2:n.statusBarHeight+7,i.arrowTop=s.top?s.top+(s.height-32)/2:n.statusBarHeight+6,i.searchKey=e.searchKey||"",i.dropScreenH=750*i.height/n.windowWidth+i.height,i.sideDraweH=n.windowHeight-t.upx2px(124)-i.height}}),this.getIndexItem()},mounted:function(){},onPullDownRefresh:function(){t.pageScrollTo({scrollTop:0})},onReachBottom:function(){var t=this;this.pullUpOn&&(this.loadding=!0,this.loadStatus="loading",this.listParam.page===this.listParam.lastPage?(this.loadding=!1,this.pullUpOn=!1,this.loadStatus="noMore"):(this.listParam.page++,setTimeout((function(){t.getList(),t.loadding=!1,t.loadStatus="more"}),500)))},methods:{getIndexItem:function(){var t=this;this.$http({aurl:"getIndexItem",data:{use_self:1},success:function(e){if(0===e.data.code&&e.data.result.length>0){t.indexItems=e.data.result;for(var i=0;i<t.indexItems.length;i++)t.indexItems[i].active=!1}},fail:function(t){console.log(t)},complete:function(){}})},getShopGoods:function(t){this.keyword=t.detail.value,this.getList(!0)},cleanKeyword:function(){this.$set(this.listParam,"keyword","")},getList:function(e){var i=this;e&&(t.pageScrollTo({scrollTop:0}),this.listParam.page=1,this.goodsLists=[],this.pullUpOn=!0),this.goods_shop_c_lv2&&(this.listParam.goods_shop_c_lv2=this.goods_shop_c_lv2);var s=t.getStorageSync("shop_id");s&&(this.listParam.shop_id=s),this.$http({aurl:"getCateList",data:this.listParam,success:function(t){e&&(i.listParam.lastPage=t.data.result.last_page),t.data.result.data.forEach((function(t){i.goodsLists.push(t)})),i.goodsLists.length>0?i.isShowTip=!1:i.isShowTip=!0,1===t.data.result.last_page&&(i.loadding=!1,i.pullUpOn=!1,i.loadStatus="noMore")},fail:function(t){console.log(t)}})},px:function(e){return t.upx2px(e)+"px"},btnDropChange:function(t){t.currentTarget.dataset.index},btnSelected:function(t){var e=t.currentTarget.dataset.index;this.selectIndex=e},reset:function(){null!==this.gcId&&(this.selectIndex=0)},btnCloseDrop:function(){var t=this;this.scrollTop=1,this.$nextTick((function(){t.scrollTop=0})),this.dropScreenShow=!1,this.attrIndex=-1},btnSure:function(){-1!==this.selectIndex?(this.listParam={},this.listParam.gc_id=this.siblingList[this.selectIndex].id,this.shop_not_in&&(this.listParam.shop_not_in=this.shop_not_in),this.is_rebate&&(this.listParam.is_rebate=this.is_rebate),this.gcId=this.listParam.gc_id,this.keyword="",this.getList(!0),this.btnCloseDrop()):t.showToast({title:"请选择分类",icon:"none"})},showOrderLists:function(){this.selectH=246,this.tabIndex=0},hideDropdownList:function(){this.selectH=0},selectOrderItem:function(t){var e=Number(t.currentTarget.dataset.index);switch(this.selectedName=0===e?"最新":"价格",this.orderLists.map((function(t,e){t.selected=!1})),this.orderLists[e].selected=!0,this.selectH=0,this.listParam={},this.keyword?this.listParam.keyword=this.keyword:this.listParam.gc_id=this.gcId,this.shop_not_in&&(this.listParam.shop_not_in=this.shop_not_in),this.is_rebate&&(this.listParam.is_rebate=this.is_rebate),e){case 0:break;case 1:this.listParam.orderby="price",this.listParam.direction="asc";break;case 2:this.listParam.orderby="price",this.listParam.direction="desc";break}this.getList(!0)},screen:function(t){var e=this;this.btnCloseDrop();var i=Number(t.currentTarget.dataset.index);0!==i&&(this.selectH=0),0===i?0===this.selectH?this.showOrderLists():this.hideDropdownList():1===i?(this.tabIndex=1,this.listParam.orderby||(this.listParam={},this.keyword?this.listParam.keyword=this.keyword:this.listParam.gc_id=this.gcId),this.shop_not_in&&(this.listParam.shop_not_in=this.shop_not_in),this.is_rebate&&(this.listParam.is_rebate=this.is_rebate),this.listParam.orderby="sold_quantity",this.listParam.direction="desc"===this.listParam.direction?"asc":"desc",this.getList(!0)):2===i?this.isList=!this.isList:3===i?this.openSideDrawer=!0:4===i&&(this.dropScreenShow=!0,this.$nextTick((function(){e.scrollTop=0})))},closeSideDrawer:function(){this.openSideDrawer=!1},sure:function(t){this.openSideDrawer=!1,JSON.stringify(this.tempSide)!==JSON.stringify(t)&&("{}"==JSON.stringify(this.tempSide)?this.tempSide=t:(this.listParam.start_price=t.ps,this.listParam.stop_price=t.pe,this.tempSide=t)),this.listParam.gm_id=this.sltIndexItem,this.getList(!0)},toBack:function(){this.openSideDrawer?this.closeSideDrawer():t.navigateBack()},selectItem:function(t){t||(this.sltIndexItem="");for(var e=0;e<this.indexItems.length;e++)this.indexItems[e].active=!1,t&&this.indexItems[e].gm_id==t.gm_id&&(this.indexItems[e].active=!0,this.sltIndexItem=t.gm_id)},getSiblingsList:function(){var t=this;this.$http({aurl:"getSiblingsList",data:{gc_id:this.gcId},success:function(e){var i=e.data.result;0!==i.length&&(t.siblingList=i)},fail:function(t){console.log(t)}})}}};e.default=c}).call(this,i("543d")["default"])},a3ce:function(t,e,i){"use strict";var s=i("ef71"),n=i.n(s);n.a},a4eb:function(t,e,i){"use strict";(function(t){i("cf0c");s(i("66fd"));var e=s(i("6218"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},e206:function(t,e,i){"use strict";i.r(e);var s=i("a13b"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e["default"]=n.a},ef71:function(t,e,i){}},[["a4eb","common/runtime","common/vendor"]]]);