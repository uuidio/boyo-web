require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/favorite"],{"0d5a":function(t,n,r){"use strict";r.r(n);var e=r("97c2"),o=r.n(e);for(var i in e)"default"!==i&&function(t){r.d(n,t,(function(){return e[t]}))}(i);n["default"]=o.a},"0e39":function(t,n,r){"use strict";var e=r("6d31"),o=r.n(e);o.a},5162:function(t,n,r){"use strict";r.r(n);var e=r("b2d3"),o=r("0d5a");for(var i in o)"default"!==i&&function(t){r.d(n,t,(function(){return o[t]}))}(i);r("0e39");var u,a=r("f0c5"),c=Object(a["a"])(o["default"],e["b"],e["c"],!1,null,"7ad38917",null,!1,e["a"],u);n["default"]=c.exports},"652c":function(t,n,r){"use strict";(function(t){r("cf0c");e(r("66fd"));var n=e(r("5162"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,r("543d")["createPage"])},"6d31":function(t,n,r){},"97c2":function(t,n,r){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=o(r("669a"));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){r.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-segmented-control/uni-segmented-control").then(function(){return resolve(r("b74f"))}.bind(null,r)).catch(r.oe)},u=function(){r.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-swipe-action/uni-swipe-action").then(function(){return resolve(r("63b8"))}.bind(null,r)).catch(r.oe)},a=function(){r.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(r("fdd7"))}.bind(null,r)).catch(r.oe)},c={mixins:[e.default],onLoad:function(t){t.type&&t.type>0&&(this.current=1)},onShow:function(){},onReachBottom:function(){var t=this,n=this.currentArr[this.current];n.param.page===n.lastPage?n.loadStatus="noMore":(n.param.page++,n.loadStatus="loading",setTimeout((function(){t.getShop()}),300))},mounted:function(){this.getShop(!0)},data:function(){return{isOpened:!1,current:0,currentArr:[{param:{},list:[],loadStatus:"loading",url:"goodsFavoriteList",ccUrl:"goodFavoriteCancel"},{param:{},list:[],loadStatus:"loading",url:"shopFavoriteList",ccUrl:"cancelShopFavorite"}],items:["商品","店铺"],shop:{loadStatus:"loading",param:{}},pullUpOn:!0,shopList:[],options:[{text:"取消收藏",style:{backgroundColor:"#007aff",fontSize:"14px"}},{text:"确认",style:{backgroundColor:"#dd524d",fontSize:"14px"}}]}},methods:{onClickItem:function(t){this.current=t.currentIndex,0===this.currentArr[this.current].list.length&&this.getShop(!0)},getShop:function(t){var n=this;t&&(this.currentArr[this.current].param.page=1),this.$http({aurl:this.currentArr[this.current].url,data:this.currentArr[this.current].param,success:function(t){var r=t.data.result,e=r.data;n.currentArr[n.current].lastPage=r.last_page,e&&e.forEach((function(t,r){t.isOpened=!1,t.options=[{text:"取消收藏",style:{backgroundColor:"#007aff",fontSize:"14px",goodsId:t.goods_id,shopId:t.shop_id,index:r}},{text:"确认",style:{backgroundColor:"#dd524d",fontSize:"14px"}}],n.currentArr[n.current].list.push(t)})),1===r.last_page?n.currentArr[n.current].loadStatus="noMore":n.currentArr[n.current].loadStatus="more"},fail:function(t){console.log(t)}})},cancelFavoite:function(n,r,e){var o=this;this.$http({aurl:n,data:r,success:function(n){t.showToast({title:"取消收藏成功"}),o.currentArr[o.current].list.splice(e,1)},fail:function(t){}})},showBtn:function(t){var n=t.currentTarget.dataset.index;this.currentArr[this.current].list[n].isOpened=!0},changeSwipe:function(t,n){t.dataset.index},tapSwipe:function(t,n){if(0===t.index){var r=this.current,e=t.style.index,o={};0===r?o.goods_id=this.currentArr[r].list[e].goods_id:o.shop_id=this.currentArr[r].list[e].shop_id,this.cancelFavoite(this.currentArr[r].ccUrl,o,e)}},toUrl:function(n){var r=n.currentTarget.dataset.index;if(0===this.current){var e=this.currentArr[0].list[r].goods_id;t.navigateTo({url:"../goods/detail?id=".concat(e)})}else{var o=this.currentArr[1].list[r].shop_id;console.log(this.currentArr[1].list[r]),"brand"===this.currentArr[1].list[r].shop_type?t.navigateTo({url:"/pagesA/brand/lists?shopid=".concat(o)}):t.navigateTo({url:"/pagesB/shop/index?shopid=".concat(o)})}}},components:{uniSegmentedControl:i,uniSwipeAction:u,uniLoadMore:a}};n.default=c}).call(this,r("543d")["default"])},b2d3:function(t,n,r){"use strict";var e,o=function(){var t=this,n=t.$createElement;t._self._c},i=[];r.d(n,"b",(function(){return o})),r.d(n,"c",(function(){return i})),r.d(n,"a",(function(){return e}))}},[["652c","common/runtime","common/vendor"]]]);