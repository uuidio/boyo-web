require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/setting/setting"],{"0b31":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("09a2"),o={components:{},onLoad:function(e){this.userInfo=JSON.parse(decodeURIComponent(e.info))},onShow:function(){var t=e.getStorageSync("newName");if(t&&t!==this.userInfo.nickName){var n={name:t};this.tempInfo.name=t,this.setInfo(n,2),e.removeStorageSync("newName"),console.log(e.getStorageSync("newName"))}this.hasPayPassword()},mounted:function(){},data:function(){return{accountStatus:0,userInfo:{},tempInfo:{headimgurl:"",name:"",sex:"",brithDay:""},sexArr:["保密","男","女"],menuInfo:{}}},methods:{hasPayPassword:function(){var e=this;this.$http({aurl:"hasPayPassword",success:function(t){0===t.data.code&&(e.accountStatus=t.data.result.status,e.time=t.data.result.status)},fail:function(e){console.log(e)}})},toResetPwd:function(){2==this.accountStatus?this.walletLocking(this.time):this.toQueryLink("/pagesA/user/wallet/authentication",{use_type:"set",type:"reset"})},logout:function(){e.showModal({content:"确认退出登录吗？",success:function(t){t.confirm?e.removeStorage({key:"user_token",success:function(t){e.removeStorageSync("user_info"),e.navigateBack()}}):t.cancel}})},setHeadImg:function(){var t=this,n=a.config.api_base_url+a.config.apiLinks.uploadImg.url,o=e.getStorageSync("user_token"),s={Accept:"application/json",Authorization:"Bearer ".concat(o)};e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){e.showLoading({title:"图片上传中...",icon:"none"});var o=a.tempFilePaths;e.uploadFile({url:n,filePath:o[0],header:s,name:"image",success:function(n){var a=JSON.parse(n.data),o=a.result.pic_url;t.tempInfo.headimgurl=o;var s={head_pic:o};t.setInfo(s,1),e.hideLoading()}})}})},selectSex:function(){var t=this;e.showActionSheet({itemList:this.sexArr,success:function(e){var n=e.tapIndex,a={sex:n};t.setInfo(a,3),t.tempInfo.sex=t.sexArr[n]},fail:function(e){console.log(e)}})},selectBrithDay:function(e){var t=e.detail.value,n={birthday:t};this.tempInfo.brithDay=t,this.setInfo(n,4)},toSetValue:function(){e.navigateTo({url:"/pagesA/user/setting/setValue?name="+this.userInfo.nickName})},setInfo:function(t,n){var a=this;e.showLoading({title:"请稍后..."}),this.$http({aurl:"setUserInfo",data:t,success:function(t){switch(e.hideLoading(),e.showToast({title:"设置成功"}),n){case 1:a.userInfo.headimgurl=a.tempInfo.headimgurl;break;case 2:a.userInfo.nickName=a.tempInfo.name;break;case 3:a.userInfo.sex_text=a.tempInfo.sex;break;case 4:a.userInfo.birthday=a.tempInfo.brithDay;break;default:break}},fail:function(e){console.log(e)}})}},watch:{userInfo:function(){}},onUnload:function(){}};t.default=o}).call(this,n("543d")["default"])},"17f6":function(e,t,n){"use strict";n.r(t);var a=n("3ad2"),o=n("a9e5");for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n("dc3f");var i,c=n("f0c5"),u=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"d77fbe38",null,!1,a["a"],i);t["default"]=u.exports},"3ad2":function(e,t,n){"use strict";var a,o=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}))},a9e5:function(e,t,n){"use strict";n.r(t);var a=n("0b31"),o=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=o.a},db86:function(e,t,n){},dc3f:function(e,t,n){"use strict";var a=n("db86"),o=n.n(a);o.a},f6cb:function(e,t,n){"use strict";(function(e){n("cf0c");a(n("66fd"));var t=a(n("17f6"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["f6cb","common/runtime","common/vendor"]]]);