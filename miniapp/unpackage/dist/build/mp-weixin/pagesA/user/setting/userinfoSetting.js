require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/setting/userinfoSetting"],{"29df":function(e,t,n){},"3d2b":function(e,t,n){"use strict";var o=n("29df"),a=n.n(o);a.a},"75df":function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"91a0":function(e,t,n){"use strict";n.r(t);var o=n("ff0d"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},a6ae:function(e,t,n){"use strict";(function(e){n("cf0c");o(n("66fd"));var t=o(n("ae51"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},ae51:function(e,t,n){"use strict";n.r(t);var o=n("75df"),a=n("91a0");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("3d2b");var s,r=n("f0c5"),f=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"f0db0ab8",null,!1,o["a"],s);t["default"]=f.exports},ff0d:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("09a2"),a={components:{},onLoad:function(e){this.userInfo=JSON.parse(decodeURIComponent(e.info)),this.tempInfo.sex=null==this.userInfo.sex?null:this.userInfo.sex_text,this.tempInfo.brithDay=this.userInfo.birthday,this.tempInfo.real_name=this.userInfo.real_name,this.tempInfo.email=this.userInfo.email},onShow:function(){var t=e.getStorageSync("newName");if(t&&t!==this.userInfo.nickName){var n={name:t};this.tempInfo.name=t,this.setInfo(n,2),e.removeStorageSync("newName"),console.log(e.getStorageSync("newName"))}},mounted:function(){},data:function(){return{showMask:!0,userInfo:{},tempInfo:{headimgurl:"",name:"",real_name:"",sex:"",brithDay:"",email:""},sexArr:["男","女"],menuInfo:{}}},methods:{onClickLeft:function(){return console.log(this.userInfo),""==this.userInfo.real_name||null==this.userInfo.real_name?(e.showToast({title:"姓名不能为空",icon:"none"}),!1):null==this.userInfo.sex?(e.showToast({title:"请选择性别",icon:"none"}),!1):null==this.userInfo.birthday?(e.showToast({title:"请选择出生日期",icon:"none"}),!1):void this.toBack()},subForm:function(){if(""==this.tempInfo.real_name||null==this.tempInfo.real_name)return e.showToast({title:"姓名不能为空",icon:"none"}),!1;if(null==this.tempInfo.sex||""==this.tempInfo.sex)return e.showToast({title:"请选择性别",icon:"none"}),!1;if(null==this.tempInfo.brithDay||""==this.tempInfo.brithDay)return e.showToast({title:"请选择出生日期",icon:"none"}),!1;if(""!=this.tempInfo.email&&null!=this.tempInfo.email){var t=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!t.test(this.tempInfo.email))return e.showToast({title:"邮箱格式错误",icon:"none"}),!1}var n=this.sexArr.indexOf(this.tempInfo.sex),o={real_name:this.tempInfo.real_name,sex:n+1,email:this.tempInfo.email,birthday:this.tempInfo.brithDay};null!=this.userInfo.birthday&&delete o.birthday,this.setInfo(o,5)},setHeadImg:function(){var t=this,n=o.config.api_base_url+o.config.apiLinks.uploadImg.url,a=e.getStorageSync("user_token"),i={Accept:"application/json",Authorization:"Bearer ".concat(a)};e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(o){e.showLoading({title:"图片上传中...",icon:"none"});var a=o.tempFilePaths;e.uploadFile({url:n,filePath:a[0],header:i,name:"image",success:function(n){var o=JSON.parse(n.data),a=o.result.pic_url;t.tempInfo.headimgurl=a;var i={head_pic:a};t.setInfo(i,1),e.hideLoading()}})}})},setRealName:function(e){var t=e.detail.value;this.tempInfo.real_name=t},setEmail:function(e){var t=e.detail.value;this.tempInfo.email=t},selectSex:function(){var t=this;e.showActionSheet({itemList:this.sexArr,success:function(e){console.log(e);var n=e.tapIndex;t.tempInfo.sex=t.sexArr[n]},fail:function(e){console.log(e)}})},selectBrithDay:function(e){var t=e.detail.value;console.log(t),this.tempInfo.brithDay=t},toSetValue:function(){e.navigateTo({url:"/pagesA/user/setting/setValue?name="+this.userInfo.nickName})},setInfo:function(t,n){var o=this;e.showLoading({title:"请稍后..."}),console.log(t),this.$http({aurl:"setUserInfo",data:t,success:function(a){switch(e.hideLoading(),e.showToast({title:"设置成功"}),n){case 1:o.userInfo.headimgurl=o.tempInfo.headimgurl;break;case 2:o.userInfo.nickName=o.tempInfo.name;break;case 3:o.userInfo.sex_text=o.tempInfo.sex;break;case 4:o.userInfo.birthday=o.tempInfo.brithDay;break;case 5:o.userInfo.real_name=o.tempInfo.real_name,o.userInfo.email=o.tempInfo.email,o.userInfo.birthday=o.tempInfo.brithDay,o.userInfo.sex=t.sex,o.userInfo.sex_text=o.tempInfo.sex;break;default:break}},fail:function(e){console.log(e)}})}},watch:{userInfo:function(){}},onUnload:function(){}};t.default=a}).call(this,n("543d")["default"])}},[["a6ae","common/runtime","common/vendor"]]]);