require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/order/detail"],{"101d":function(t,e,o){"use strict";(function(t){o("cf0c");n(o("66fd"));var e=n(o("4336"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"1a39":function(t,e,o){"use strict";var n,i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.getTime(t.detail.trade_close_end_time));t._isMounted||(t.e0=function(e){t.showPopup=!0}),t.$mp.data=Object.assign({},{$root:{m0:o}})},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))},"1aec":function(t,e,o){"use strict";var n=o("8bf7"),i=o.n(n);i.a},"29c3":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("0b07"),i=a(o("0cb3"));function a(t){return t&&t.__esModule?t:{default:t}}var c=["不想买了","重复下单","订单有误","其它原因"],s=function(){o.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-count-down/uni-count-down").then(function(){return resolve(o("b840"))}.bind(null,o)).catch(o.oe)},u=function(){Promise.all([o.e("common/vendor"),o.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-popup/uni-popup")]).then(function(){return resolve(o("39db"))}.bind(null,o)).catch(o.oe)},r={components:{uniCountdown:s,uniPopup:u},onShareAppMessage:function(t){var e=this;return"button"===t.from?(console.log("来自页面内转发按钮"),console.log(e.groups_bn)):console.log("来自右上角转发菜单"),{title:"邀你来拼团",path:"/pagesB/activity/groupDetail?groups_bn="+e.groups_bn,imageUrl:e.detail.trade_order[0].goods_image,success:function(t){console.log("转发成功",t)},fail:function(t){console.log("转发失败",t)}}},data:function(){return{loadOver:!1,showCode:!1,btnIf:!1,columns:c,showPopup:!1,cancelRadio:"",tid:"",detail:{},showTime:!1,time:0,groups_bn:"",cancel:{tid:"",cancel_reason:""},close_time:0,logStep:{name:"",time:""},qrcode_w:t.upx2px(300),statusIcon:"",address:"",groupFail:!1,codeSrc:""}},onLoad:function(e){this.tid=e.tid,t.hideShareMenu()},onShow:function(){this.getDetail()},methods:{activityTimeup:function(){this.getDetail()},copeCode:function(){t.setClipboardData({data:String(this.detail.tid),success:function(e){t.getClipboardData({success:function(e){t.showToast({title:"已复制到剪贴板"})}})}})},getDatetime:function(){var t=new Date,e=t.getFullYear(),o=s(t.getMonth()+1),n=s(t.getDate()),i=s(t.getHours()),a=s(t.getMinutes()),c=s(t.getSeconds());function s(t){return t<10?"0"+t:t}var u=e+"/"+o+"/"+n+" "+i+":"+a+":"+c;return u},showCodeEwm:function(){if(this.detail.GroupOrder&&2!==this.detail.GroupOrder.status)this.showAlert("拼团还未成功！");else{this.$refs.codePop.open();this.showCode=!0}},getTime:function(t){var e,o=i.default.toTimeStamp(i.default.toFullTime())/1e3;return e=t?i.default.toTimeStamp(t)/1e3:0,e-o},callUp:function(){this.detail.shop_info.shop_phone?t.makePhoneCall({phoneNumber:this.detail.shop_info.shop_phone}):this.showAlert("该店铺暂未设置客服电话，请到我的-联系客服")},toEvaluate:function(t){this.toQueryLink("/pagesA/user/order/evaluate",{tid:t})},receiptOrder:function(t){(0,n.confirmOrder)(t,this.callBack)},paymentOrder:function(t,e){(0,n.toPayment)(t,e)},callBack:function(){this.getDetail()},submitCancel:function(){var t=this;""!==this.cancelRadio?this.$http({aurl:"cancelOrder",data:this.cancel,success:function(e){0===e.data.code&&(t.getDetail(),t.showPopup=!1)},fail:function(t){console.log(t)}}):this.showAlert("请选择取消原因")},cancelTid:function(t){this.cancel.tid=t,this.showPopup=!0},closeModel:function(){this.cancelRadio="",this.showPopup=!1},cancelChange:function(t){console.log(t,8989),this.cancelRadio=String(t.detail),console.log(this.cancelRadio,999),this.cancel.cancel_reason=this.columns[t.detail]},cancelClick:function(t){this.cancelRadio=String(t),this.cancel.cancel_reason=this.columns[t]},getLog:function(){var t=this;this.$http({aurl:"getLogisticsInfo",params:{tid:this.tid},success:function(e){0===e.data.code&&e.data.result.logisticsInfo.traces&&(t.logStep.name=e.data.result.logisticsInfo.traces[e.data.result.logisticsInfo.traces.length-1].remark,t.logStep.time=e.data.result.logisticsInfo.traces[e.data.result.logisticsInfo.traces.length-1].operatingTime)},fail:function(t){console.log(t)}})},getDetail:function(){var e=this;this.$http({aurl:"orderDetail",params:{tid:this.tid},success:function(t){if(0===t.data.code){var o=t.data.result;e.detail=o,e.loadOver=!0,e.statusIcon="../../../static/images/".concat(e.detail.status,".svg"),e.address="".concat(o.receiver_province).concat(o.receiver_city).concat(o.receiver_county," ").concat(o.receiver_address),e.detail.GroupOrder&&(e.groups_bn=e.detail.GroupOrder.groups_bn,e.time=e.getTime(o.GroupOrder.end_time),e.showTime=!0,e.detail.Group||(e.groupFail=!0)),e.detail.invoice_no&&e.getLog(),"WAIT_BUYER_PAY"===e.detail.status&&e.detail.trade_close_end_time&&(e.close_time=e.getTime(e.detail.trade_close_end_time));for(var n=0;n<e.detail.trade_order.length;n++){var i=e.detail.trade_order[n];if(i.after_sales_status&&(e.btnIf=!0,"SELLER_REFUSE_BUYER"===i.after_sales_status||"SELLER_SEND_GOODS"===i.after_sales_status))return void(e.btnIf=!1)}e.detail.ziti_qrcode&&(e.codeSrc=e.detail.ziti_qrcode_url)}},fail:function(t){console.log(t)},complete:function(){t.hideLoading()}})},hideCode:function(){this.showCode=!1,this.$refs.codePop.close()}},mounted:function(){}};e.default=r}).call(this,o("543d")["default"])},4336:function(t,e,o){"use strict";o.r(e);var n=o("1a39"),i=o("6576");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("1aec");var c,s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"a4bcb70c",null,!1,n["a"],c);e["default"]=u.exports},6576:function(t,e,o){"use strict";o.r(e);var n=o("29c3"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"8bf7":function(t,e,o){}},[["101d","common/runtime","common/vendor","pagesA/common/vendor"]]]);