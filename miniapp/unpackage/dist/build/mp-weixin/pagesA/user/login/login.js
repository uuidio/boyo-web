require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/login/login"],{"1a31":function(e,t,n){"use strict";var i=n("f4c7"),a=n.n(i);a.a},"25d0":function(e,t,n){"use strict";(function(e){n("cf0c");i(n("66fd"));var t=i(n("e42d"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"2b74":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}))},"354b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){n.e("components/header/ToHome").then(function(){return resolve(n("a5c4"))}.bind(null,n)).catch(n.oe)},a={components:{toHome:i},data:function(){return{height:0,params:{mobile:"",code:""},code:"",times:{flag:!0,time:60},openid:"",gmToken:0,flag:!1}},onLoad:function(e){e.open_id&&(this.openid=e.open_id),e.gmToken&&(this.gmToken=e.gmToken),this.flag=e.flag,console.log(this.openid)},onShow:function(){var t=this;e.login({provider:"weixin",success:function(e){t.code=e.code,console.log(e)}})},methods:{getHeight:function(e){this.height=e},submitLogin:function(){if(""!==this.params.mobile&&11===this.params.mobile.length)if(""!==this.params.code){this.openid&&(this.params.openid=this.openid);var t=e.getStorageSync("source"),n=e.getStorageSync("pid"),i=e.getStorageSync("aid"),a=e.getStorageSync("gid");t&&(this.params.source=t),n&&(this.params.pid=n),i&&(this.params.aid=i),a&&(this.params.gid=a);var o=this;e.showLoading({title:"登录中..."});var s=e.getStorageSync("gmToken");s&&(this.params.gm_id=s),this.$http({aurl:"userRegister",data:this.params,success:function(t){e.setStorage({key:"user_token",data:t.data.result.token.access_token,success:function(){e.setStorage({key:"user_info",data:JSON.stringify(t.data.result.user_info),success:function(){e.hideLoading(),o.gmToken&&e.setStorageSync("gmToken",o.gmToken),o.flag?("index"==o.flag&&e.switchTab({url:"/pages/index/indexCustomer?gmToken="+o.gmToken}),"user"==o.flag?e.switchTab({url:"/pages/user/index"}):e.switchTab({url:"/pages/cart/cart"})):e.navigateBack({delta:2})}})}})},fail:function(e){console.log(e)}})}else this.showAlert("请输入短信验证码");else this.showAlert("请输入正确手机号")},getCode:function(){var e=this;""!==this.params.mobile&&11===this.params.mobile.length?this.$http({aurl:"getTelCode",params:{mobile:this.params.mobile},success:function(t){e.timeOut()},fail:function(e){console.log(e)}}):this.showAlert("请输入正确手机号")},timeOut:function(){var e=this;e.times.flag=!1;var t=setInterval((function(){e.times.time--,0===e.times.time&&(clearInterval(t),e.times.flag=!0,e.times.time=60)}),1e3)},bindPhoneNumber:function(t){var n=this;if("getPhoneNumber:ok"===t.detail.errMsg){var i={openid:this.openid,code:n.code,iv:encodeURIComponent(t.detail.iv),encryptedData:encodeURIComponent(t.detail.encryptedData)},a=e.getStorageSync("source"),o=e.getStorageSync("pid"),s=e.getStorageSync("aid"),r=e.getStorageSync("gid");a&&(i.source=a),o&&(i.pid=o),s&&(i.aid=s),r&&(i.gid=r);var c=e.getStorageSync("gmToken");c&&(i.gm_id=c),n.$http({aurl:"bindUser",data:i,success:function(t){e.setStorage({key:"user_token",data:t.data.result.token.access_token,success:function(){e.setStorage({key:"user_info",data:JSON.stringify(t.data.result.user_info),success:function(){e.hideLoading(),"cart"==n.flag?e.switchTab({url:"/pages/cart/cart"}):"index"==n.flag?e.switchTab({url:"/pages/index/indexCustomer"}):e.navigateBack({delta:2})}})}})},fail:function(e){console.log(e)}})}}},mounted:function(){}};t.default=a}).call(this,n("543d")["default"])},d45e:function(e,t,n){"use strict";n.r(t);var i=n("354b"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},e42d:function(e,t,n){"use strict";n.r(t);var i=n("2b74"),a=n("d45e");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("1a31");var s,r=n("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"1146d64b",null,!1,i["a"],s);t["default"]=c.exports},f4c7:function(e,t,n){}},[["25d0","common/runtime","common/vendor"]]]);