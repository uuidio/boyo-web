require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/point"],{3743:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("669a"));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(){e.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(e("fdd7"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("components/header/header").then(function(){return resolve(e("accd"))}.bind(null,e)).catch(e.oe)},r={mixins:[n.default],components:{meHeader:a,uniLoadMore:u},data:function(){return{loadText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"暂无更多数据"},loadStatus:"loading",loadMore:{current:1,last:1,flat:!1},currentNav:0,showPopup:!1,point:0,myPoint:0,pointProportion:0,gm_id:"",currentGroup:"",groupItems:[],detailedList:[],ruleInfo:{}}},onLoad:function(t){1==t.nav&&(this.currentNav=1),t.gm_id&&(this.gm_id=t.gm_id),this.getGroupItem()},onShow:function(){},mounted:function(){},onReachBottom:function(){var t=this;this.loadMore.flat||(this.loadStatus="loading",setTimeout((function(){0!==t.detailedList.length&&t.loadMore.current++,t.handleGetPointLog()}),500))},methods:{changeNav:function(t){this.currentNav=t},getPointRule:function(){var t=this;this.$http({aurl:"getRule",data:{gm_id:this.gm_id,type:0},success:function(o){0===o.data.code&&(t.ruleInfo=o.data.result)},fail:function(t){console.log(t)},complete:function(){}})},handleGetPointLog:function(){var t=this;this.$http({aurl:"getPointLog",data:{gm_id:this.gm_id},success:function(o){if(0===o.data.code){var e=o.data.result;e.data&&e.data.length>0&&(t.loadMore.last=e.last_page,e.data.map((function(o){t.detailedList.push(o)}))),t.loadMore.current===t.loadMore.last?(t.loadMore.flat=!0,t.loadStatus="noMore"):(t.loadStatus="more",t.loadMore.flat=!1)}},fail:function(t){console.log(t)},complete:function(){}})},onSelect:function(t){if(t.id===this.gm_id)return!1;this.currentGroup=t.platform_name,this.gm_id=t.gm_id,this.loadStatus="loading",this.loadMore={current:1,last:1,flat:!1},this.detailedList=[],this.getRefreshPoint(),this.getPointRule(),this.handleGetPointLog(),this.showPopup=!1},openPopup:function(){this.showPopup=!0},onClose:function(){this.showPopup=!1},getGroupItem:function(){var o=this;this.$http({aurl:"getIndexItem1",success:function(e){if(0===e.data.code&&(o.groupItems=e.data.result,o.groupItems.length>0&&!o.currentGroup)){var n=o.gm_id||t.getStorageSync("gmToken"),i=!1;if(n)for(var u=0;u<o.groupItems.length;u++)n==o.groupItems[u].gm_id&&(o.currentGroup=o.groupItems[u].platform_name,o.gm_id=o.groupItems[u].gm_id,i=!0);n&&i||(o.currentGroup=o.groupItems[0].platform_name,o.gm_id=o.groupItems[0].gm_id),o.getRefreshPoint(),o.handleGetPointLog(),o.getPointRule()}},fail:function(t){console.log(t)},complete:function(){}})},getRefreshPoint:function(){var t=this;this.$http({aurl:"refreshPoint",data:{gm_id:this.gm_id},success:function(o){0===o.data.code?t.myPoint=o.data.result.point:t.myPoint=0},fail:function(t){console.log(t)},complete:function(){}})}}};o.default=r}).call(this,e("543d")["default"])},4894:function(t,o,e){},"518e":function(t,o,e){"use strict";e.r(o);var n=e("3743"),i=e.n(n);for(var u in n)"default"!==u&&function(t){e.d(o,t,(function(){return n[t]}))}(u);o["default"]=i.a},"6cce":function(t,o,e){"use strict";(function(t){e("cf0c");n(e("66fd"));var o=n(e("db35"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"877b":function(t,o,e){"use strict";var n,i=function(){var t=this,o=t.$createElement;t._self._c},u=[];e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return u})),e.d(o,"a",(function(){return n}))},aed1:function(t,o,e){"use strict";var n=e("4894"),i=e.n(n);i.a},db35:function(t,o,e){"use strict";e.r(o);var n=e("877b"),i=e("518e");for(var u in i)"default"!==u&&function(t){e.d(o,t,(function(){return i[t]}))}(u);e("aed1");var a,r=e("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"7cf78036",null,!1,n["a"],a);o["default"]=c.exports}},[["6cce","common/runtime","common/vendor"]]]);