require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/user/bindUser"],{"0351":function(e,n,t){"use strict";t.r(n);var o=t("f6d5"),i=t("3d5f");for(var u in i)"default"!==u&&function(e){t.d(n,e,(function(){return i[e]}))}(u);t("37a3");var a,s=t("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"35cd5609",null,!1,o["a"],a);n["default"]=r.exports},"2be2":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=u(t("ed4a")),i=u(t("1d66"));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){t.e("components/bindModel/bindModel").then(function(){return resolve(t("14c0"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("components/button/button").then(function(){return resolve(t("3764"))}.bind(null,t)).catch(t.oe)},r={mixins:[o.default,i.default],components:{bindModel:a,emButton:s},data:function(){return{flag:!1,gmToken:0}},onLoad:function(e){e.gmToken&&(this.gmToken=e.gmToken),e.to&&("index"==e.to||"user"==e.to?this.flag=e.to:this.flag=!0)},methods:{initShow:function(e){this.showTel=e,this.toBack()},toLoginLink:function(){if(this.flag){if("index"===this.flag)return void this.toLink("/pagesA/user/login/login?flag=index&gmToken="+this.gmToken);if("user"===this.flag)return void this.toLink("/pagesA/user/login/login?flag=user");this.toLink("/pagesA/user/login/login?flag=true")}else this.toLink("/pagesA/user/login/login")},bindGetUserInfo:function(n){var t=this;n.detail.userInfo&&e.login({provider:"weixin",success:function(n){e.getUserInfo({provider:"weixin",lang:"zh_CN",success:function(o){e.showLoading({title:"授权中..."});var i=e.getStorageSync("gmToken");t.$http({aurl:"getOpenid",data:{code:n.code,iv:encodeURIComponent(o.iv),encryptedData:encodeURIComponent(o.encryptedData),gm_id:i},success:function(n){e.hideLoading(),e.removeStorageSync("user_token_jump"),""==n.data.result.token?t.toQueryLink("/pagesA/user/login/login",{open_id:n.data.result.openid,flag:t.flag}):(e.showLoading({title:"登录中..."}),e.setStorage({key:"user_token",data:n.data.result.token.access_token,success:function(){var o=1e3*n.data.result.token.expires_in+(new Date).getTime()-432e5;e.setStorageSync("user_token_invalid",o),e.setStorage({key:"user_info",data:JSON.stringify(n.data.result.user_info),success:function(){e.hideLoading(),t.gmToken&&e.setStorageSync("gmToken",t.gmToken),t.flag?("index"==t.flag&&e.switchTab({url:"/pages/index/indexCustomer?gmToken"+t.gmToken}),"user"==t.flag?e.switchTab({url:"/pages/user/index"}):e.switchTab({url:"/pages/cart/cart"})):t.back()}})}}))},fail:function(e){console.log(e)}})}})}})}},mounted:function(){}};n.default=r}).call(this,t("543d")["default"])},"37a3":function(e,n,t){"use strict";var o=t("f082"),i=t.n(o);i.a},"3d5f":function(e,n,t){"use strict";t.r(n);var o=t("2be2"),i=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,(function(){return o[e]}))}(u);n["default"]=i.a},cbd7:function(e,n,t){"use strict";(function(e){t("cf0c");o(t("66fd"));var n=o(t("0351"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},f082:function(e,n,t){},f6d5:function(e,n,t){"use strict";var o={bindModel:function(){return t.e("components/bindModel/bindModel").then(t.bind(null,"14c0"))}},i=function(){var e=this,n=e.$createElement;e._self._c},u=[];t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return o}))}},[["cbd7","common/runtime","common/vendor"]]]);