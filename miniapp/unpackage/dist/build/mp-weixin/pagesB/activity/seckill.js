require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/activity/seckill"],{"0274":function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=o(n("669a"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){n.e("components/lists/nullData").then(function(){return resolve(n("0bb9"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("node-modules/_@dcloudio_uni-ui@1.2.5@@dcloudio/uni-ui/lib/uni-count-down/uni-count-down").then(function(){return resolve(n("b840"))}.bind(null,n)).catch(n.oe)},l={mixins:[e.default],onLoad:function(t){t.gm_id&&(this.gm_id=t.gm_id),this.menuButtonInfo=wx.getMenuButtonBoundingClientRect(),this.diyHeight=this.menuButtonInfo.height,this.initTime=this.toTimeStamp(this.toFullTime())/1e3},onPullDownRefresh:function(){this.seckillLists()},onShow:function(){this.seckillLists()},data:function(){return{gm_id:"",ndConfig:{tip:"暂无秒杀活动～",bgColor:"#fff",noGoods:"暂无商品参加秒杀～"},cs:!0,isShowAct:!0,diyHeight:0,menuButtonInfo:0,diy:{title:"秒杀活动"},currentIndex:0,timeTab:[],goodsList:[],downSecond:0,dwonMs:0,initTime:0,lists:[],selectIndex:0,showFlag:!1,showItem:{}}},methods:{toIndex:function(){t.switchTab({url:"/pages/index/indexCustomer"})},changeTab:function(t){},seckillChange:function(t){this.selectIndex=t,this.seckillLists()},toTimeStamp:function(t){t=t.replace(/-/g,"/");var i=new Date(t);return i.getTime()},toTime:function(t){var i=Math.floor(t/1e3);this.downSecond=i},toFullTime:function(){var t=[0,0,0,0,0],i=t[0],n=t[1],e=t[2],o=t[3],s=t[4],c=t[5],l=t[6],a=new Date;return i=a.getFullYear(),n=a.getMonth()+1,e=a.getDate().toString().padStart(2,"0"),o=a.getHours().toString().padStart(2,"0"),s=a.getMinutes().toString().padStart(2,"0"),c=a.getSeconds().toString().padStart(2,"0"),l="".concat(i,"-").concat(n,"-").concat(e," ").concat(o,":").concat(s,":").concat(c),l},toDetail:function(i){var n=i.currentTarget.dataset.index,e=this.goodsList[n].seckill_ap_id,o=this.goodsList[n].sku_id,s=this.goodsList[n].goods_id,c=this.gm_id;t.navigateTo({url:"./seckillDetail?activity_id=".concat(e,"&sku_id=").concat(o,"&goods_id=").concat(s,"&gm_id=").concat(c)})},getSeckili:function(){var i=this;this.$http({aurl:"seckill",data:{gm_id:this.gm_id},success:function(n){t.stopPullDownRefresh();var e=n.data.result;if(0!==e.length){i.timeTab=e.sec_kill_list,i.goodsList=e.now_activiy_goods_list;var o=i.timeTab[i.currentIndex].end_time;i.dwonMs=i.toTimeStamp(o)-i.toTimeStamp(i.toFullTime()),i.toTime(i.dwonMs)}else i.currentIndex=-1,i.isShowAct=!1},fail:function(t){console.log(t)}})},seckillLists:function(){var i=this;this.showFlag=!1,this.$http({aurl:"getPeriods",data:{gm_id:this.gm_id},success:function(n){t.stopPullDownRefresh(),i.lists=n.data.result.sec_kill_list;for(var e=0;e<i.lists.length;e++){var o=i.lists[e].start_time.substr(0,11),s=i.lists[e].start_time.substr(11);i.lists[e].day=o,i.lists[e].time=s}if(i.lists.length>0){if(i.getSeckillGoods(i.lists[i.selectIndex].id),i.showItem=i.lists[i.selectIndex].validstatus_sign,1==i.showItem.sign){var c=i.lists[i.selectIndex].end_time;i.dwonMs=i.toTimeStamp(c)-i.toTimeStamp(i.toFullTime())}else if(-1==i.showItem.sign){var l=i.lists[i.selectIndex].start_time;i.dwonMs=i.toTimeStamp(l)-i.toTimeStamp(i.toFullTime())}i.toTime(i.dwonMs),i.showFlag=!0}},fail:function(t){console.log(t)}})},getSeckillGoods:function(t){var i=this,n={id:t,gm_id:this.gm_id};this.$http({aurl:"seckillGoods",params:n,success:function(t){i.goodsList=t.data.result.activiy_goods_list},fail:function(t){console.log(t)}})}},mounted:function(){},components:{uniCountdown:c,nullData:s}};i.default=l}).call(this,n("543d")["default"])},"18f6":function(t,i,n){},"7e6c":function(t,i,n){"use strict";var e,o=function(){var t=this,i=t.$createElement;t._self._c},s=[];n.d(i,"b",(function(){return o})),n.d(i,"c",(function(){return s})),n.d(i,"a",(function(){return e}))},aec6:function(t,i,n){"use strict";(function(t){n("cf0c");e(n("66fd"));var i=e(n("d01e"));function e(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("543d")["createPage"])},c8cf:function(t,i,n){"use strict";n.r(i);var e=n("0274"),o=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(i,t,(function(){return e[t]}))}(s);i["default"]=o.a},d01e:function(t,i,n){"use strict";n.r(i);var e=n("7e6c"),o=n("c8cf");for(var s in o)"default"!==s&&function(t){n.d(i,t,(function(){return o[t]}))}(s);n("f96c");var c,l=n("f0c5"),a=Object(l["a"])(o["default"],e["b"],e["c"],!1,null,"e534b6da",null,!1,e["a"],c);i["default"]=a.exports},f96c:function(t,i,n){"use strict";var e=n("18f6"),o=n.n(e);o.a}},[["aec6","common/runtime","common/vendor"]]]);