require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/goods/goodsCode"],{"59b0":function(t,e,o){},"70e5":function(t,e,o){"use strict";o.r(e);var i=o("906a"),n=o("c766");for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("ccb7");var a,c=o("f0c5"),r=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"66a24aaf",null,!1,i["a"],a);e["default"]=r.exports},"754f":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){o.e("components/lists/nullData").then(function(){return resolve(o("0bb9"))}.bind(null,o)).catch(o.oe)},n={components:{noData:i},computed:{selectLists:function(){return this.imgLists.filter((function(t){return t.flag}))}},onShareAppMessage:function(e){var o=t.getStorageSync("user_info"),i=JSON.parse(o).user_id,n="/pagesA/goods/detail?g="+this.goods_id+"&t=goods&p="+i;return console.log(n),this.goodsShare(i),{title:"有好东西分享给你,快来看看",path:n,imageUrl:this.detail.goods_image,success:function(t){console.log("分享成功")}}},data:function(){return{goods_id:"",codeLodding:!1,detail:{},template:"",imagePath:"",active:0,imgLists:[],flagLists:[]}},onLoad:function(e){t.hideShareMenu(),t.showLoading({title:"加载中"}),this.goods_id=e.id,this.getDetail()},methods:{copeCode:function(){t.setClipboardData({data:String(this.detail.promo_article),success:function(e){t.getClipboardData({success:function(e){t.showToast({title:"已复制到剪贴板"})}})}})},goodsShare:function(t){this.$http({aurl:"userShare",data:{share_type:"goods",fid:t},success:function(t){console.log(t)},fail:function(t){console.log(t)},complete:function(t){}})},initData:function(){this.template={background:"#fff",width:"700rpx",height:"930rpx",borderRadius:"20rpx",views:[{type:"image",url:this.detail.shop.shop_logo,css:{top:"20rpx",left:"20rpx",width:"70rpx",height:"70rpx"}},{type:"image",url:this.detail.goods_image,css:{top:"100rpx",left:"180rpx",width:"340rpx",height:"340rpx"}},{type:"image",url:"https://egoss1.ytholidayplaza.com/images/default/202005/12/ucbztGijMeXL0y231oV3ASDawuaVxawhuzxSr3of.jpeg",css:{top:"570rpx",left:"0rpx",width:"700rpx",height:"50rpx"}},{type:"text",text:this.detail.goods_name,css:{maxLines:2,top:"480rpx",left:"20rpx",width:"500rpx",fontSize:"32rpx",lineHeight:"40rpx"}},{type:"text",text:"￥"+this.detail.goods_price,css:{top:"480rpx",right:"20rpx",width:"200rpx",textAlign:"right",fontSize:"32rpx",lineHeight:"40rpx",color:"red"}},{type:"text",text:"价格￥"+this.detail.goods_marketprice,css:{top:"530rpx",right:"20rpx",width:"200rpx",textAlign:"right",fontSize:"24rpx",lineHeight:"40rpx",color:"#666"}},{type:"image",url:this.code,css:{bottom:"118rpx",left:"126rpx",width:"140rpx",height:"140rpx"}},{type:"text",text:"极汇Go小程序",css:{bottom:"56rpx",left:"102rpx",width:"200rpx",textAlign:"center",fontSize:"26rpx",lineHeight:"30rpx",color:"#333"}},{type:"image",url:"https://egoss1.ytholidayplaza.com/images/default/202005/12/ZX0T5hn5sBv04U2saZW0MpxdvbvXm714aH8tY0q3.jpeg",css:{bottom:"57rpx",right:"126rpx",width:"146rpx",height:"200rpx"}}]}},selectImg:function(t,e){t.flag=!t.flag},getDetail:function(){var t=this;this.$http({aurl:"getWxMiniGoodsPerson",params:{id:this.goods_id},success:function(e){0===e.data.code&&(console.log(e),t.detail=e.data.result.goods_info,t.code=e.data.result.wx_mini_goods_person_qr,t.detail.img_material&&t.detail.img_material.length>0&&(t.imgLists=t.detail.img_material.map((function(t){return{url:t.url,flag:!1}}))),t.initData())},fail:function(t){console.log(t)},complete:function(t){}})},onImgOK:function(e){console.log(e),this.imagePath=e.detail.path,this.codeLodding=!0,t.hideLoading()},imgErr:function(e){t.hideLoading(),t.showModal({title:"提示",content:"生成海报失败，重新生成一下吧",showCancel:!1})},save:function(e){t.saveImageToPhotosAlbum({filePath:e,success:function(e){t.showToast({title:"保存成功",icon:"none"})},fail:function(e){t.getSetting({success:function(e){var o=e.authSetting;o["scope.writePhotosAlbum"]||t.showModal({title:"提示",content:"您未开启保存图片到相册的权限，请点击确定去开启权限！",success:function(e){e.confirm&&t.openSetting()}})}})}})},downloadImgs:function(){var e=this;t.getSetting({success:function(o){var i=o.authSetting;if(i["scope.writePhotosAlbum"]){var n=e;t.showLoading({title:"加载中",mask:!0}),n.queue(n.selectLists).then((function(e){t.hideLoading(),t.showToast({title:"下载完成"})})).catch((function(e){t.hideLoading(),console.log(e)}))}else t.showModal({title:"提示",content:"您未开启保存图片到相册的权限，请点击确定去开启权限！",success:function(e){e.confirm&&t.openSetting()}})}})},queue:function(t){var e=this,o=Promise.resolve();return t.forEach((function(t,i){o=o.then((function(){return e.download(t.url)}))})),o},download:function(e){return new Promise((function(o,i){t.downloadFile({url:e,success:function(e){var n=e.tempFilePath;t.saveImageToPhotosAlbum({filePath:n,success:function(t){o(t)},fail:function(t){i(e)}})},fail:function(t){i(t)}})}))},saveImg:function(){this.save(this.imagePath)},getImgs:function(){this.downloadImgs()}},mounted:function(){}};e.default=n}).call(this,o("543d")["default"])},"906a":function(t,e,o){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.active=0},t.e1=function(e){t.active=1})},s=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return i}))},c766:function(t,e,o){"use strict";o.r(e);var i=o("754f"),n=o.n(i);for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},ca93:function(t,e,o){"use strict";(function(t){o("cf0c");i(o("66fd"));var e=i(o("70e5"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},ccb7:function(t,e,o){"use strict";var i=o("59b0"),n=o.n(i);n.a}},[["ca93","common/runtime","common/vendor"]]]);