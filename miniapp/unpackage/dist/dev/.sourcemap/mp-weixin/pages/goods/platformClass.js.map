{"version":3,"sources":["uni-app:///main.js","webpack:////Users/huangdahao/Desktop/web/smartconns_go/miniapp/pages/goods/platformClass.vue?972b","webpack:////Users/huangdahao/Desktop/web/smartconns_go/miniapp/pages/goods/platformClass.vue?b080","webpack:////Users/huangdahao/Desktop/web/smartconns_go/miniapp/pages/goods/platformClass.vue?8943","webpack:////Users/huangdahao/Desktop/web/smartconns_go/miniapp/pages/goods/platformClass.vue?6fc2","uni-app:///pages/goods/platformClass.vue","webpack:////Users/huangdahao/Desktop/web/smartconns_go/miniapp/pages/goods/platformClass.vue?d3fa","webpack:////Users/huangdahao/Desktop/web/smartconns_go/miniapp/pages/goods/platformClass.vue?293a"],"names":["createPage","Page"],"mappings":"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gCAFA;AAGA;AACA;AACA;AACA;AACA;AACA,WARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;;AAMA;AACA;AACA,6BADA;AAEA,kBAFA;AAGA;AACA;AACA;AACA,SANA;AAOA;AACA;AACA,SATA;;AAWA,KA1EA;AA2EA,QA3EA,kBA2EA;AACA;AACA;AACA;AACA,KA/EA;AAgFA,YAhFA,sBAgFA;AACA;AACA;AACA;AACA;AACA,4CADA;;AAGA;AACA,yBADA;AAEA,oBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAnBA;AAoBA;AACA;AACA,SAtBA;;AAwBA,KA/GA;AAgHA,YAhHA,sBAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OANA;AAOA,KAzHA;AA0HA,iBA1HA,2BA0HA;AACA;AACA,KA5HA;AA6HA,UA7HA,oBA6HA;AACA;AACA;AACA,KAhIA;AAiIA,WAjIA,mBAiIA,UAjIA,EAiIA;AACA;AACA;AACA;AACA,sCADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA,oBAFA;AAGA,iCAHA;AAIA,qBAJA;;AAMA;AACA,uBADA;AAEA,kBAFA;AAGA;AACA;AACA,4BADA;;AAGA;AACA;AACA,SATA;AAUA;AACA;AACA,oCADA;AAEA,wBAFA;;AAIA,SAfA;AAgBA;AACA;AACA,SAlBA;;AAoBA,KAvKA;AAwKA,WAxKA,mBAwKA,IAxKA,EAwKA,KAxKA,EAwKA;AACA;AACA;AACA;AACA;AACA;AACA,KA9KA;AA+KA,gBA/KA,0BA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,EAIA,GAJA;AAKA;AACA,KA/LA;AAgMA,gBAhMA,wBAgMA,IAhMA,EAgMA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,4BAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA,SAfA;AAgBA;AACA;AACA,SAlBA;AAmBA;AACA;AACA;AACA,SAtBA;;AAwBA,KAnOA;AAoOA,cApOA,wBAoOA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SARA;AASA;AACA;AACA,SAXA;;AAaA,KAlPA;AAmPA,UAnPA,oBAmPA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;;AAGA,KA3PA;AA4PA;AACA,YA7PA,oBA6PA,OA7PA,EA6PA,GA7PA,EA6PA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SAPA,MAOA;AACA;AACA;AACA;AACA,KAjRA;AAkRA,gBAlRA,wBAkRA,MAlRA,EAkRA,IAlRA,EAkRA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,KA3RA;AA4RA;AACA,YA7RA,sBA6RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAvSA;AAwSA,UAxSA,oBAwSA;AACA;AACA,mCADA;;AAGA,KA5SA,EAjIA,E;;;;;;;;;;;;;ACjIA;AAAA;AAAA;AAAA;AAA8jD,CAAgB,o6CAAG,EAAC,C;;;;;;;;;;;ACAllD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/goods/platformClass.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/goods/platformClass.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./platformClass.vue?vue&type=template&id=3024f8e3&scoped=true&\"\nvar renderjs\nimport script from \"./platformClass.vue?vue&type=script&lang=js&\"\nexport * from \"./platformClass.vue?vue&type=script&lang=js&\"\nimport style0 from \"./platformClass.vue?vue&type=style&index=0&id=3024f8e3&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3024f8e3\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/goods/platformClass.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./platformClass.vue?vue&type=template&id=3024f8e3&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.categoryData, function(item, index) {\n    var l0 = _vm.__map(_vm.goodsLists, function(goods_item, goods_index) {\n      var m0 = _vm.pickType(goods_item.pick_type)\n      return {\n        $orig: _vm.__get_orig(goods_item),\n        m0: m0\n      }\n    })\n\n    return {\n      $orig: _vm.__get_orig(item),\n      l0: l0\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      _vm.cartShow = !_vm.cartShow\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./platformClass.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./platformClass.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!--<view class=\"em-searchbox\">-->\n    <!--<view class=\"em-search-input\" @tap=\"search\">-->\n    <!--&lt;!&ndash; #ifdef APP-PLUS || MP &ndash;&gt;-->\n    <!--<icon type=\"search\" size=\"13\" color=\"#999\"></icon>-->\n    <!--&lt;!&ndash; #endif &ndash;&gt;-->\n    <!--<text class=\"em-search-text\">输入关键词搜索</text>-->\n    <!--</view>-->\n    <!--</view>-->\n    <view class=\"mp-search-box\" :style=\"{ boxSizing: 'border-box', height: myHeight + 'px', paddingTop: myTop + 'px', paddingRight: myRight + 'px' }\">\n      <view class=\"index-header\">\n        <text class=\"my-text\">分类</text>\n        <input class=\"ser-input\" type=\"text\" value=\"输入关键字搜索\" disabled @tap=\"search\" />\n      </view>\n    </view>\n    <view class=\"content-box\" :style=\"{paddingBottom:toolHeight + 'px'}\">\n      <scroll-view scroll-y scroll-with-animation class=\"tab-view\" :scroll-top=\"scrollTop\" :style=\"{height: height + 'px', top: myHeight + 'px' }\">\n        <view\n            v-for=\"(item, index) in categoryData\"\n            :key=\"index\"\n            class=\"tab-bar-item\"\n            :class=\"[currentTab == index ? 'active' : '']\"\n            @tap.stop=\"swichNav(item,index)\"\n        >\n          <text class=\"text-ellipsis\">{{ item.label }}</text>\n        </view>\n      </scroll-view>\n      <view class=\"bc-fff right-box\" :style=\"{ height: height + 'px', top: myHeight + 'px' }\">\n        <block v-for=\"(item, index) in categoryData\" :key=\"index\">\n          <scroll-view scroll-x scroll-with-animation v-if=\"item.children && item.children.length && currentTab == index\" class=\"item-tab-view\" :style=\"{ top: myHeight + 'px' }\">\n            <block v-for=\"(twoItem, twoIndex) in item.children\" :key=\"twoIndex\">\n              <view\n                class=\"class-item-tab\"\n                :class=\"[currentItemTab == lv2.value ? 'item-tab-active' : '']\"\n                v-for=\"(lv2,lv2Index) in twoItem.children\"\n                :key=\"lv2.value\"\n                @tap.stop=\"itemTabClick(lv2.value,lv2.value)\"\n              >\n                {{ lv2.label }}\n              </view>\n            </block>\n          </scroll-view>\n          <scroll-view v-if=\"currentTab == index\" scroll-y @scrolltolower=\"onMainBottom\" class=\"right-box\" :style=\"{ height: height + 'px', top: myHeight + 'px' }\">\n            <!--内容部分 start 自定义可删除-->\n            <view class=\"page-view\" :style=\"{paddingTop: currentTab == 0 ? '0' : '80rpx'}\">\n              <view class=\"class-box\">\n                <view class=\"goods-box\" v-if=\"goodsLists.length\">\n                  <view class=\"ticket-item\" v-for=\"(goods_item,goods_index) in goodsLists\" :key=\"goods_index\" @tap.stop=\"toGoodsDetail(goods_item.id)\">\n                    <view class=\"goods-item fxBox1 pt-md pb-md\">\n                      <view class=\"goods-image mr-md\">\n                        <image src=\"/static/images/500x500.jpg\" mode=\"widthFix\" v-if=\"!showArr[goods_index] && showImg\"></image>\n                        <image lazy-load v-show=\"showArr[goods_index]\" @load=\"loadImg(goods_item,goods_index)\" :src=\"goods_item.goods_image\" mode=\"widthFix\"></image>\n                      </view>\n                      <view class=\"goods-info fx1 pt-xs pb-xs\">\n                        <view>\n                          <view class=\"line2-p text-13 fw700\">{{goods_item.goods_name}}</view>\n                          <view class=\"mt-xs col-666 text-sm\">\n                            配送方式：{{pickType(goods_item.pick_type)}}\n                          </view>\n                        </view>\n                        <view class=\"fxBox2 pr-md\">\n                          <text class=\"price-box text-13 col-red\">￥{{goods_item.goods_price}}</text>\n                          <text @tap.stop=\"addCart(goods_item)\" class=\"iconfont icon-add1 text-l text-white\"></text>\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                  <uni-load-more :status=\"loadStatus\"></uni-load-more>\n                </view>\n                <view v-if=\"!item.children && !item.children.length && currentTab!=0 || !goodsLists.length\" class=\"text-center col-666\" style=\"padding-top:100px\">\n                 <view>\n                   <text class=\"iconfont icon-emoji\" style=\"font-size: 60px;\"></text>\n                 </view>\n                  <view>\n                    持续上新中~\n                  </view>\n                </view>\n              </view>\n            </view>\n            <!--内容部分 end 自定义可删除-->\n          </scroll-view>\n        </block>\n      </view>\n    </view>\n    <view class=\"tool-box fxBox2 pl-md\">\n      <view class=\"fxBox1\" @click.stop=\"cartShow = !cartShow\">\n        <text class=\"iconfont icon-cartfill text-xl\"></text>\n        <view class=\"text-md ml-sm\">合计：<text class=\"col-red text-bold text-l\">￥{{totalPrice}}</text></view>\n      </view>\n      <button :disabled=\"!cartGoodsNum\" class=\"submit-btn\" :style=\"{height: toolHeight + 'px',lineHeight: toolHeight + 'px'}\" @click=\"submit\">\n        <text>结算({{cartGoodsNum}})</text>\n      </button>\n    </view>\n    <tui-bottom-popup class=\"cart-box\" :show=\"cartShow\" :zIndex=\"1100\" :bottom=\"98\" @close=\"cartHidePopup\">\n      <view class=\"cart-box-title pl-md text-sm\">已选商品（{{goods.length}}）</view>\n      <scroll-view scroll-y class=\"cart-box-scroll\" v-if=\"goods.length\">\n        <!-- <block v-for=\"(item,index) in lists\" :key=\"index\"> -->\n          <view class=\"cart-goods-item fxBox2 m-md p-md\" v-for=\"(cartGoods_item,cartGoods_index) in goods\" :key=\"cartGoods_item.id\">\n            <view class=\"cart-goods-image mr-md\">\n              <image lazy-load :src=\"cartGoods_item.goods_image\" mode=\"widthFix\"></image>\n            </view>\n            <view class=\"fx1 cart-goods-info\">\n              <view class=\"goods-title text-13 fw700\">{{cartGoods_item.goods_name}}</view>\n              <view v-if=\"cartGoods_item.sku_info\" class=\"col-666 mt-md text-sm\">{{cartGoods_item.sku_info.sku_info}}</view>\n              <view class=\"text-13 col-red mt-md\">￥{{cartGoods_item.goods_price}}</view>\n            </view>\n            <van-stepper :min=\"0\" :data-id=\"cartGoods_item.id\" @change=\"numChange\" input-class=\"col000\" button-size=\"20px\" integer async-change disable-input :value=\"cartGoods_item.quantity\"/>\n          </view>\n        <!-- </block> -->\n      </scroll-view>\n      <view v-else class=\"cart\">\n        <view class=\"cart-icon\">\n          <image src=\"/static/icon/empty-cart.png\"></image>\n          <text class=\"text-md text-light\" style=\"display: block;\">去添加点什么吧</text>\n        </view>\n      </view>\n    </tui-bottom-popup>\n    <tab-bar ref=\"tabbar\" class=\"tab-bar-fixs\" :actives='1'></tab-bar>\n  </view>\n</template>\n\n<script>\n  import global from '../../mixins/global.js';\n  import uniLoadMore from '@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.vue';\n  import selectSku from '../../components/selectSku/selectSku.vue';\n  import tuiBottomPopup from '../../components/bottom-popup/bottom-popup';\n  import tuiNumberbox from '../../components/numberbox/numberbox';\n  import tabBar from '../../components/tabbar/tabbar.vue';\n  export default {\n    mixins: [global],\n    components: {\n    \tuniLoadMore,\n      selectSku,\n      tuiBottomPopup,\n      tuiNumberbox,\n      tabBar\n    },\n    computed: {\n        pickType(){\n          return function(params){\n            const arr = params.concat([]);\n            for(let i=0;i<arr.length;i++){\n              if(arr[i]==='0'){\n                arr[i] = '快递'\n              }else if(arr[i]==='1'){\n                arr[i] = '自提'\n              }else if(arr[i]==='2'){\n                arr[i] = '配送到家'\n              }\n            }\n            return arr.toString()\n          }\n        },\n        toolHeight() {\n          return uni.upx2px(98);\n        },\n        cartGoodsNum() {\n          return this.goods.length\n        },\n        totalPrice() {\n          let total = this.goods.reduce(\n            (total, item) => {\n              return total + (item.goods_price * 100 * item.quantity)\n            }, 0);\n          return (total / 100).toFixed(2)\n        },\n    },\n    data() {\n      return {\n        categoryData: [],\n        height: 0, //scroll-view高度\n        currentTab: 0, //预设当前项的值\n        scrollTop: 0 ,//tab标题的滚动条位置\n        isVx:false,\n        tel:'',\n        currentItemTab: 0,\n        listParam: {},\n        pullUpOn: true,\n        goodsLists:[],\n        showArr: [],\n        showImg:true,\n        // sku组件相关\n        popupShow: false,\n        itemDetail: {},\n        isSubmit: true,\n        cartShow: false,\n        numberValue: 1,\n        lists: [],\n        addFlag:false,\n        goods: [],\n        loading:true,\n      };\n    },\n    onHide() {\n      this.popupShow = false;\n      this.cartShow = false\n    },\n    onShow(){\n      let tempToken = uni.getStorageSync('user_token');\n      this.getCartNum();\n      if(tempToken){\n        this.getLists();\n      }else{\n        uni.redirectTo({\n          url: '/pagesB/user/bindUser?to=class',\n        });\n      }\n    },\n    onLoad(options) {\n      uni.hideShareMenu();\n      this.getShopTel();\n      // #ifdef MP-WEIXIN\n      this.isVx = true\n      // #endif\n      uni.getSystemInfo({\n        success: res => {\n          let header = 92;\n          // #ifdef H5\n          header = 0;\n          // #endif\n          this.height = res.windowHeight - uni.upx2px(header) - this.toolHeight;\n        }\n      });\n    },\n    mounted() {\n      const params = {\n        gm_id:uni.getStorageSync('gmToken')\n      };\n      this.$http({\n        aurl: 'getCategory',\n        params,\n        success: res => {\n          // console.log(res);\n          let dataArr = res.data.result;\n          if (dataArr.length > 0) {\n            const obj = {\n              class_level: 1,\n              label: \"全部\",\n              parent_id: 0,\n              type_id: 0,\n              type_name: \"0\",\n              value: \"all\",\n            };\n            dataArr.unshift(obj);\n            this.categoryData = dataArr;\n            this.getGoodsList(true)\n            // console.log(this.categoryData);\n          }\n        },\n        fail: err => {\n          uni.showToast({\n            title:'请求超时，请稍后再重试',\n            icon:'none'\n          })\n        }\n      });\n    },\n    methods: {\n      getCartNum() {\n        if(this.$refs.tabbar){\n          this.$refs.tabbar.initCartNumber()\n        }\n      },\n      onDelete(delData) {\n        this.$http({\n          aurl:'cartDelete',\n          data:{\n            cart_id: delData\n          },\n          success:res => {\n            uni.showToast({\n              icon: 'none',\n              title: \"删除成功\"\n            });\n            this.deleteWap(delData[0]);\n            this.getCartNum()\n          },\n          fail:error => {\n            console.log(error)\n          }\n        })\n      },\n      deleteWap(delID) {\n        // 删除购物车对应数据\n        this.goods.forEach((goods_item,i)=>{\n          if(goods_item.id === delID){\n            this.goods.splice(i, 1)\n          }\n        })\n      },\n      numChange(item){\n        console.log(item);\n        const data = {\n          cart_id:item.currentTarget.dataset.id,\n          quantity:item.detail\n        };\n        if(item.detail === 0) {\n          // 等于0询问是否删除该商品\n          uni.showModal({\n            title: '提示',\n            content: '是否删除该购物车商品？',\n            success: (res)=> {\n              if (res.confirm) {\n                this.onDelete([data.cart_id]);\n                this.getCartNum();\n              }\n            }\n          });\n          return\n        }\n        if(item.detail===''){\n          return\n        }\n        this.goods.forEach((goods_item)=>{\n          if(goods_item.id === data.cart_id){\n            goods_item.quantity = item.detail\n          }\n        })\n        \n        // console.log(this.goods);\n        this.$http({\n          aurl:'cartNumUpdate',\n          data:data,\n          success:res => {\n            this.getCartNum()\n            // this.getActList()\n          },\n          fail:error => {\n            console.log(error)\n          }\n        })\n      },\n      init(){\n        this.goods = []\n        this.lists = []\n        this.loading = true\n      },\n      getLists(){\n        // uni.showLoading({\n        //   title: '加载中'\n        // });\n        const params = {\n          gm_id:uni.getStorageSync('gmToken')\n        };\n        this.$http({\n          aurl:'cartLists',\n          data:params,\n          success:res => {\n            this.init();\n            for(let i = 0;i<res.data.result.lists.length;i++){\n               const item = res.data.result.lists[i]\n              for(let j = item.goods_lists.length-1;j>=0;j--){\n                 if(item.goods_lists[j].goods_info.goods_state===0||item.goods_lists[j].unusual){\n                   item.goods_lists.splice(j,1)\n                 }\n              }\n              if(item.goods_lists.length>0){\n                this.lists.push(item)\n              }\n            }\n            this.initData()\n            // uni.hideLoading()\n            // this.loading=false\n          },\n          fail:error => {\n            console.log(error)\n          }\n        })\n      },\n      initData() {\n        this.goods = [];\n        this.lists.forEach((item, index) => {\n          item.goods_lists.forEach((goods_item) => {\n            if (goods_item.is_checked === 1) {\n              this.goods.push(goods_item)\n            }\n          })\n        });\n      },\n      cartHidePopup() {\n        this.cartShow = false\n      },\n      submit() {\n        uni.removeStorageSync('type');\n        this.needTokenLink('/pagesA/checkout/index')\n      },\n      addCart(itemDetail) {\n        let tempToken = uni.getStorageSync('user_token');\n        if (!tempToken) {\n          uni.navigateTo({\n            url: '/pagesA/user/bindUser',\n          });\n          return false\n        }\n        if(this.addFlag){\n          return false\n        }\n        this.addFlag = true;\n        let data = {\n          quantity: 1,\n          type: 'cart',\n          sku_id: itemDetail.sku.id,\n          is_checked: 1\n        };\n        this.$http({\n          aurl: 'addCart',\n          data: data,\n          success: res => {\n            uni.showToast({\n              title: '加入购物车成功'\n            });\n            this.getCartNum();\n            this.getLists()\n          },\n          fail: error => {\n            uni.showToast({\n              title: error.message.msg,\n              icon: 'none'\n            });\n          },\n          complete:res=>{\n            this.addFlag = false\n          }\n        });\n      },\n      loadImg(item,index) {\n        this.showImg = false;\n        if(item.goods_image){\n          this.$set(this.showArr, index, true);\n        }\n        this.showImg = true\n      },\n      onMainBottom() {\n        if (!this.pullUpOn) return;\n        this.loadding = true;\n        this.loadStatus = 'loading';\n        if (this.listParam.page === this.listParam.lastPage) {\n        \tthis.loadding = false;\n        \tthis.pullUpOn = false;\n        \tthis.loadStatus = 'noMore';\n        } else {\n        \tthis.listParam.page++;\n        \tsetTimeout(() => {\n        \t\tthis.getGoodsList();\n        \t\tthis.loadding = false;\n        \t\tthis.loadStatus = 'more';\n        \t}, 300);\n        }\n      },\n      getGoodsList(init) {\n        uni.showLoading({\n          title: '加载中'\n        });\n        this.loadding = true;\n      \tif (init) {\n      \t\tthis.listParam.page = 1;\n      \t\tthis.goodsLists = [];\n      \t\tthis.pullUpOn = true;\n      \t}\n      \tthis.listParam.gm_id = uni.getStorageSync('gmToken');\n      \tthis.$http({\n      \t\taurl: 'getCateList',\n      \t\tdata: this.listParam,\n      \t\tsuccess: res => {\n      \t\t\tif (init) {\n      \t\t\t\tthis.listParam.lastPage = res.data.result.last_page;\n      \t\t\t\tif (this.listParam.lastPage === 1) {\n      \t\t\t\t\tthis.loadding = false;\n      \t\t\t\t\tthis.pullUpOn = false;\n      \t\t\t\t\tthis.loadStatus = 'noMore';\n      \t\t\t\t}\n      \t\t\t}\n      \t\t\tres.data.result.data.forEach(item => {\n      \t\t\t\tthis.goodsLists.push(item);\n      \t\t\t});\n      \t\t},\n      \t\tfail: err => {\n      \t\t\tconsole.log(err);\n      \t\t},\n          complete:res=>{\n            uni.hideLoading()\n            this.loadding = false;\n          }\n      \t});\n      },\n      getShopTel() {\n        this.$http({\n          aurl: 'getShopTel',\n          success: res => {\n            if (res.data.code === 0) {\n              if (res.data.result.mobile) {\n                this.tel = res.data.result.mobile;\n              }\n            }\n          },\n          fail: err => {\n            console.log(err);\n          }\n        });\n      },\n      callUp() {\n        if (!this.tel) {\n          this.showAlert('暂未设置客服电话');\n          return;\n        }\n        uni.makePhoneCall({\n          phoneNumber: String(this.tel)\n        });\n      },\n      // 点击标题切换当前页时改变样式\n      swichNav(barItem,cur) {\n        if (this.currentTab == cur || this.loadding == true) {\n          return false;\n        } else {\n          this.currentTab = cur;\n          this.checkCor();\n          if(cur == 0) {\n            this.listParam.gc_id = ''\n            this.getGoodsList(true)\n          } else if (barItem.children && barItem.children.length) {\n            //有二级分类时重置二级分类下标为0并获取商品\n            if(barItem.children[0].children && barItem.children[0].children.length) {\n              this.itemTabClick(barItem.children[0].children[0].value,barItem.children[0].children[0].value,false)\n            } else {\n              this.goodsLists = [];\n            }\n          } else {\n            this.goodsLists = [];\n          }\n        }\n      },\n      itemTabClick(tabVal,pcId,init=true) {\n        if (this.currentItemTab == tabVal && init || this.loadding == true) {\n          return false;\n        } else {\n          this.currentItemTab = tabVal;\n          this.listParam.gc_id = pcId\n          this.getGoodsList(true)\n          // this.checkCor();\n        }\n      },\n      //判断当前滚动超过一屏时，设置tab标题滚动条。\n      checkCor() {\n        let that = this;\n        //这里计算按照实际情况进行修改，动态数据要进行动态分析\n        //思路：窗体高度/单个分类高度 200rpx 转px计算 =>得到一屏幕所显示的个数，结合后台传回分类总数进行计算\n        //数据很多可以多次if判断然后进行滚动距离计算即可\n        if (that.currentTab > 7) {\n          that.scrollTop = 500;\n        } else {\n          that.scrollTop = 0;\n        }\n      },\n      search() {\n        uni.navigateTo({\n          url: '/pagesA/goods/search'\n        });\n      }\n    }\n  };\n</script>\n\n<style scoped lang=\"stylus\">\n  @import '../../variable.styl'\n  .col000\n    color #000 !important\n  .kefuBtn\n    image\n      z-index 99!important\n      bottom 100rpx!important\n  .cart\n    top: 0rpx;\n    left: 0;\n    bottom: 0;\n    z-index: 0;\n    width: 100%;\n    height 600rpx\n    background-color: #f9f9f9;\n    text-align: center;\n  \n    .cart-icon\n      position: absolute;\n      top: -100rpx;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      height: 260rpx;\n      margin: auto;\n      image\n        width: 200rpx;\n        height: 200rpx;\n  .cart-box\n    .cart-box-title\n      width 100%\n      height 64rpx\n      line-height 64rpx\n      background #F2F3F4\n      color #999999\n      box-sizing border-box\n    .cart-box-scroll\n      height 600rpx\n      font-size 26rpx\n      background #f9f9f9\n      box-sizing border-box\n      .cart-goods-item\n        height 118rpx\n        background #fff\n        // border-top 1rpx solid #f2f2f2\n        .cart-goods-image\n          width 118rpx\n          height 118rpx\n          overflow hidden\n          image\n            width 100%\n            height 100%\n        .cart-goods-info\n          display flex\n          flex-direction column\n          justify-content space-between\n          box-sizing border-box\n          .goods-title\n            width 330rpx\n            overflow hidden\n            text-overflow ellipsis\n            white-space nowrap\n        >>> .van-stepper__input--disabled\n          color #000 !important\n  .tool-box\n    position fixed\n    bottom 88rpx\n    width 100%\n    z-index: 100;\n    background #fff\n    border-top 1rpx solid #f2f2f2\n    box-sizing border-box\n    .submit-btn\n        width 180rpx\n        margin 0\n        background #e64340\n        color #fff\n        text-align center\n        border-radius 0\n    .iconfont\n      color #FF4A41\n  .image-b\n    vertical-align: bottom\n  page\n    background #fcfcfc\n  /* 左侧导航布局 start */\n  /* 隐藏scroll-view滚动条 */\n  ::-webkit-scrollbar\n    width 0\n    height 0\n    color transparent\n  .em-searchbox\n    width 100%\n    height 92rpx\n    padding 0 30rpx\n    box-sizing border-box\n    background #fff\n    display flex\n    align-items center\n    justify-content center\n    position fixed\n    left 0\n    top 0\n    z-index 100\n  .em-searchbox::after\n    content ''\n    position absolute\n    border-bottom 1rpx solid #d2d2d2\n    -webkit-transform scaleY(0.5)\n    transform scaleY(0.5)\n    bottom 0\n    right 0\n    left 0\n  .em-search-input\n    width 100%\n    height 60rpx\n    background #f1f1f1\n    border-radius 30rpx\n    font-size 26rpx\n    color #999\n    display flex\n    align-items center\n    justify-content center\n  .em-search-text\n    padding-left 16rpx\n  .tab-view\n    /* height: 100%; */\n    width 180rpx\n    position fixed\n    left 0\n    top 125rpx\n    z-index 10\n    background $page-color-base\n    .tab-bar-item\n      width 100%\n      height 80rpx\n      background #f6f6f6\n      box-sizing border-box\n      display flex\n      align-items center\n      justify-content center\n      font-size 26rpx\n      color #444\n      font-weight 400\n      &:last-child\n        margin-bottom 80rpx\n      .text-ellipsis\n        padding 0 10rpx\n        font-size $font-base\n    .active\n      position relative\n      color $theme-red\n      font-weight 600\n      background #fff\n    .active::before\n      content ''\n      position absolute\n      border-left 8rpx solid $theme-red\n      height 70%\n      left 0\n      \n  /* 左侧导航布局 end */\n  .right-box\n    width 100%\n    position fixed\n    padding-left 180rpx\n    box-sizing border-box\n    left 0\n    top 125rpx\n  .page-view\n    width 100%\n    overflow hidden\n    box-sizing border-box\n    padding-bottom env(safe-area-inset-bottom)\n  .swiper\n    width 100%\n    height 220rpx\n    border-radius 12rpx\n    overflow hidden\n    transform translateZ(0)\n  .swiper .wx-swiper-dot\n    width 8rpx\n    height 8rpx\n    display inline-flex\n    background none\n    justify-content space-between\n  .swiper .wx-swiper-dot::before\n    content ''\n    flex-grow 1\n    background rgba(255, 255, 255, 0.8)\n    border-radius 16rpx\n    overflow hidden\n  .swiper .wx-swiper-dot-active::before\n    background #fff\n  .swiper .wx-swiper-dot.wx-swiper-dot-active\n    width 16rpx\n  .slide-image\n    width 100%\n    height 220rpx\n  .class-box\n    background #fff\n    width 100%\n    box-sizing border-box\n    padding 0 10rpx\n    margin-bottom 20rpx\n    border-radius 12rpx\n  .class-name\n    font-size 22rpx\n  .g-container\n    /* padding-top: 20rpx; */\n    display flex\n    display -webkit-flex\n    justify-content flex-start\n    flex-direction row\n    flex-wrap wrap\n    .notice-title\n      font-size 22rpx\n      margin-top 20rpx\n      text-align center\n  .g-box\n    width 31%\n    text-align center\n    margin-top 20rpx\n    margin-right 3.5%\n    &:nth-child(3n){\n      margin-right 0\n    }\n    .img-box\n      border-radius 12rpx\n      margin-bottom 10rpx\n  .g-image\n    display block\n    width 100%\n    height 171rpx\n  .g-title\n    font-size 24rpx\n    color #333\n\n  .notice-title\n    width 100%\n    height 35rpx\n    display flex\n    justify-content center\n    align-items center\n    font-size 28rpx\n    color #999\n  .item-tab-view\n    width 570rpx !important\n    position fixed\n    height 80rpx\n    line-height 80rpx\n    border-bottom 1rpx solid #e7e7e7\n    z-index 2\n    background #fff\n    white-space nowrap\n    overflow hidden\n    .class-item-tab\n      color #999\n      display inline-block\n      padding 0 20rpx\n      font-weight 600\n      box-sizing border-box\n    .item-tab-active\n      color $theme-red\n      font-weight 600\n  .goods-box\n    // padding-top 80rpx\n    .ticket-item\n      position relative\n      background #fff\n      .goods-item\n        height 186rpx\n        .goods-image\n          width 186rpx\n          height 186rpx\n          image\n            width 100%\n            height 100%\n        .goods-info\n          height 186rpx\n          display flex\n          flex-direction column\n          justify-content space-between\n          box-sizing border-box\n          .price-box\n            display flex\n            justify-content space-between\n            align-items flex-end\n          .iconfont\n            width 44rpx\n            height 44rpx\n            background #FF4A41\n            border-radius 50%\n            line-height 44rpx\n            text-align center\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./platformClass.vue?vue&type=style&index=0&id=3024f8e3&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./platformClass.vue?vue&type=style&index=0&id=3024f8e3&scoped=true&lang=stylus&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1604546394810\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}