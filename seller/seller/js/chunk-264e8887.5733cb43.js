(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-264e8887","chunk-8fe48f00"],{"190b":function(t,e,i){i("149f")&&"g"!=/./g.flags&&i("064e").f(RegExp.prototype,"flags",{configurable:!0,get:i("f1fe")})},"2b45":function(t,e,i){"use strict";i("190b");var s=i("69b3"),n=i("f1fe"),a=i("149f"),o="toString",r=/./[o],c=function(t){i("bf16")(RegExp.prototype,o,t,!0)};i("238a")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?c((function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?n.call(t):void 0)})):r.name!=o&&c((function(){return r.call(this)}))},3830:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.prefixCls]},[i("div",{class:t.classes,on:{click:t.handleClick,drop:function(e){return e.preventDefault(),t.onDrop(e)},paste:t.handlePaste,dragover:function(e){e.preventDefault(),t.dragOver=!0},dragleave:function(e){e.preventDefault(),t.dragOver=!1}}},[i("input",{ref:"input",class:[t.prefixCls+"-input"],attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleChange}}),t._t("default")],2),t._t("tip"),t.showUploadList?i("upload-list",{attrs:{files:t.fileList},on:{"on-file-remove":t.handleRemove,"on-file-preview":t.handlePreview}}):t._e()],2)},n=[],a=(i("cc57"),i("9a33"),i("2b45"),i("6d57"),i("ce3c")),o=(i("163d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{class:[t.prefixCls+"-list"]},t._l(t.files,(function(e){return i("li",{class:t.fileCls(e),on:{click:function(i){return t.handleClick(e)}}},[i("span",{on:{click:function(i){return t.handlePreview(e)}}},[i("Icon",{attrs:{type:t.format(e)}}),t._v(" "+t._s(e.name)+"\n        ")],1),i("Icon",{directives:[{name:"show",rawName:"v-show",value:"finished"===e.status,expression:"file.status === 'finished'"}],class:[t.prefixCls+"-list-remove"],attrs:{type:"ios-close"},nativeOn:{click:function(i){return t.handleRemove(e)}}}),i("transition",{attrs:{name:"fade"}},[e.showProgress?i("i-progress",{attrs:{"stroke-width":2,percent:t.parsePercentage(e.percentage),status:"finished"===e.status&&e.showProgress?"success":"normal"}}):t._e()],1)],1)})),0)}),r=[],c=i("8225"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.wrapClasses},[i("div",{class:t.outerClasses},[i("div",{class:t.innerClasses},[i("div",{class:t.bgClasses,style:t.bgStyle},[t.textInside?i("div",{staticClass:"ivu-progress-inner-text"},[t._v(t._s(t.percent)+"%")]):t._e()]),i("div",{class:t.successBgClasses,style:t.successBgStyle})])]),t.hideInfo||t.textInside?t._e():i("span",{class:t.textClasses},[t._t("default",[t.isStatus?i("span",{class:t.textInnerClasses},[i("Icon",{attrs:{type:t.statusIcon}})],1):i("span",{class:t.textInnerClasses},[t._v("\n                "+t._s(t.percent)+"%\n            ")])])],2)])},u=[],d=i("c3a8"),f=i("93a0"),p="ivu-progress",h={name:"Progress",components:{Icon:d["a"]},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator:function(t){return Object(f["a"])(t,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data:function(){return{currentStatus:this.status}},computed:{isStatus:function(){return"wrong"==this.currentStatus||"success"==this.currentStatus},statusIcon:function(){var t="";switch(this.currentStatus){case"wrong":t="ios-close-circle";break;case"success":t="ios-checkmark-circle";break}return t},bgStyle:function(){var t=this.vertical?{height:"".concat(this.percent,"%"),width:"".concat(this.strokeWidth,"px")}:{width:"".concat(this.percent,"%"),height:"".concat(this.strokeWidth,"px")};return this.strokeColor&&("string"===typeof this.strokeColor?t["background-color"]=this.strokeColor:t["background-image"]="linear-gradient(to right, ".concat(this.strokeColor[0]," 0%, ").concat(this.strokeColor[1]," 100%)")),t},successBgStyle:function(){return this.vertical?{height:"".concat(this.successPercent,"%"),width:"".concat(this.strokeWidth,"px")}:{width:"".concat(this.successPercent,"%"),height:"".concat(this.strokeWidth,"px")}},wrapClasses:function(){var t;return["".concat(p),"".concat(p,"-").concat(this.currentStatus),(t={},Object(a["a"])(t,"".concat(p,"-show-info"),!this.hideInfo&&!this.textInside),Object(a["a"])(t,"".concat(p,"-vertical"),this.vertical),t)]},textClasses:function(){return"".concat(p,"-text")},textInnerClasses:function(){return"".concat(p,"-text-inner")},outerClasses:function(){return"".concat(p,"-outer")},innerClasses:function(){return"".concat(p,"-inner")},bgClasses:function(){return"".concat(p,"-bg")},successBgClasses:function(){return"".concat(p,"-success-bg")}},created:function(){this.handleStatus()},methods:{handleStatus:function(t){t?(this.currentStatus="normal",this.$emit("on-status-change","normal")):100==parseInt(this.percent,10)&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent:function(t,e){t<e?this.handleStatus(!0):this.handleStatus()},status:function(t){this.currentStatus=t}}},m=h,g=i("9ca4"),v=Object(g["a"])(m,l,u,!1,null,null,null),b=v.exports,x="ivu-upload",y={name:"UploadList",components:{Icon:c["a"],iProgress:b},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:x}},methods:{fileCls:function(t){return["".concat(x,"-list-file"),Object(a["a"])({},"".concat(x,"-list-file-finish"),"finished"===t.status)]},handleClick:function(t){this.$emit("on-file-click",t)},handlePreview:function(t){this.$emit("on-file-preview",t)},handleRemove:function(t){this.$emit("on-file-remove",t)},format:function(t){var e=t.name.split(".").pop().toLocaleLowerCase()||"",i="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(e)>-1&&(i="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(e)>-1&&(i="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(e)>-1&&(i="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(e)>-1&&(i="md-document"),["numbers","csv","xls","xlsx"].indexOf(e)>-1&&(i="ios-stats"),["keynote","ppt","pptx"].indexOf(e)>-1&&(i="ios-videocam"),i},parsePercentage:function(t){return parseInt(t,10)}}},w=y,S=Object(g["a"])(w,o,r,!1,null,null,null),C=S.exports;function k(t,e,i){const s=`fail to post ${t} ${i.status}'`,n=new Error(s);return n.status=i.status,n.method="post",n.url=t,n}function O(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(i){return e}}function I(t){if("undefined"===typeof XMLHttpRequest)return;const e=new XMLHttpRequest,i=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});const s=new FormData;t.data&&Object.keys(t.data).map(e=>{s.append(e,t.data[e])}),s.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(k(i,t,e),O(e));t.onSuccess(O(e))},e.open("post",i,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const n=t.headers||{};for(let a in n)n.hasOwnProperty(a)&&null!==n[a]&&e.setRequestHeader(a,n[a]);e.send(s)}function L(t,e,i){this.$children.forEach(s=>{const n=s.$options.name;n===t?s.$emit.apply(s,[e].concat(i)):L.apply(s,[t,e].concat([i]))})}var P={methods:{dispatch(t,e,i){let s=this.$parent||this.$root,n=s.$options.name;while(s&&(!n||n!==t))s=s.$parent,s&&(n=s.$options.name);s&&s.$emit.apply(s,[e].concat(i))},broadcast(t,e,i){L.call(this,t,e,i)}}},_="ivu-upload",$={name:"Upload",mixins:[P],components:{UploadList:C},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator:function(t){return Object(f["a"])(t,["select","drag"])},default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{prefixCls:_,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes:function(){var t;return["".concat(_),(t={},Object(a["a"])(t,"".concat(_,"-select"),"select"===this.type),Object(a["a"])(t,"".concat(_,"-drag"),"drag"===this.type),Object(a["a"])(t,"".concat(_,"-dragOver"),"drag"===this.type&&this.dragOver),t)]}},methods:{handleClick:function(){this.disabled||this.$refs.input.click()},handleChange:function(t){var e=t.target.files;e&&(this.uploadFiles(e),this.$refs.input.value=null)},onDrop:function(t){this.dragOver=!1,this.disabled||this.uploadFiles(t.dataTransfer.files)},handlePaste:function(t){this.disabled||this.paste&&this.uploadFiles(t.clipboardData.files)},uploadFiles:function(t){var e=this,i=Array.prototype.slice.call(t);this.multiple||(i=i.slice(0,1)),0!==i.length&&i.forEach((function(t){e.upload(t)}))},upload:function(t){var e=this;if(!this.beforeUpload)return this.post(t);var i=this.beforeUpload(t);i&&i.then?i.then((function(i){"[object File]"===Object.prototype.toString.call(i)?e.post(i):e.post(t)}),(function(){})):!1!==i&&this.post(t)},post:function(t){var e=this;if(this.format.length){var i=t.name.split(".").pop().toLocaleLowerCase(),s=this.format.some((function(t){return t.toLocaleLowerCase()===i}));if(!s)return this.onFormatError(t,this.fileList),!1}if(this.maxSize&&t.size>1024*this.maxSize)return this.onExceededSize(t,this.fileList),!1;this.handleStart(t);var n=new FormData;n.append(this.name,t),I({headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(i){e.handleProgress(i,t)},onSuccess:function(i){e.handleSuccess(i,t)},onError:function(i,s){e.handleError(i,s,t)}})},handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"uploading",name:t.name,size:t.size,percentage:0,uid:t.uid,showProgress:!0};this.fileList.push(e)},getFile:function(t){var e,i=this.fileList;return i.every((function(i){return e=t.uid===i.uid?i:null,!e})),e},handleProgress:function(t,e){var i=this.getFile(e);this.onProgress(t,i,this.fileList),i.percentage=t.percent||0},handleSuccess:function(t,e){var i=this.getFile(e);i&&(i.status="finished",i.response=t,this.onSuccess(t,i,this.fileList),this.dispatch("FormItem","on-form-change",i),setTimeout((function(){i.showProgress=!1}),1e3))},handleError:function(t,e,i){var s=this.getFile(i),n=this.fileList;s.status="fail",n.splice(n.indexOf(s),1),this.onError(t,e,i)},handleRemove:function(t){var e=this.fileList;e.splice(e.indexOf(t),1),this.onRemove(t,e)},handlePreview:function(t){"finished"===t.status&&this.onPreview(t)},clearFiles:function(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler:function(t){var e=this;this.fileList=t.map((function(t){return t.status="finished",t.percentage=100,t.uid=Date.now()+e.tempIndex++,t}))}}}},E=$,j=Object(g["a"])(E,s,n,!1,null,null,null),F=j.exports;e["a"]=F},4334:function(t,e,i){"use strict";var s=i("e49f"),n=i.n(s);n.a},4428:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"UploadBox"},[t._l(t.uploadImageList,(function(e,s){return i("div",{key:s,staticClass:"upload-image-list"},["finished"===e.status?[i("img",{attrs:{src:e.url}}),i("div",{staticClass:"upload-image-list-cover"},[i("a-icon",{attrs:{type:"eye"},nativeOn:{click:function(i){return t.handleView(e.url)}}}),i("a-icon",{attrs:{type:"delete"},nativeOn:{click:function(i){return t.handleRemove(e)}}})],1)]:[e.showProgress?i("a-progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)})),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"60px"},attrs:{name:"image",headers:t.headers,"show-upload-list":!1,"default-file-list":t.defaultImageList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:t.isMultiple,type:"drag",action:t.uploadImageUrl}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("a-icon",{attrs:{type:"upload",size:"20"}})],1)]),i("AlbumPics",{attrs:{isMultiple:!0,maximum:t.surplusNum},on:{selectOk:t.selectPics}},[i("div",{staticClass:"ant-upload ant-upload-drag"},[i("a-icon",{attrs:{type:"camera",size:"20"}})],1)])],2),i("a-modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:t.imageUrl}}):t._e(),i("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},n=[],a=(i("6d57"),i("163d"),i("3830")),o=i("804d"),r=i("564b"),c=i("ca00"),l={name:"UploadImage",components:{AlbumPics:r["a"],Upload:a["a"]},props:{defaultImageList:Array,maximum:Number,shopId:Number},data:function(){return{headers:{Accept:"application/json",Authorization:"Bearer ".concat(Object(c["a"])())},uploadImageUrl:o["a"].baseURL+o["a"].action.upload_image,imageUrl:"",visible:!1,isMultiple:1!==this.maximum,uploadImageList:[],surplusNum:this.maximum-this.defaultImageList.length}},methods:{handleView:function(t){console.log(t),this.imageUrl=t,this.visible=!0},handleRemove:function(t){console.log(t);var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1),this.uploadImageList=this.$refs.upload.fileList,this.surplusNum++},handleSuccess:function(t,e){console.log(t),0===t.code?(e.url=t.result.pic_url,this.uploadImageList=this.$refs.upload.fileList,this.surplusNum--):this.$notification.warning({message:"Warning Notice",description:t.message})},handleFormatError:function(){this.$notification.warning({message:"The file format is incorrect",description:"上传文件格式不正确"})},handleMaxSize:function(){this.$notification.warning({message:"Exceeding file size limit",description:"上传文件过大."})},handleBeforeUpload:function(){var t=this.uploadImageList.length<this.maximum;return t||this.$notification.warning({message:"Notice",description:"最多只能上传".concat(this.maximum,"张图片, 请删除后再上传")}),t},selectPics:function(t){var e=this;t.forEach((function(t){var i={status:"finished",url:t.pic_url};e.uploadImageList.push(i),e.surplusNum--}))}},mounted:function(){this.uploadImageList=this.$refs.upload.fileList,console.log(this.surplusNum)},watch:{defaultImageList:function(){this.uploadImageList=this.defaultImageList,this.surplusNum=this.surplusNum-this.uploadImageList.length}}},u=l,d=(i("8644"),i("9ca4")),f=Object(d["a"])(u,s,n,!1,null,"2f1a4d62",null);e["a"]=f.exports},"564b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ivu-upload",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.getPics(1)}}},[i("div",{on:{click:t.selectAlbumPic}},[t._t("default")],2),i("a-modal",{attrs:{width:"80%",title:"相册图片"},on:{ok:t.selectPicsOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",{staticClass:"selectImgBox"},[i("ul",t._l(t.pics,(function(e){return i("li",{key:e.id,class:{active:t.isSelected(e)},on:{click:function(i){return t.selectPic(e)}}},[i("div",{staticClass:"imgBox"},[i("img",{attrs:{src:e.pic_url,alt:""}})])])})),0)]),i("div",{staticClass:"imgsPage",staticStyle:{width:"100%","text-align":"right"}},[i("a-pagination",{ref:"page",attrs:{total:t.page.total,showTotal:function(e){return"共 "+t.page.total+" 条"},pageSize:t.page.page_size},on:{change:t.getPics}})],1)])],1)},n=[],a=(i("163d"),i("804d")),o=i("e1d2"),r={name:"AlbumPics",props:{isMultiple:Boolean,maximum:Number,shopId:Number},data:function(){return{pics:[],visible:!1,selection:[],page:{total:20,current:1,page_size:20}}},methods:{getPics:function(t){var e=this;this.selection=[],o["a"].get(a["a"].baseURL+a["a"].action.album_pics,{params:{page:t,shop_id:this.shopId}}).then((function(t){0===t.data.code&&(e.pics=t.data.result.data,e.page.total=t.data.result.total)})).catch((function(t){e.$notification.error({message:"Notice",description:t})}))},selectAlbumPic:function(){this.visible=!0},selectPic:function(t){var e=this.selection.indexOf(t);if(e>-1)this.selection.splice(e,1);else{if(!1===this.isMultiple&&(this.selection=[]),this.isMultiple&&this.selection.length>=this.maximum)return void this.$notification.warning({message:"Notice",description:"选择的图片数量已经超过限制，请删除后再选择"});this.selection.push(t)}},isSelected:function(t){return this.selection&&this.selection.indexOf(t)>-1},selectPicsOk:function(){this.visible=!1,this.$emit("selectOk",this.selection)}}},c=r,l=(i("4334"),i("9ca4")),u=Object(l["a"])(c,s,n,!1,null,"2ae7958e",null);e["a"]=u.exports},8225:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{class:t.classes,style:t.styles,on:{click:t.handleClick}})},n=[],a=i("ce3c"),o=(i("163d"),"ivu-icon"),r={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes:function(){var t;return["".concat(o),(t={},Object(a["a"])(t,"".concat(o,"-").concat(this.type),""!==this.type),Object(a["a"])(t,"".concat(this.custom),""!==this.custom),t)]},styles:function(){var t={};return this.size&&(t["font-size"]="".concat(this.size,"px")),this.color&&(t.color=this.color),t}},methods:{handleClick:function(t){this.$emit("click",t)}}},c=r,l=i("9ca4"),u=Object(l["a"])(c,s,n,!1,null,null,null);e["a"]=u.exports},8644:function(t,e,i){"use strict";var s=i("fe98"),n=i.n(s);n.a},"93a0":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("a593");const n=s["a"].prototype.$isServer;function a(t,e){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}!n&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)},"9a33":function(t,e,i){"use strict";var s=i("2fd4"),n=i("69b3"),a=i("f63e"),o=i("e754"),r=i("eafa"),c=i("7108"),l=i("8714"),u=i("238a"),d=Math.min,f=[].push,p="split",h="length",m="lastIndex",g=4294967295,v=!u((function(){RegExp(g,"y")}));i("0aed")("split",2,(function(t,e,i,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!s(t))return i.call(n,t,e);var a,o,r,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?g:e>>>0,v=new RegExp(t.source,u+"g");while(a=l.call(v,n)){if(o=v[m],o>d&&(c.push(n.slice(d,a.index)),a[h]>1&&a.index<n[h]&&f.apply(c,a.slice(1)),r=a[0][h],d=o,c[h]>=p))break;v[m]===a.index&&v[m]++}return d===n[h]?!r&&v.test("")||c.push(""):c.push(n.slice(d)),c[h]>p?c.slice(0,p):c}:"0"[p](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,s){var n=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,n,s):b.call(String(n),i,s)},function(t,e){var s=u(b,t,this,e,b!==i);if(s.done)return s.value;var l=n(t),f=String(this),p=a(l,RegExp),h=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),x=new p(v?l:"^(?:"+l.source+")",m),y=void 0===e?g:e>>>0;if(0===y)return[];if(0===f.length)return null===c(x,f)?[f]:[];var w=0,S=0,C=[];while(S<f.length){x.lastIndex=v?S:0;var k,O=c(x,v?f:f.slice(S));if(null===O||(k=d(r(x.lastIndex+(v?0:S)),f.length))===w)S=o(f,S,h);else{if(C.push(f.slice(w,S)),C.length===y)return C;for(var I=1;I<=O.length-1;I++)if(C.push(O[I]),C.length===y)return C;S=w=k}}return C.push(f.slice(w)),C}]}))},c3a8:function(t,e,i){"use strict";var s=i("8225");e["a"]=s["a"]},e49f:function(t,e,i){},fe98:function(t,e,i){}}]);