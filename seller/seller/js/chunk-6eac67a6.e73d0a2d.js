(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eac67a6"],{"4a8c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"list-nav"},[a("div",{staticClass:"mb10"},[a("a-button",{staticClass:"mr10",attrs:{icon:"download",type:"primary"},on:{click:t.selectBtn}},[t._v("导出勾选的数据")]),a("a-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:t.excelModelShow}},[t._v("高级导出")])],1),a("div",[a("a-input-search",{staticStyle:{width:"18rem"},attrs:{enterButton:"",placeholder:"请输入订单号搜素"},on:{search:t.orderSearch}})],1)]),a("div",{staticClass:"total"},t._l(t.total_data,(function(e,i){return a("span",{key:i,staticClass:"span"},[t._v(t._s(e.title+": ")),a("span",{staticClass:"text"},[t._v(t._s(e.value))])])})),0),t.fieldsData&&t.fieldsData.length>0?[a("a-tabs",{attrs:{defaultActiveKey:"待退款"},on:{change:t.changeTab}},t._l(t.tabsArr,(function(e,i){return a("a-tab-pane",{key:e,attrs:{tab:e}},[a("a-table",{staticClass:"mr10",attrs:{scroll:{x:2800,y:700},rowSelection:{onChange:t.onChange},rowKey:function(t){return t.id},columns:t.fieldsData,dataSource:t.listsData,pagination:!1},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e,i,o){return a("a-table",{attrs:{columns:e.trade_order.field,dataSource:e.trade_order.data,pagination:!1},scopedSlots:t._u([{key:"goods_image",fn:function(t){return a("a",{attrs:{target:"_blank",href:t}},[a("img",{attrs:{height:"50px",src:t,alt:""}})])}}],null,!0)})}}],null,!0)})],1)})),1),a("div",{staticClass:"pageBox"},[a("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:t.pages.per_page},on:{change:t.pageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]:t._e(),a("a-modal",{attrs:{title:"请按需选择导出的内容",confirmLoading:t.exportLoading,okText:"导出"},on:{ok:t.dataHandleOk,cancel:t.dataCancel},model:{value:t.dataVisible,callback:function(e){t.dataVisible=e},expression:"dataVisible"}},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-form-item",{attrs:{label:"手机号:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.exportForm.mobile,callback:function(e){t.$set(t.exportForm,"mobile",e)},expression:"exportForm.mobile"}})],1),a("a-form-item",{attrs:{label:"退款状态:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-select",{attrs:{placeholder:"请选择退款状态",allowClear:""},model:{value:t.exportForm.status,callback:function(e){t.$set(t.exportForm,"status",e)},expression:"exportForm.status"}},[a("a-select-option",{attrs:{value:1}},[t._v("待退款")]),a("a-select-option",{attrs:{value:2}},[t._v("已退款")])],1)],1),a("a-form-item",{attrs:{label:"退款时间:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[t.timeVisible?a("a-range-picker",{attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"},on:{change:t.timeChange,ok:t.timeOk}}):t._e()],1)],1)],1),a("a-modal",{attrs:{centered:"",title:"退款操作"},on:{ok:t.editHandleOk},model:{value:t.editVisible,callback:function(e){t.editVisible=e},expression:"editVisible"}},[a("a-form",[a("a-form-item",{attrs:{label:"支付单号",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[t._v("\n          "+t._s(t.fromitem.payment_id)+"\n        ")]),a("a-form-item",{attrs:{label:"应退金额",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[t._v("\n          "+t._s(t.fromitem.total_price)+"\n        ")]),a("a-form-item",{attrs:{label:"实退金额",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[t._v("\n          "+t._s(t.fromitem.money)+"\n        ")]),a("div",{staticClass:"content-label"},[a("p",[t._v("说明：")]),a("p",[t._v("售后订单类型：")]),a("p",[t._v("应退金额：为订单的实际支付金额，不包括邮费")]),a("p",[t._v("实退金额：为门店输入的退款金额为准")]),a("p",[t._v("取消订单类型：")]),a("p",[t._v("按订单实际支付的金额退款（包括邮费），不存在门店输入退款金额")])]),a("a-form-item",{attrs:{label:"退款方式",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-radio-group",{model:{value:t.fromitem.refund_type,callback:function(e){t.$set(t.fromitem,"refund_type",e)},expression:"fromitem.refund_type"}},[a("a-radio",{attrs:{value:"offline"}},[t._v("线下")]),a("a-radio",{attrs:{value:"online"}},[t._v("原路退款")])],1)],1),"offline"===t.fromitem.refund_type?[a("a-form-item",{attrs:{label:"退款银行",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{model:{value:t.fromitem.refund_bank,callback:function(e){t.$set(t.fromitem,"refund_bank",e)},expression:"fromitem.refund_bank"}})],1),a("a-form-item",{attrs:{label:"收款银行",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{model:{value:t.fromitem.receive_bank,callback:function(e){t.$set(t.fromitem,"receive_bank",e)},expression:"fromitem.receive_bank"}})],1),a("a-form-item",{attrs:{label:"退款帐号",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{model:{value:t.fromitem.refund_account,callback:function(e){t.$set(t.fromitem,"refund_account",e)},expression:"fromitem.refund_account"}})],1),a("a-form-item",{attrs:{label:"收款帐号",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{model:{value:t.fromitem.receive_account,callback:function(e){t.$set(t.fromitem,"receive_account",e)},expression:"fromitem.receive_account"}})],1),a("a-form-item",{attrs:{label:"退款人姓名",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}}),a("a-form-item",{attrs:{label:"收款人姓名",required:!0,"label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-input",{model:{value:t.fromitem.beneficiary,callback:function(e){t.$set(t.fromitem,"beneficiary",e)},expression:"fromitem.beneficiary"}})],1)]:t._e()],2)],1),a("a-modal",{attrs:{title:"退款信息"},on:{ok:function(e){t.showInfo=!1}},model:{value:t.showInfo,callback:function(e){t.showInfo=e},expression:"showInfo"}},[a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("退款人姓名：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.refund_people))])],1),a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("退款订单号：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.tid))])],1),a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("退款金额：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.money))])],1),a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("退款银行：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.refund_bank))])],1),a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("退款银行账号：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.refund_account))])],1),a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("收款银行：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.receive_bank))])],1),a("a-row",{staticClass:"mb5"},[a("a-col",{attrs:{span:10}},[t._v("收款银行账号：")]),a("a-col",{attrs:{span:12}},[t._v(t._s(t.offLineInfo.receive_account))])],1)],1)],2)},o=[],r=(a("5ab2"),a("e10e"),a("6d57"),a("ce3c")),n=a("9f3a");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={name:"aftersales",data:function(){return{tabsArr:["待退款","已退款"],listStatus:1,currentPage:1,editVisible:!1,selectLists:[],dataVisible:!1,exportLoading:!1,timeHide:!1,fromitem:{refunds_id:"",tid:"",shop_id:"",user_id:"",money:"",total_price:"",refund_type:"offline",refund_bank:"",receive_bank:"",refund_account:"",receive_account:"",refund_people:"",beneficiary:"",payment_id:""},timeItem:{},exportForm:{},showInfo:!1,shopParams:{per_page:1e6,is_open:1},timeVisible:!0}},methods:l(l({},Object(n["b"])({refundsLists:"trade/refundsLists",editDorefund:"trade/editDorefund",exportFilter:"trade/exportRefunds",refundsPay:"trade/refundsPay",resetSellerRefund:"trade/resetSellerRefund",getOffLineInfo:"trade/getOffLineInfo"})),{},{timeChange:function(t,e){console.log("Selected Time: ",t),console.log("Formatted Selected Time: ",e),this.exportForm.refund_at_start=e[0],this.exportForm.refund_at_end=e[1]},timeOk:function(t){console.log("onOk: ",t)},timeType:function(t){void 0==t?(this.timeHide=!1,this.timeItem={},delete this.exportForm.time):(this.timeHide=!0,this.timeItem.type=t,this.timeItem.from="",this.timeItem.to="",this.exportForm.time=this.timeItem)},timeSelect:function(t,e){this.timeItem.from=e[0],this.timeItem.to=e[1],this.exportForm.time=this.timeItem},allCurrent:function(){this.export2Excel(this.listsData)},selectBtn:function(){0==this.selectLists.length?this.$warning({title:"温馨提示！",content:"请勾选需要导出的数据"}):(this.export2Excel(this.OneDimensionalArray(this.selectLists,!0)),this.$success({title:"温馨提示！",content:"数据正在导出,请稍后查看下载目录！"})),this.dataVisible=!1},export2Excel:function(t){var e=[],i=[],o=t;this.fieldsData.forEach((function(t,a){e.push(t.title),i.push(t.dataIndex)})),e.splice(e.length-1,1),i.splice(i.length-1,1);var r=this.formatJson(i,o);Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-c52ffaa2"),a.e("chunk-23853d05")]).then(a.bind(null,"4bf8")).then((function(t){t.export_json_to_excel({header:e,data:r,filename:"门店端退款列表",autoWidth:!0,bookType:"xlsx"})})),this.dataVisible=!1},excelModelShow:function(){var t=this;this.dataVisible=!0,this.timeVisible=!1,this.$nextTick((function(){t.timeVisible=!0}))},onChange:function(t,e){var a=this.listStatus;this.selectLists[a-1]||(this.selectLists[a-1]=[]),this.selectLists[a-1][this.currentPage-1]=e},dataHandleOk:function(){""==this.exportForm.mobile&&delete this.exportForm.mobile,0==Object.keys(this.exportForm).length?this.$warning({title:"温馨提示！",content:"需选择导出条件才可导出数据"}):(console.log(this.exportForm),this.exportLoading=!0,this.exportFilter(this.exportForm))},orderCallback:function(){this.exportLoading=!1,this.dataVisible=!1,this.exportPathMethodExcel(this.exportData),this.exportForm={},this.timeItem={},this.timeHide=!1},exportPathMethod:function(t){var e=t.order,a=e.tHeader,i=e.filterVal,o=e.list,r=[];r.push("".concat(a.join("\t,"),"\n"));for(var n=0;n<o.length;n++){for(var s=[],l=0;l<i.length;l++)s.push(o[n][i[l]]);r.push("".concat(s.join("\t,"),"\n"))}var c="";if(t.trade){var d=t.trade,f=d.tHeader,m=d.filterVal,u=d.list,p=[];p.push("".concat(f.join("\t,"),"\t\n"));for(n=0;n<u.length;n++){var h=[];for(l=0;l<m.length;l++)h.push(u[n][m[l]]);p.push("".concat(h.join("\t,"),"\t\n"))}c="".concat(r.join(""),"\n\n").concat(p.join("")),console.log(JSON.stringify(c))}else c="".concat(r.join(""));var b="data:text/csv;charset=utf-8,\ufeff".concat(encodeURIComponent(c)),_=document.createElement("a");_.href=b,_.download="门店端退款列表.csv",document.body.appendChild(_),_.click()},exportPathMethodExcel:function(t){this.$success({title:"温馨提示！",content:"数据正在导出,请稍后查看下载目录！"}),console.log("11",t);var e=t.order.tHeader,i=t.order.filterVal,o=t.order.list,r=this.formatJson(i,o);Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-c52ffaa2"),a.e("chunk-23853d05")]).then(a.bind(null,"4bf8")).then((function(t){t.export_json_to_excel({header:e,data:r,filename:"门店端退款列表",autoWidth:!0,bookType:"xlsx"})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},dataCancel:function(){this.dataVisible=!1,this.exportForm.refund_at_start="",this.exportForm.refund_at_end=""},orderSearch:function(t){this.refundsLists({tid:t,page:1})},pageChange:function(t){this.refundsLists({page:t,status:this.listStatus})},edit:function(t){this.editVisible=!0,this.fromitem.refunds_id=t.id,this.fromitem.tid=t.tid,this.fromitem.shop_id=t.shop_id,this.fromitem.user_id=t.user_id,this.fromitem.money=t.refund_fee,this.fromitem.total_price=t.total_price,this.fromitem.payment_id=t.payment_id},checkInfo:function(t){this.showInfo=!0,this.getOffLineInfo({tid:t.tid})},editHandleOk:function(){this.editDorefund(this.fromitem),this.editVisible=!1,this.refundsLists({page:1,status:this.listStatus}),this.currentPage=1,this.fromitem={refunds_id:"",tid:"",shop_id:"",user_id:"",money:"",total_price:"",refund_type:"offline",refund_bank:"",receive_bank:"",refund_account:"",receive_account:"",refund_people:"",beneficiary:"",payment_id:""}},rejectRefund:function(t){console.log(t);var e=this;this.$confirm({title:"提示",content:"确认要驳回退款吗？",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){e.resetSellerRefund({id:t.id})}})},changeTab:function(t){this.listStatus="待退款"===t?1:2,this.refundsLists({page:1,status:this.listStatus}),this.currentPage=1}}),computed:l({},Object(n["c"])({listsData:function(t){return t.trade.refundsData},fieldsData:function(t){return t.trade.refundsFields},pages:function(t){return t.trade.refundsPages},exportData:function(t){return t.trade.exportData},offLineInfo:function(t){return t.trade.offLineInfo},total_data:function(t){return t.trade.total_fee_data}})),mounted:function(){this.refundsLists({page:1,status:1})},watch:{exportData:function(){this.orderCallback()}}},d=c,f=(a("7bac"),a("9ca4")),m=Object(f["a"])(d,i,o,!1,null,"55f299d2",null);e["default"]=m.exports},"7bac":function(t,e,a){"use strict";var i=a("dd68"),o=a.n(i);o.a},dd68:function(t,e,a){}}]);