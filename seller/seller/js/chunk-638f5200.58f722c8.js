(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-638f5200"],{"0a02":function(t,e,a){},"0c51":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("div",{staticClass:"mr24"},[a("a-card",{attrs:{bordered:!1,title:"订单进度"}},["EXCHANGING_GOODS"===t.detail.aftersales_type?a("div",{staticClass:"steps"},[a("a-steps",{attrs:{current:t.stepCurrent}},[a("a-step",[a("template",{slot:"title"},[t._v("\n            等待处理\n          ")])],2),a("a-step",[a("template",{slot:"title"},[t._v("\n            门店处理\n          ")])],2),a("a-step",[a("template",{slot:"title"},[t._v("\n            完成\n          ")])],2)],1)],1):a("div",{staticClass:"steps"},[a("a-steps",{attrs:{current:t.stepCurrent}},[a("a-step",[a("template",{slot:"title"},[t._v("\n            等待处理\n          ")])],2),a("a-step",[a("template",{slot:"title"},[t._v("\n            门店处理\n          ")])],2),a("a-step",[a("template",{slot:"title"},[t._v("\n            平台审核\n          ")])],2),a("a-step",[a("template",{slot:"title"},[t._v("\n            完成\n          ")])],2)],1)],1)]),a("a-card",{attrs:{bordered:!1,title:"订单信息"}},[a("span",{attrs:{slot:"extra"},slot:"extra"},[t._v("售后创建时间:"+t._s(t.detail.created_at))]),a("div",{staticClass:"det-info"},[a("a-row",[a("a-col",{attrs:{md:6}},[a("p",[t._v("订单号："+t._s(t.detail.tid)+" ")]),a("p",[t._v("订单状态： "+t._s(t.detail.progress_text)+" ")])]),a("a-col",{attrs:{md:6}},[a("p",[t._v("退款金额："),a("span",{staticClass:"col-red"},[t._v("\n            ￥"+t._s(t.detail.trade.amount)+"\n          ")])])]),a("a-col",{attrs:{md:6}},[a("p",[t._v("联系方式："+t._s(t.allInfo.receiver_tel)+" ")]),a("p",[t._v("收货人："+t._s(t.allInfo.receiver_name)+" ")]),a("p",[t._v("收货地址："+t._s(t.allInfo.receiver_address)+" ")])])],1)],1)]),a("a-card",{attrs:{bordered:!1,title:"商品信息"}},[a("div",{staticClass:"det-goods"},[a("a-table",{attrs:{scroll:{x:1100,y:700},pagination:t.page,columns:t.columns,dataSource:t.data},scopedSlots:t._u([{key:"goods_image",fn:function(t,e){return a("div",{},[a("div",[a("img",{attrs:{width:"60px",src:e.goods_image,alt:""}})])])}}],null,!1,3197051947)}),a("div",{staticStyle:{"text-align":"right",margin:"20px 0"}},[t._v("\n        商品总额"),a("span",{staticClass:"col-red"},[t._v("￥"+t._s(t.detail.trade.amount))])])],1)]),a("a-card",{attrs:{bordered:!1,title:"订单售后原因"}},[a("span",{attrs:{slot:"extra"},slot:"extra"},[a("Time-lines",{attrs:{oid:t.detail.oid}},[a("a-button",{attrs:{type:"primary"}},[t._v("售后记录")])],1)],1),a("a-row",[a("a-col",{attrs:{xs:{span:24},md:{span:6}}},[t._v("\n        "+t._s(t.detail.reason)+"\n        "),a("div",[a("ul",{staticClass:"fxBox1 saleImgBox"},t._l(t.detail.evidence_pic,(function(t,e){return a("li",[a("a",{attrs:{href:t,target:"_blank"}},[a("img",{attrs:{src:t,alt:""}})])])})),0)])]),0==t.detail.progress?a("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[a("a-radio-group",{attrs:{defaultValue:1},model:{value:t.formItem.check_result,callback:function(e){t.$set(t.formItem,"check_result",e)},expression:"formItem.check_result"}},[a("a-radio",{attrs:{value:!0}},[t._v("同意")]),a("a-radio",{attrs:{value:!1}},[t._v("不同意")])],1),a("a-textarea",{staticClass:"mt10 mb10",attrs:{placeholder:"请输入门店审核处理说明",rows:4},model:{value:t.formItem.shop_explanation,callback:function(e){t.$set(t.formItem,"shop_explanation",e)},expression:"formItem.shop_explanation"}}),"EXCHANGING_GOODS"!==t.formItem.aftersales_type&&!1!==t.formItem.check_result&&"REFUND_GOODS"!==t.formItem.aftersales_type?a("div",{staticClass:"fxBox"},[a("span",{staticClass:"mr10"},[t._v("退款金额:")]),a("a-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"请输入退款金额"},model:{value:t.formItem.total_price,callback:function(e){t.$set(t.formItem,"total_price",e)},expression:"formItem.total_price"}})],1):t._e(),a("div",{staticClass:"mt10"},[a("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1):t._e(),2==t.detail.progress&&"EXCHANGING_GOODS"!==t.formItem.aftersales_type?a("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[a("a-textarea",{staticClass:"mt10 mb10",attrs:{placeholder:"请输入售后操作说明",rows:4},model:{value:t.formItem.shop_explanation,callback:function(e){t.$set(t.formItem,"shop_explanation",e)},expression:"formItem.shop_explanation"}}),!1!==t.formItem.check_result?a("div",{staticClass:"fxBox"},[a("span",{staticClass:"mr10"},[t._v("退款金额:")]),a("a-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"请输入退款金额"},model:{value:t.formItem.total_price,callback:function(e){t.$set(t.formItem,"total_price",e)},expression:"formItem.total_price"}})],1):t._e(),a("div",{staticClass:"mt10"},[a("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1):t._e(),2==t.detail.progress&&"EXCHANGING_GOODS"===t.formItem.aftersales_type?a("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[a("div",{staticClass:"mb20"},[a("div",{staticClass:"mb10"},[t._v("选择物流公司：")]),a("a-select",{staticStyle:{width:"200px"},model:{value:t.exchangeItem.corp_code,callback:function(e){t.$set(t.exchangeItem,"corp_code",e)},expression:"exchangeItem.corp_code"}},t._l(t.logistics,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.corp_code}},[t._v(t._s(e.corp_name))])})),1)],1),a("div",{staticClass:"fxBox1"},[a("div",{staticClass:"mb10"},[t._v("填写物流单号：")]),a("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入物流单号"},model:{value:t.exchangeItem.logi_no,callback:function(e){t.$set(t.exchangeItem,"logi_no",e)},expression:"exchangeItem.logi_no"}})],1),a("div",{staticClass:"mt10"},[a("a-button",{attrs:{type:"primary"},on:{click:t.exchangingSubmit}},[t._v("提交")])],1)]):t._e(),4!=t.detail.progress&&3!=t.detail.progress||"EXCHANGING_GOODS"!==t.formItem.aftersales_type?t._e():a("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[a("a-form",{attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"是否允许再次换货："}},[a("a-radio-group",{model:{value:t.againServiceForm.apply_again_status,callback:function(e){t.$set(t.againServiceForm,"apply_again_status",e)},expression:"againServiceForm.apply_again_status"}},[a("a-radio",{attrs:{value:1}},[t._v("允许")]),a("a-radio",{attrs:{value:0}},[t._v("不允许")])],1)],1),a("a-form-item",{attrs:{label:""}},[a("a-button",{attrs:{type:"primary"},on:{click:t.againServiceSubmit}},[t._v("保存")])],1)],1)],1),a("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[t._v("\n        订单状态："+t._s(t.detail.progress_text)+"\n      ")])],1)],1)],1):t._e()},r=[],i=(a("5ab2"),a("e10e"),a("6d57"),a("163d"),a("ce3c")),o=a("9f3a"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goodsList"},[a("div",{staticClass:"btn",on:{click:t.openModel}},[t._t("default")],2),a("a-modal",{staticStyle:{top:"20px"},attrs:{width:760,title:"售后记录",footer:null},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.allAftersaleTrace.length?a("a-timeline",t._l(t.allAftersaleTrace,(function(e){return a("a-timeline-item",{key:e.id,attrs:{position:"right"}},[a("p",[t._v(t._s(e.created_at)+" 用户申请"+t._s(e.aftersales_type_text)+"，"+t._s(e.progress_text)+"。")])])})),1):a("a-empty")],1)],1)},l=[];function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={name:"TimeLine",props:{oid:{type:[String,Number],required:!0}},data:function(){return{visible:!1}},computed:p({},Object(o["c"])({allAftersaleTrace:function(t){return t.afterSales.allAftersaleTrace}})),methods:p(p({},Object(o["b"])({afterSaleGetAftersaleTrace:"afterSales/afterSaleGetAftersaleTrace"})),{},{openModel:function(){this.getData(),this.visible=!0},getData:function(){this.afterSaleGetAftersaleTrace(this.oid)}})},d=m,f=(a("e903"),a("9ca4")),u=Object(f["a"])(d,n,l,!1,null,"7ef1ff36",null),_=u.exports;function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h=[{dataIndex:"goods_image",title:"商品图片",key:"goods_image",scopedSlots:{customRender:"goods_image"}},{title:"商品名称",dataIndex:"goods_name",key:"goods_name"},{title:"购买数量",dataIndex:"quantity",key:"quantity"},{title:"商品价格",dataIndex:"goods_price",key:"goods_price"}],b={name:"detail",computed:g({},Object(o["c"])({allInfo:function(t){return t.afterSales.allInfo},logistics:function(t){return t.trade.logistics}})),components:{TimeLines:_},data:function(){return{againServiceForm:{tid:"",apply_again_status:0},loading:!1,stepCurrent:0,data:[],columns:h,type:"",detail:{},reason_text:"",formItem:{aftersales_bn:"",check_result:!0,aftersales_type:"",shop_explanation:"",total_price:"",refunds_reason:""},exchangeItem:{aftersales_bn:"",corp_code:"",logi_no:"",logi_name:""},info:{},cancal_text:"1",page:!1}},methods:g(g({},Object(o["b"])({saleDetail:"afterSales/saleDetail",afterSalesVerification:"afterSales/afterSalesVerification",sendConfirm:"afterSales/sendConfirm",logisticsLists:"trade/logisticsLists",againService:"afterSales/againService"})),{},{againServiceSubmit:function(){this.againServiceForm.tid=this.detail.tid,this.againService({formData:this.againServiceForm})},initDet:function(){if(this.detail=this.allInfo.info,this.againServiceForm.apply_again_status=this.detail.trade.apply_again_status,this.formItem.aftersales_bn=this.detail.aftersales_bn,this.formItem.aftersales_type=this.detail.aftersales_type,this.formItem.refunds_reason=this.detail.reason,this.exchangeItem.aftersales_bn=this.detail.aftersales_bn,this.data.push(this.detail.trade),"REFUND_GOODS"===this.detail.aftersales_type&&(this.formItem.total_price=this.detail.trade.amount),"EXCHANGING_GOODS"===this.detail.aftersales_type){var t=Number(this.detail.progress);0===t?this.stepCurrent=0:3===t||4===t?this.stepCurrent=2:1!==t&&2!==t&&5!==t||(this.stepCurrent=1)}else{var e=Number(this.detail.progress);0===e?this.stepCurrent=0:3===e?this.stepCurrent=3:2===e||5===e||4===e||1===e?this.stepCurrent=1:8===e?this.stepCurrent=2:6!==e&&7!==e||(this.stepCurrent=3)}this.loading=!0},submit:function(){this.afterSalesVerification({formItem:this.formItem})},exchangingSubmit:function(){var t=this;this.logistics.forEach((function(e){e.corp_code===t.exchangeItem.corp_code&&(t.exchangeItem.corp_name=e.corp_name)})),this.sendConfirm({formItem:this.exchangeItem})}}),mounted:function(){var t={aftersales_bn:this.$route.params.id};this.logisticsLists(),this.saleDetail(t)},watch:{allInfo:function(){this.initDet(),console.log(this.allInfo)}}},y=b,x=(a("940e"),Object(f["a"])(y,s,r,!1,null,"f65c4f16",null));e["default"]=x.exports},"940e":function(t,e,a){"use strict";var s=a("0a02"),r=a.n(s);r.a},d2663:function(t,e,a){},e903:function(t,e,a){"use strict";var s=a("d2663"),r=a.n(s);r.a}}]);