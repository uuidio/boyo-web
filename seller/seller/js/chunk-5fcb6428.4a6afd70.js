(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fcb6428","chunk-8fe48f00"],{"190b":function(t,e,n){n("149f")&&"g"!=/./g.flags&&n("064e").f(RegExp.prototype,"flags",{configurable:!0,get:n("f1fe")})},"2b45":function(t,e,n){"use strict";n("190b");var i=n("69b3"),r=n("f1fe"),s=n("149f"),a="toString",o=/./[a],c=function(t){n("bf16")(RegExp.prototype,a,t,!0)};n("238a")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?c((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)})):o.name!=a&&c((function(){return o.call(this)}))},7219:function(t,e,n){},9493:function(t,e,n){"use strict";var i=n("7219"),r=n.n(i);r.a},f08f:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mr24"},[n("a-card",{attrs:{bordered:!1,title:"营销方式说明"}},[n("div",[t._v("\n      门店级的促销方式，同一订单内，【特定】商品售价总金额，满【特定】金额【特定】会员可享受【特定】金额优惠；门店可设置生成的优惠券总数量。会员在【特定时限】内，通过点击领取优惠券，在购物车内订单结算时使用优惠券。该促销方式与其他不互斥。\n    ")])]),n("a-card",{attrs:{bordered:!1}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("router-link",{attrs:{to:"/marketing/coupon_add"}},[n("a-button",{attrs:{type:"primary",icon:"plus"}},[t._v("添加优惠券")])],1)],1),t.fields&&t.fields.length>0?[n("a-table",{attrs:{scroll:{x:1100,y:700},pagination:!1,columns:t.fields,dataSource:t.dataLists},scopedSlots:t._u([{key:"action",fn:function(e,i){return n("div",{},[t._v("\n          上架状态\n          "),n("a-switch",{key:i.id,staticClass:"mr10",attrs:{checkedChildren:"是",unCheckedChildren:"否",defaultChecked:!!i.is_distribute},on:{change:function(e){return t.act(i)}}}),n("div",{staticClass:"mt10"},[n("a",{on:{click:function(e){return t.setNum(i)}}},[t._v("增加库存")])]),n("div",{staticClass:"mt10"},[n("a",{on:{click:function(e){return t.goDetail(i)}}},[t._v("查看")]),3===i.type?n("a",{staticClass:"ml10",on:{click:function(e){return t.seeList(i)}}},[t._v("查看二维码列表")]):t._e(),n("a",{staticClass:"col-red ml10",on:{click:function(e){return t.del(i)}}},[t._v("删除")])])],1)}},{key:"get_time",fn:function(e,i){return n("div",{},[n("p",[t._v("\n            "+t._s(e[0])),n("br"),t._v("\n            ~"),n("br"),t._v("\n            "+t._s(e[1])+"\n          ")])])}},{key:"use_time",fn:function(e,i){return n("div",{},[n("p",[t._v("\n            "+t._s(e[0])),n("br"),t._v("\n            ~"),n("br"),t._v("\n            "+t._s(e[1])+"\n          ")])])}}],null,!1,1604772065)}),n("div",{staticClass:"pageBox"},[n("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:t.pages.per_page,defaultCurrent:1},on:{change:t.pageChange}})],1)]:t._e()],2),n("a-modal",{attrs:{title:"增加优惠券库存"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("a-form",[n("a-form-item",{attrs:{label:"增加库存数量","label-col":{span:5},"wrapper-col":{span:12}}},[n("a-input-number",{attrs:{placeholder:"增加数量"},model:{value:t.formItem.num,callback:function(e){t.$set(t.formItem,"num",e)},expression:"formItem.num"}})],1)],1)],1)],1)},r=[],s=(n("5ab2"),n("6d57"),n("e10e"),n("2b45"),n("ce3c")),a=n("9f3a");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={name:"coupon",data:function(){return{params:{page:1},visible:!1,formItem:{id:"",num:"",type:1}}},computed:c({},Object(a["c"])({fields:function(t){return t.marketing.couponField},dataLists:function(t){return t.marketing.couponData},pages:function(t){return t.marketing.pages}})),methods:c(c({},Object(a["b"])({fetchLists:"marketing/fetchLists",delCoupon:"marketing/delCoupon",actCoupon:"marketing/actCoupon",updateIssuesNum:"marketing/updateIssuesNum"})),{},{handleOk:function(){return""===this.formItem.num?(this.$notification.error({message:"请输入优惠券库存!",description:""}),!1):this.formItem.num<=0?(this.$notification.error({message:"只允许增加库存！",description:""}),!1):-1!==this.formItem.num.toString().indexOf(".")?(this.$notification.error({message:"只允许输入正整数！",description:""}),!1):(this.updateIssuesNum(this.formItem),void(this.visible=!1))},setNum:function(t){this.formItem.id=t.id,this.formItem.num="",this.visible=!0},pageChange:function(t){this.params.page=t,this.fetchLists(this.params)},seeList:function(t){var e=this.$router.resolve({path:"/marketing/coupon_code/".concat(t.id)});window.open(e.href,"_blank")},act:function(t){var e=0;t.is_distribute?(e=0,t.is_distribute=!1,t.is_distribute_text="否"):t.is_distribute||(e=1,t.is_distribute=!0,t.is_distribute_text="是");var n={id:t.id,is_distribute:e};this.actCoupon({params:n})},goDetail:function(t){var e="/marketing/coupon_show/".concat(t.id);this.$router.push({path:e})},del:function(t){confirm("确认删除该数据？")&&this.delCoupon({id:t.id,dataList:this.dataLists})}}),mounted:function(){this.fetchLists(this.params)}},l=u,f=(n("9493"),n("9ca4")),d=Object(f["a"])(l,i,r,!1,null,"7d45e288",null);e["default"]=d.exports}}]);