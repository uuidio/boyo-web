(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65c7b7e1"],{"358b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodsList",on:{click:function(e){return t.getGoods()}}},[s("div",{on:{click:t.openModel}},[t._t("default")],2),s("a-modal",{attrs:{width:"80%",title:"商品列表"},on:{ok:t.selectGoods},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",{staticClass:"mb20 text-r"},[s("a-input-search",{staticStyle:{width:"22rem"},attrs:{enterButton:"",placeholder:"请输入名称搜索"},on:{search:t.onSearch}}),s("a-form-item",{staticStyle:{display:"inline-block","margin-left":"10px",width:"400px"},attrs:{label:"分类选择","label-col":{xs:{span:24},md:{span:6}},"wrapper-col":{xs:{span:24},md:{span:18}}}},[s("a-cascader",{staticStyle:{width:"100%"},attrs:{options:t.classTree,placeholder:"请选择分类",changeOnSelect:""},on:{change:t.changeClass}})],1)],1),t.listField&&t.listField.length>0?[s("a-table",{staticClass:"components-table-demo-nested",attrs:{rowKey:function(t){return t.id},scroll:{y:400,x:1200},rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange,type:t.seleteType},loading:t.tabLoading,columns:t.listField,dataSource:t.listData,pagination:!1},scopedSlots:t._u([{key:"goods_image",fn:function(t,e){return s("div",{},[s("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.goods_image,alt:""}})])}}],null,!1,828441971)}),s("div",{staticClass:"pages"},[s("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:Number(t.pages.per_page),defaultCurrent:1},on:{change:t.changePage}})],1)]:t._e()],2)],1)},i=[],o=(s("5ab2"),s("6d57"),s("e10e"),s("163d"),s("ce3c")),n=s("804d"),r=s("c1fb"),l=s("c968"),c=s("9f3a");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={name:"goodsList",computed:m({},Object(c["c"])({classTree:function(t){return t.goods.goodsClassTree}})),data:function(){return{visible:!1,tabLoading:!0,params:{page:1,keyword:"",goods_state:1,gc_id_1:"",gc_id_2:"",gc_id_3:""},selectedRowKeys:[],ids:[],selection:[],listData:[],listField:[],pages:{},shopParams:{per_page:1e6,is_open:1}}},watch:{},props:{linkType:{type:String,default:"goods"},seleteType:{type:String,default:"checkbox"},maxNum:{type:Number,default:1e5},defaultKeys:{type:Array,default:function(){return[]}},otherParam:{type:Object,default:function(){}}},mounted:function(){this.defaultKeys.length>0&&(this.selectedRowKeys=this.defaultKeys),this.otherParam&&(console.log(this.otherParam),Object.assign(this.params,this.otherParam)),this.getClassTree()},methods:m(m({},Object(c["b"])({getClassTree:"goods/getGoodsClassTree"})),{},{changeClass:function(t){t.length>0?(this.params.gc_id_1=t[0],this.params.gc_id_2=t[1]||"",this.params.gc_id_3=t[2]||""):(this.params.gc_id_1="",this.params.gc_id_2="",this.params.gc_id_3="")},changePage:function(t){this.params.page=t,this.getGoods()},onSelectChange:function(t,e){if("checkbox"===this.seleteType){if(t.length>this.maxNum)return void this.$message.warning("最大选择数量为"+this.maxNum);this.selectedRowKeys=t;for(var s=0;s<e.length;s++)if(-1===this.ids.indexOf(e[s].id)){var a=[];"goods"===this.linkType?(a.id=e[s].id,a.goods_name=e[s].goods_name,a.goods_price=e[s].goods_price,a.goods_image=e[s].goods_image,this.selection.push(a)):this.selection.push(e[s]),this.ids.push(e[s].id)}for(var i=this.selection.length-1;i>=0;i--)-1===t.indexOf(this.selection[i].id)&&(this.selection.splice(i,1),this.ids.splice(i,1))}else this.selectedRowKeys=t,this.selection=e;this.$emit("selected",this.selection)},onSearch:function(t){this.params.page=1,this.params.keyword=t,this.getGoods()},getGoods:function(){var t=this;this.tabLoading=!0;var e=this.params,s="";s="goods"===this.linkType?n["a"].action.goods_lists:n["a"].action.secKillGoodList,r["a"].get(s,e).then((function(e){0===e.code?(t.listField=e.result.field,t.listField[0].width=50,t.listField[1].width=150,"goods"===t.linkType?t.listField[2].scopedSlots={customRender:"goods_image"}:t.listField[3].scopedSlots={customRender:"goods_image"},t.listField[2].width=120,t.listField[3].width=120,t.listField[4].width=120,t.listField[5].width=120,t.listField[6].width=120,t.listField[7].width=120,t.pages=e.result.lists,t.listData=e.result.lists.data,t.tabLoading=!1):l["a"].showError(e.message)})).catch((function(t){l["a"].showError(t)}))},openModel:function(){this.visible=!0},selectGoods:function(){this.visible=!1,this.$emit("selectOk",this.selection)}})},u=p,f=(s("970e"),s("9ca4")),g=Object(f["a"])(u,a,i,!1,null,"09624b16",null);e["a"]=g.exports},"4acb":function(t,e,s){},"683b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mr24"},[s("a-form",[s("a-form-item",[s("a-card",{attrs:{title:"设置优惠券名称",bordered:!1}},[s("div",{staticClass:"coupon-name"},[s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券名称：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[s("a-input",{model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券描述：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[s("a-input",{model:{value:t.formItem.desc,callback:function(e){t.$set(t.formItem,"desc",e)},expression:"formItem.desc"}})],1)],1)],1)])],1),s("a-form-item",[s("a-card",{attrs:{title:"选择适用商品",bordered:!1}},[s("getGoods",{on:{selectOk:t.getGoodsList}},[s("a-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"}},[t._v("选择商品")])],1),s("ul",{staticClass:"item-lists"},[s("li",[s("a-row",{attrs:{type:"flex",align:"middle"}},t._l(t.formItem.limit_goods,(function(e,a){return s("a-col",{attrs:{xs:24,sm:5}},[s("div",{staticClass:"goods-item"},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:e.goods_image,alt:""}})]),s("div",[s("p",[t._v(t._s(e.goods_name))]),s("p",{staticClass:"col-red"},[t._v("￥"+t._s(e.goods_price))])])])])})),1)],1)])],1)],1),s("a-form-item",[s("a-card",{attrs:{title:"设置规则",bordered:!1}},[s("div",{staticClass:"items"},[s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券场景：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[s("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.formItem.scenes,callback:function(e){t.$set(t.formItem,"scenes",e)},expression:"formItem.scenes"}},[3!==t.formItem.type?s("a-radio",{attrs:{value:1}},[t._v("线上")]):t._e(),3!==t.formItem.type?s("a-radio",{attrs:{value:2}},[t._v("线下")]):t._e(),3!==t.formItem.type?s("a-radio",{attrs:{value:3}},[t._v("全渠道")]):t._e()],1)],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券类型：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[s("a-radio-group",{attrs:{name:"radioGroup",defaultValue:1},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[s("a-radio",{attrs:{value:1}},[t._v("满减券")])],1)],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券金额：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:8,offset:1}}},[s("div",[3!==t.formItem.type?s("div",{staticClass:"reduction"},[s("span",[t._v("满")]),s("a-input",{staticClass:"mj-input",model:{value:t.formItem.origin_condition,callback:function(e){t.$set(t.formItem,"origin_condition",e)},expression:"formItem.origin_condition"}})],1):t._e(),1===t.formItem.type?s("div",{staticClass:"reduction"},[s("span",[t._v("减")]),s("a-input",{staticClass:"mj-input",model:{value:t.formItem.denominations,callback:function(e){t.$set(t.formItem,"denominations",e)},expression:"formItem.denominations"}})],1):2===t.formItem.type?s("div",{staticClass:"reduction"},[s("span",[t._v("折")]),s("a-input",{staticClass:"mj-input",model:{value:t.formItem.discount,callback:function(e){t.$set(t.formItem,"discount",e)},expression:"formItem.discount"}})],1):s("div",[s("span",[t._v("减")]),s("a-input",{staticClass:"mj-input",model:{value:t.formItem.denominations,callback:function(e){t.$set(t.formItem,"denominations",e)},expression:"formItem.denominations"}}),s("span",[t._v("元")])],1)])])],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                生成优惠券总数量：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:7,offset:1}}},[s("a-input",{attrs:{type:"number"},model:{value:t.formItem.issue_num,callback:function(e){t.$set(t.formItem,"issue_num",e)},expression:"formItem.issue_num"}})],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                用户可领取数量：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:7,offset:1}}},[s("a-input",{attrs:{type:"number"},model:{value:t.formItem.user_num,callback:function(e){t.$set(t.formItem,"user_num",e)},expression:"formItem.user_num"}})],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券可领取时间段：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:7,offset:1}}},[s("a-range-picker",{attrs:{showTime:"",format:"YYYY/MM/DD HH:mm:ss"},on:{change:t.timeChange}})],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                优惠券有效期：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:7,offset:1}}},[s("a-range-picker",{attrs:{showTime:"",format:"YYYY/MM/DD HH:mm:ss"},on:{change:t.timeChange2}})],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                满减活动是否可用：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[s("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.formItem.fullminus_act_enabled,callback:function(e){t.$set(t.formItem,"fullminus_act_enabled",e)},expression:"formItem.fullminus_act_enabled"}},[s("a-radio",{attrs:{value:0}},[t._v("否")]),s("a-radio",{attrs:{value:1}},[t._v("是")])],1)],1)],1),s("a-row",{attrs:{type:"flex",align:"middle"}},[s("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:4}}},[t._v("\n                满折活动是否可用：\n              ")]),s("a-col",{attrs:{xs:{span:24},md:{span:6,offset:1}}},[s("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.formItem.discount_act_enabled,callback:function(e){t.$set(t.formItem,"discount_act_enabled",e)},expression:"formItem.discount_act_enabled"}},[s("a-radio",{attrs:{value:0}},[t._v("否")]),s("a-radio",{attrs:{value:1}},[t._v("是")])],1)],1)],1)],1)])],1),s("a-form-item",{staticClass:"btn-item"},[s("a-button",{attrs:{type:"primary",size:"large",disabled:t.is_submit},on:{click:t.submit}},[t._v("保存")]),s("a-button",{attrs:{size:"large"},on:{click:t.goback}},[t._v("取消")])],1)],1)],1)},i=[],o=(s("5ab2"),s("6d57"),s("e10e"),s("ce3c")),n=s("358b"),r=s("9f3a");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d=["普通会员","SVIP会员","VIP会员"],m=["app端","wap端","pc端"],p={name:"add",components:{getGoods:n["a"]},data:function(){return{is_submit:!1,checkAll:!1,checkAll2:!1,plainOptions:d,channelOptions:m,checkedChannel:[],checkedList:[],formItem:{name:"",is_bind_goods:"1",limit_goods:[],issue_num:"",user_num:1,scenes:1,desc:"",type:1,get_star:"",get_end:"",start_at:"",end_at:"",discount:"",denominations:"",channel:[],origin_condition:"",fullminus_act_enabled:0,discount_act_enabled:0,group_act_enabled:0,seckill_act_enabled:0,spread_goods_enabled:0}}},methods:c(c({},Object(r["b"])({addCoupon:"marketing/addCoupon"})),{},{timeChange:function(t,e){this.formItem.get_star=e[0],this.formItem.get_end=e[1]},timeChange2:function(t,e){this.formItem.start_at=e[0],this.formItem.end_at=e[1]},onChange2:function(t){this.checkAll2=t.length===m.length},onCheckAllChange2:function(t){Object.assign(this,{checkedChannel:t.target.checked?m:[],checkAll2:t.target.checked})},onChange:function(t){this.checkAll=t.length===d.length},onCheckAllChange:function(t){Object.assign(this,{checkedList:t.target.checked?d:[],checkAll:t.target.checked})},getGoodsList:function(t){console.log(t),this.formItem.limit_goods=t},delGoods:function(t){this.formItem.limit_goods.splice(t,1)},submit:function(){var t=this;this.is_submit=!0,this.formItem.channel=this.checkedChannel,3===this.formItem.type&&(this.formItem.scenes=2),0===this.formItem.limit_goods.length&&(this.formItem.is_bind_goods=0),this.addCoupon({formItem:this.formItem}),console.log(this.formItem),setTimeout((function(){t.$nextTick((function(){t.is_submit=!1}))}),2e3)},goback:function(){this.$router.push({path:"/marketing/coupon"})}}),mounted:function(){}},u=p,f=(s("6af2"),s("9ca4")),g=Object(f["a"])(u,a,i,!1,null,"06453e4d",null);e["default"]=g.exports},"6af2":function(t,e,s){"use strict";var a=s("4acb"),i=s.n(a);i.a},"970e":function(t,e,s){"use strict";var a=s("9765"),i=s.n(a);i.a},9765:function(t,e,s){}}]);