(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef03b8de"],{"07fb":function(t,e,a){},4854:function(t,e,a){"use strict";a.r(e);var r,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"mb20"},[a("div",{staticClass:"list-nav"},[a("div",[a("a-button",{attrs:{type:"primary",disabled:0===t.listsData.length,icon:"download"},on:{click:t.exportTable}},[t._v("导出")]),a("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:t.filterAlert}},[t._v("筛选")])],1),a("div",[a("a-input-search",{staticStyle:{width:"400px"},attrs:{enterButton:"",placeholder:"请输入订单号"},on:{search:t.toSearch},model:{value:t.searchObj.value,callback:function(e){t.$set(t.searchObj,"value",e)},expression:"searchObj.value"}})],1)])]),t.listField&&t.listField.length>0?[a("a-tabs",{on:{tabClick:t.tabClick},model:{value:t.currentAct,callback:function(e){t.currentAct=e},expression:"currentAct"}},t._l(t.afterStatus,(function(e,r){return a("a-tab-pane",{key:e.key,attrs:{tab:e.title}},[a("a-table",{attrs:{scroll:{x:1600,y:700},columns:t.listField,dataSource:t.listsData,pagination:!1},scopedSlots:t._u([{key:"action",fn:function(e,r){return a("div",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.goDetails(r)}}},[t._v("查看")])])}}],null,!0)})],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.listsData.length,expression:"listsData.length !== 0"}],staticClass:"pageBox"},[a("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:t.pages.per_page},on:{change:t.pageChange},model:{value:t.currentPages,callback:function(e){t.currentPages=e},expression:"currentPages"}})],1)]:t._e(),a("a-modal",{attrs:{title:"售后列表筛选"},on:{ok:t.filterOk},model:{value:t.exportModel,callback:function(e){t.exportModel=e},expression:"exportModel"}},[a("a-form-item",{attrs:{label:"售后状态:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择订单状态"},model:{value:t.exportForm.status,callback:function(e){t.$set(t.exportForm,"status",e)},expression:"exportForm.status"}},[a("a-select-option",{attrs:{value:"2"}},[t._v("已处理")]),a("a-select-option",{attrs:{value:"1"}},[t._v("处理中")]),a("a-select-option",{attrs:{value:"0"}},[t._v("待处理")]),a("a-select-option",{attrs:{value:"3"}},[t._v("已驳回")]),a("a-select-option",{attrs:{value:"-1"}},[t._v("全部")])],1)],1),a("a-form-item",{attrs:{label:"售后类型:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择售后类型"},model:{value:t.exportForm.aftersales_type,callback:function(e){t.$set(t.exportForm,"aftersales_type",e)},expression:"exportForm.aftersales_type"}},[a("a-select-option",{attrs:{value:"ONLY_REFUND"}},[t._v("仅退款")]),a("a-select-option",{attrs:{value:"REFUND_GOODS"}},[t._v("退货退款")]),a("a-select-option",{attrs:{value:"EXCHANGING_GOODS"}},[t._v("换货")])],1)],1),a("a-form-item",{attrs:{label:"生成时间:","label-col":{md:6,xs:24},"wrapper-col":{md:18,xs:24}}},[a("a-range-picker",{attrs:{"showTime.defaultValue":"00:00:00"},on:{change:t.timeSelect}})],1)],1)],2)},i=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ce3c")),n=a("9f3a");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={computed:c({},Object(n["c"])({listsData:function(t){return t.afterSales.afterSales},pages:function(t){return t.afterSales.pages},listField:function(t){return t.afterSales.fields}})),data:function(){return{getData:{page:1},searchObj:{select:"name",param:{},value:""},exportForm:{status:"",page:"1"},currentParam:{},filterParams:{},afterStatus:[{title:"全部",key:"-1"},{title:"已处理",key:"2"},{title:"处理中",key:"1"},{title:"待处理",key:"0"},{title:"已驳回",key:"3"}],exportModel:!1,isFillter:!1,currentAct:"-1",currentPages:1}},methods:c(c({},Object(n["b"])({fetchLists:"afterSales/fetchLists",afterExport:"trade/afterExport"})),{},(r={pageChange:function(t){var e=this.isFillter?this.filterParams:this.currentParam;e.status=e.status>=0?e.status:"",e.page=t,this.fetchLists(e)},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},goDetails:function(t){var e="/trade/afterSales/detail/".concat(t.aftersales_bn),a=this.$router.resolve({path:e});window.open(a.href,"_blank")},exportTable:function(){var t=this,e=this.isFillter?this.filterParams:this.currentParam;e.status=e.status>=0?e.status:"",this.afterExport(e).then((function(e){var r=e.tHeader,s=e.filterVal,i=e.list,o=t.formatJson(s,i);Promise.all([a.e("chunk-87d7ce5a"),a.e("chunk-c52ffaa2"),a.e("chunk-23853d05")]).then(a.bind(null,"4bf8")).then((function(t){t.export_json_to_excel({header:r,data:o,filename:"售后订单列表",autoWidth:!0,bookType:"xlsx"})}))})),this.$nextTick((function(){t.exportForm={}}))}},Object(o["a"])(r,"formatJson",(function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))})),Object(o["a"])(r,"toSearch",(function(){this.searchObj.value?(this.currentParam={},this.currentParam.tid=this.searchObj.value,this.fetchLists({page:1,tid:this.searchObj.value})):this.$message.info("订单号不能为空")})),Object(o["a"])(r,"tabClick",(function(t){console.log(t),this.exportForm.status=t,this.currentAct=t,this.currentParam={},this.currentParam.status=t,this.isFillter=!1,this.searchObj.value="",this.fetchLists({page:1,status:t>=0?t:""}),this.currentPages=1})),Object(o["a"])(r,"filterAlert",(function(){this.exportModel=!0,this.exportForm={}})),Object(o["a"])(r,"filterOk",(function(){this.isFillter=!0,this.currentAct=this.exportForm.status?this.exportForm.status:"-1",this.filterParams=Object.assign({},this.exportForm),this.filterParams.status=this.filterParams.status>=0?this.filterParams.status:"",this.exportModel=!1,this.fetchLists(this.filterParams),this.searchObj.value="",this.exportForm={page:1},console.log(this.filterParams)})),Object(o["a"])(r,"timeSelect",(function(t,e){e[0]===e[1]&&(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 23:59:59"),this.exportForm.created_start=e[0],this.exportForm.created_end=e[1]})),r)),mounted:function(){this.fetchLists({page:1})}},p=u,f=(a("e29d"),a("9ca4")),h=Object(f["a"])(p,s,i,!1,null,"9b28f9ae",null);e["default"]=h.exports},e29d:function(t,e,a){"use strict";var r=a("07fb"),s=a.n(r);s.a}}]);