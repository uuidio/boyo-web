(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c48e01b"],{"04cd":function(t,s,e){},"358b":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goodsList",on:{click:function(s){return t.getGoods()}}},[e("div",{on:{click:t.openModel}},[t._t("default")],2),e("a-modal",{attrs:{width:"80%",title:"商品列表"},on:{ok:t.selectGoods},model:{value:t.visible,callback:function(s){t.visible=s},expression:"visible"}},[e("div",{staticClass:"mb20 text-r"},[e("a-input-search",{staticStyle:{width:"22rem"},attrs:{enterButton:"",placeholder:"请输入名称搜索"},on:{search:t.onSearch}}),e("a-form-item",{staticStyle:{display:"inline-block","margin-left":"10px",width:"400px"},attrs:{label:"分类选择","label-col":{xs:{span:24},md:{span:6}},"wrapper-col":{xs:{span:24},md:{span:18}}}},[e("a-cascader",{staticStyle:{width:"100%"},attrs:{options:t.classTree,placeholder:"请选择分类",changeOnSelect:""},on:{change:t.changeClass}})],1)],1),t.listField&&t.listField.length>0?[e("a-table",{staticClass:"components-table-demo-nested",attrs:{rowKey:function(t){return t.id},scroll:{y:400,x:1200},rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange,type:t.seleteType},loading:t.tabLoading,columns:t.listField,dataSource:t.listData,pagination:!1},scopedSlots:t._u([{key:"goods_image",fn:function(t,s){return e("div",{},[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s.goods_image,alt:""}})])}}],null,!1,828441971)}),e("div",{staticClass:"pages"},[e("a-pagination",{attrs:{total:t.pages.total,showTotal:function(t){return"共 "+t+" 条数据"},pageSize:Number(t.pages.per_page),defaultCurrent:1},on:{change:t.changePage}})],1)]:t._e()],2)],1)},o=[],a=(e("5ab2"),e("6d57"),e("e10e"),e("163d"),e("ce3c")),l=e("804d"),c=e("c1fb"),n=e("c968"),r=e("9f3a");function d(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);s&&(i=i.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,i)}return e}function p(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?d(Object(e),!0).forEach((function(s){Object(a["a"])(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}var g={name:"goodsList",computed:p({},Object(r["c"])({classTree:function(t){return t.goods.goodsClassTree}})),data:function(){return{visible:!1,tabLoading:!0,params:{page:1,keyword:"",goods_state:1,gc_id_1:"",gc_id_2:"",gc_id_3:""},selectedRowKeys:[],ids:[],selection:[],listData:[],listField:[],pages:{},shopParams:{per_page:1e6,is_open:1}}},watch:{},props:{linkType:{type:String,default:"goods"},seleteType:{type:String,default:"checkbox"},maxNum:{type:Number,default:1e5},defaultKeys:{type:Array,default:function(){return[]}},otherParam:{type:Object,default:function(){}}},mounted:function(){this.defaultKeys.length>0&&(this.selectedRowKeys=this.defaultKeys),this.otherParam&&(console.log(this.otherParam),Object.assign(this.params,this.otherParam)),this.getClassTree()},methods:p(p({},Object(r["b"])({getClassTree:"goods/getGoodsClassTree"})),{},{changeClass:function(t){t.length>0?(this.params.gc_id_1=t[0],this.params.gc_id_2=t[1]||"",this.params.gc_id_3=t[2]||""):(this.params.gc_id_1="",this.params.gc_id_2="",this.params.gc_id_3="")},changePage:function(t){this.params.page=t,this.getGoods()},onSelectChange:function(t,s){if("checkbox"===this.seleteType){if(t.length>this.maxNum)return void this.$message.warning("最大选择数量为"+this.maxNum);this.selectedRowKeys=t;for(var e=0;e<s.length;e++)if(-1===this.ids.indexOf(s[e].id)){var i=[];"goods"===this.linkType?(i.id=s[e].id,i.goods_name=s[e].goods_name,i.goods_price=s[e].goods_price,i.goods_image=s[e].goods_image,this.selection.push(i)):this.selection.push(s[e]),this.ids.push(s[e].id)}for(var o=this.selection.length-1;o>=0;o--)-1===t.indexOf(this.selection[o].id)&&(this.selection.splice(o,1),this.ids.splice(o,1))}else this.selectedRowKeys=t,this.selection=s;this.$emit("selected",this.selection)},onSearch:function(t){this.params.page=1,this.params.keyword=t,this.getGoods()},getGoods:function(){var t=this;this.tabLoading=!0;var s=this.params,e="";e="goods"===this.linkType?l["a"].action.goods_lists:l["a"].action.secKillGoodList,c["a"].get(e,s).then((function(s){0===s.code?(t.listField=s.result.field,t.listField[0].width=50,t.listField[1].width=150,"goods"===t.linkType?t.listField[2].scopedSlots={customRender:"goods_image"}:t.listField[3].scopedSlots={customRender:"goods_image"},t.listField[2].width=120,t.listField[3].width=120,t.listField[4].width=120,t.listField[5].width=120,t.listField[6].width=120,t.listField[7].width=120,t.pages=s.result.lists,t.listData=s.result.lists.data,t.tabLoading=!1):n["a"].showError(s.message)})).catch((function(t){n["a"].showError(t)}))},openModel:function(){this.visible=!0},selectGoods:function(){this.visible=!1,this.$emit("selectOk",this.selection)}})},_=g,h=(e("970e"),e("9ca4")),m=Object(h["a"])(_,i,o,!1,null,"09624b16",null);s["a"]=m.exports},5141:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mr24 coupon_show"},[e("a-card",{attrs:{title:"秒杀活动信息"}},[e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:3}}},[t._v("\n        秒杀活动名称：\n      ")]),e("a-col",{attrs:{xs:{span:24},md:{span:6}}},[e("p",{staticClass:"coupon_p"},[t._v(t._s(t.detail.activity_name))])])],1),e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:3}}},[t._v("\n        秒杀活动描述：\n      ")]),e("a-col",{attrs:{xs:{span:24},md:{span:6}}},[e("p",{staticClass:"coupon_p"},[t._v(t._s(t.detail.activity_desc))])])],1),e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:3}}},[t._v("\n        活动报名时间：\n      ")]),e("a-col",{attrs:{xs:{span:24},md:{span:6}}},[e("p",{staticClass:"coupon_p"},[t._v("\n          "+t._s(t.detail.apply_begin_time)+" ~ "+t._s(t.detail.apply_end_time)+"\n        ")])])],1),e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:3}}},[t._v("\n        活动生效时间：\n      ")]),e("a-col",{attrs:{xs:{span:24},md:{span:6}}},[e("p",{staticClass:"coupon_p"},[t._v("\n          "+t._s(t.detail.start_time)+" ~ "+t._s(t.detail.end_time)+"\n        ")])])],1),e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-col",{staticClass:"add-label",attrs:{xs:{span:24},md:{span:3}}},[t._v("\n        秒杀活动状态：\n      ")]),e("a-col",{attrs:{xs:{span:24},md:{span:6}}},[e("p",{staticClass:"coupon_p"},[t._v(t._s(t.detail.validstatus))])])],1)],1),e("a-card",{attrs:{title:"选择商品"}},[e("getGoods",{attrs:{linkType:"seckill",defaultKeys:t.defKey},on:{selectOk:t.confirmList,selected:t.goodsSelected}},[e("a-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"}},[t._v("选择商品")])],1),e("ul",{staticClass:"item-lists"},[e("li",[e("a-row",{attrs:{type:"flex",align:"middle"}},t._l(t.goods_lists,(function(s,i){return e("a-col",{key:i,staticClass:"col-item",attrs:{xs:24,sm:4}},[e("div",{staticClass:"goods-item"},[e("div",{staticClass:"imgBox"},[e("img",{attrs:{src:s.goods_image,alt:""}})]),e("div",{staticClass:"goods-info"},[e("p",{staticClass:"line-one-p"},[t._v("商品名称："+t._s(s.goods_name))]),e("p",[t._v("商品原价格：￥"+t._s(s.goods_price))]),e("p",[t._v("商品原库存："+t._s(s.goods_stock))]),e("p",[t._v("\n                  商品SKU信息："+t._s(s.spec_sign?s.spec_sign:"无规格")+"\n                ")]),e("p",[t._v("\n                  秒杀商品标题："),""===s.title?e("span",{staticClass:"col-red"},[t._v("未填写")]):e("span",[t._v(t._s(s.title))])]),e("p",[t._v("\n                  秒杀商品价格："),""===s.seckill_price?e("span",{staticClass:"col-red"},[t._v("未填写")]):e("span",[t._v(t._s(s.seckill_price))])]),e("p",[t._v("\n                  秒杀商品库存："),""===s.seckills_stock?e("span",{staticClass:"col-red"},[t._v("未填写")]):e("span",[t._v(t._s(s.seckills_stock))])]),e("div",[e("a",{on:{click:function(s){return t.editGoods(i)}}},[t._v("编辑秒杀商品信息")])])])])])})),1)],1)])],1),e("a-card",{attrs:{title:"提交设置"}},[e("a-button",{attrs:{type:"primary",disabled:0===t.goods_lists.length},on:{click:t.handleSubmit}},[t._v("提交")]),e("a-button",{staticClass:"ml10",attrs:{type:"danger"},on:{click:function(s){return t.$router.back(-1)}}},[t._v("返回")])],1),e("a-modal",{attrs:{title:"编辑秒杀商品信息"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(s){t.visible=s},expression:"visible"}},[e("a-form",[e("a-form-item",{attrs:{label:"商品名称","label-col":{span:5},"wrapper-col":{span:12}}},[t._v("\n        "+t._s(t.goosItem.name)+"\n      ")]),e("a-form-item",{attrs:{label:"商品SKU","label-col":{span:5},"wrapper-col":{span:12}}},[t._v("\n        "+t._s(t.goosItem.spec_sign?t.goosItem.spec_sign:"无规格")+"\n      ")]),e("a-form-item",{attrs:{label:"商品原价格","label-col":{span:5},"wrapper-col":{span:12}}},[t._v("\n        ￥"+t._s(t.goosItem.price)+"\n      ")]),e("a-form-item",{attrs:{label:"商品原库存","label-col":{span:5},"wrapper-col":{span:12}}},[t._v("\n        "+t._s(t.goosItem.goods_stock)+"\n      ")]),e("a-form-item",{attrs:{label:"秒杀商品标题","label-col":{span:5},"wrapper-col":{span:12}}},[e("a-input",{staticStyle:{width:"200px"},model:{value:t.goosItem.title,callback:function(s){t.$set(t.goosItem,"title",s)},expression:"goosItem.title"}})],1),e("a-form-item",{attrs:{label:"秒杀商品价格","label-col":{span:5},"wrapper-col":{span:12}}},[e("a-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.goosItem.seckill_price,callback:function(s){t.$set(t.goosItem,"seckill_price",s)},expression:"goosItem.seckill_price"}})],1),e("a-form-item",{attrs:{label:"秒杀商品库存","label-col":{span:5},"wrapper-col":{span:16}}},[e("div",[e("a-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.goosItem.seckills_stock,callback:function(s){t.$set(t.goosItem,"seckills_stock",s)},expression:"goosItem.seckills_stock"}})],1),e("div",[t._v("*秒杀库存设置必须小于或等于商品原库存")])])],1)],1)],1)},o=[],a=(e("5ab2"),e("6d57"),e("e10e"),e("ce3c")),l=e("9f3a"),c=e("358b");function n(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);s&&(i=i.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,i)}return e}function r(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?n(Object(e),!0).forEach((function(s){Object(a["a"])(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}var d={name:"coupon_show",components:{getGoods:c["a"]},computed:r({},Object(l["c"])({detail:function(t){return t.seckill.applyDetail},resApplyList:function(t){return t.seckill.resApplyList}})),data:function(){return{isReset:!1,resetId:null,defKey:[""],tempList:[],id:"",goods_lists:[],visible:!1,editIndex:0,goosItem:{name:"",price:"",spec_sign:"",title:"",seckill_price:"",seckills_stock:"",stock_limit:""}}},methods:r(r({},Object(l["b"])({getDetail:"seckill/getApplyDetail",seckillApplySave:"seckill/seckillApplySave",resApply:"seckill/resApplyEdit",getresetDetail:"seckill/getDetail"})),{},{editGoods:function(t){this.editIndex=t,this.goosItem={name:this.goods_lists[t].goods_name,price:this.goods_lists[t].goods_price,goods_stock:this.goods_lists[t].goods_stock,spec_sign:this.goods_lists[t].spec_sign,title:this.goods_lists[t].title,seckill_price:this.goods_lists[t].seckill_price,seckills_stock:this.goods_lists[t].seckills_stock,stock_limit:this.goods_lists[t].stock_limit},this.visible=!0},handleOk:function(){""!==this.goosItem.title&&""!==this.goosItem.seckill_price&&""!==this.goosItem.seckills_stock?(this.goods_lists[this.editIndex].title=this.goosItem.title,this.goods_lists[this.editIndex].seckill_price=this.goosItem.seckill_price,this.goods_lists[this.editIndex].seckills_stock=this.goosItem.seckills_stock,this.goods_lists[this.editIndex].stock_limit=this.goosItem.stock_limit,this.visible=!1):this.$message.warning("请填写完成秒杀商品信息")},confirmList:function(){if(0!==this.tempList.length){var t=[];this.tempList.map((function(s,e){s.seckill_price=s.seckill_price?s.seckill_price:"",s.title=s.title?s.title:"",s.seckills_stock=s.seckills_stock?s.seckills_stock:"",t.push(s)})),this.goods_lists=t,this.tempList=[]}},goodsSelected:function(t){this.tempList=t},handleSubmit:function(){for(var t=this,s=[],e=0;e<this.goods_lists.length;e++){var i=this.goods_lists[e];if(""===i.title||""===i.seckill_price||""===i.seckills_stock)return this.$message.warning("请填写完成每个秒杀商品信息"),!1;var o=i.id;i.sku_id>0&&(o=i.sku_id),s.push({title:i.title,goods_name:i.goods_name,goods_id:i.goods_id,sku_id:o,goods_price:i.goods_price,seckill_price:i.seckill_price,goods_image:i.goods_image,seckills_stock:i.seckills_stock,spec_sign:i.spec_sign,stock_limit:i.stock_limit,sort:""})}var a={seckill_ap_id:this.id,goods_info:s};this.isReset?(a.id=this.resetId,this.resApply(a).then((function(s){t.$message.success("提交成功～"),t.$router.back(-1)}))):this.seckillApplySave({formItem:a})}}),mounted:function(){this.id=this.$route.params.id,void 0!==this.$route.params.id&&this.getDetail({id:this.$route.params.id}),this.$route.query.actid&&(this.getresetDetail({id:this.$route.query.actid,isRes:!0}),this.isReset=!0,this.resetId=this.$route.query.actid)},watch:{resApplyList:function(){var t=this;this.resApplyList.map((function(s,e){t.$set(t.defKey,e,s.sku_id),t.goods_lists.push(s)}))}}},p=d,g=(e("fd3e"),e("9ca4")),_=Object(g["a"])(p,i,o,!1,null,"04faa770",null);s["default"]=_.exports},"970e":function(t,s,e){"use strict";var i=e("9765"),o=e.n(i);o.a},9765:function(t,s,e){},fd3e:function(t,s,e){"use strict";var i=e("04cd"),o=e.n(i);o.a}}]);